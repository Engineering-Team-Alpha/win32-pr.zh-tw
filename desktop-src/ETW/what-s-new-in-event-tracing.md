---
description: 本節說明在每個版本中新增至 Windows 事件追蹤的新功能。
ms.assetid: 5d94a6d2-2280-4a97-aa5a-c9ca2c016c84
title: 事件追蹤的新功能
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 613433834e5a11f2886b6ee314fdb60114f66976
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "103691192"
---
# <a name="whats-new-in-event-tracing"></a><span data-ttu-id="6aded-103">事件追蹤的新功能</span><span class="sxs-lookup"><span data-stu-id="6aded-103">What's New in Event Tracing</span></span>

<span data-ttu-id="6aded-104">本節說明在每個版本中新增至 Windows 事件追蹤的新功能。</span><span class="sxs-lookup"><span data-stu-id="6aded-104">This section describes the new features that were added to Event Tracing for Windows in each release.</span></span>

## <a name="windows-10-version-1709"></a><span data-ttu-id="6aded-105">Windows 10 (版本 1709)</span><span class="sxs-lookup"><span data-stu-id="6aded-105">Windows 10, version 1709</span></span>

<span data-ttu-id="6aded-106">ETW 現在可以選擇性地追蹤已啟用至會話之所有提供者的二進位檔。</span><span class="sxs-lookup"><span data-stu-id="6aded-106">ETW can now optionally track binaries for all providers that are enabled to the session.</span></span> <span data-ttu-id="6aded-107">追蹤會針對在呼叫之前啟用會話的提供者，以及針對會話啟用的所有未來提供者，套用追溯。</span><span class="sxs-lookup"><span data-stu-id="6aded-107">The tracking applies retroactively for providers that were enabled to the session prior to the call, as well as for all future providers that are enabled to the session.</span></span> <span data-ttu-id="6aded-108">您現在也可以查詢作業系統所允許的目前設定的最大系統記錄器數目。</span><span class="sxs-lookup"><span data-stu-id="6aded-108">You can also now query for the currently-configured maximum number of system loggers allowed by the operating system.</span></span> <span data-ttu-id="6aded-109">如需詳細資訊，請參閱 [**追蹤 \_ 資訊 \_ 類別**](/windows/win32/api/evntrace/ne-evntrace-trace_query_info_class)列舉的 **TraceProviderBinaryTracking** 和 **TraceMaxLoggersQuery** 值，以及如何 [取出其他事件追蹤資料](retrieving-additional-event-tracing-data.md)。</span><span class="sxs-lookup"><span data-stu-id="6aded-109">For more information, see the **TraceProviderBinaryTracking** and **TraceMaxLoggersQuery** values of the [**TRACE\_INFO\_CLASS**](/windows/win32/api/evntrace/ne-evntrace-trace_query_info_class) enumeration, as well as [Retrieving Additional Event Tracing Data](retrieving-additional-event-tracing-data.md).</span></span>

<span data-ttu-id="6aded-110">ETW 現在可以根據事件名稱篩選事件。</span><span class="sxs-lookup"><span data-stu-id="6aded-110">ETW can now filter events based on event name.</span></span> <span data-ttu-id="6aded-111">您也可以決定哪些事件會取得其堆疊。</span><span class="sxs-lookup"><span data-stu-id="6aded-111">You can also determine which events get their stacks captured.</span></span> <span data-ttu-id="6aded-112">如需詳細資訊，請參閱事件 **\_ 篩選器 \_ 類型 \_ 事件 \_ 名稱**、 **事件 \_ 篩選器 \_ 類型 \_ STACKWALK \_ 名稱** 和 **事件 \_ 篩選器 \_ 類型 \_ STACKWALK 層 \_ 級 \_** 的 [**事件 \_ 篩選器 \_ 描述**](/windows/desktop/api/Evntprov/ns-evntprov-event_filter_descriptor) 項結構的層級值，以及相關聯的 [**事件 \_ 篩選器 \_ 事件 \_ 名稱**](/windows/desktop/api/Evntprov/ns-evntprov-event_filter_event_name) 和 [**事件 \_ 篩選 \_ 層級 \_ kw**](/windows/desktop/api/Evntprov/ns-evntprov-event_filter_level_kw) 結構。</span><span class="sxs-lookup"><span data-stu-id="6aded-112">For more information, see the **EVENT\_FILTER\_TYPE\_EVENT\_NAME**, **EVENT\_FILTER\_TYPE\_STACKWALK\_NAME** , and **EVENT\_FILTER\_TYPE\_STACKWALK\_LEVEL\_KW** values of the [**EVENT\_FILTER\_DESCRIPTOR**](/windows/desktop/api/Evntprov/ns-evntprov-event_filter_descriptor) structure, as well as the associated [**EVENT\_FILTER\_EVENT\_NAME**](/windows/desktop/api/Evntprov/ns-evntprov-event_filter_event_name) and [**EVENT\_FILTER\_LEVEL\_KW**](/windows/desktop/api/Evntprov/ns-evntprov-event_filter_level_kw) structures.</span></span>

## <a name="windows-10"></a><span data-ttu-id="6aded-113">Windows 10</span><span class="sxs-lookup"><span data-stu-id="6aded-113">Windows 10</span></span>

<span data-ttu-id="6aded-114">[TraceLogging](../tracelogging/trace-logging-portal.md) 是以 ETW 為基礎，可讓您以簡化的方式檢測原生、.Net 和 WinRT 開發人員的程式碼。</span><span class="sxs-lookup"><span data-stu-id="6aded-114">[TraceLogging](../tracelogging/trace-logging-portal.md) builds on ETW and provides a simplified way to instrument code for native, .NET and WinRT developers.</span></span> <span data-ttu-id="6aded-115">TraceLogging 可讓您包含事件的結構化資料、使事件相互關聯，而且不需要個別的檢測資訊清單 XML 檔案。</span><span class="sxs-lookup"><span data-stu-id="6aded-115">TraceLogging allows you to include structured data with events, correlate events, and does not require a separate instrumentation manifest XML file.</span></span>

<span data-ttu-id="6aded-116">加入[提供者特性](provider-traits.md)是將更多資料附加至個別提供者註冊的方法。</span><span class="sxs-lookup"><span data-stu-id="6aded-116">[Provider Traits](provider-traits.md) were added as a method of attaching more data to an individual provider registration.</span></span> <span data-ttu-id="6aded-117">它們可用於以資訊清單為基礎或 TraceLogging 的提供者。</span><span class="sxs-lookup"><span data-stu-id="6aded-117">They can be used for manifest-based or TraceLogging providers.</span></span> <span data-ttu-id="6aded-118">目前支援將提供者名稱和/或提供者群組新增至個別提供者註冊。</span><span class="sxs-lookup"><span data-stu-id="6aded-118">This currently includes support for adding a Provider Name and/or a Provider Group to an individual provider registration.</span></span> <span data-ttu-id="6aded-119">提供者群組是一項新功能，可讓多個 ETW 提供者依所屬群組的匯總進行控制。</span><span class="sxs-lookup"><span data-stu-id="6aded-119">Provider Groups are a new feature to allow multiple ETW providers to be controlled in aggregate by the group they belong to.</span></span>

<span data-ttu-id="6aded-120">定期捕捉狀態是允許定期傳送至提供者的捕獲狀態通知的方式。</span><span class="sxs-lookup"><span data-stu-id="6aded-120">Periodic capture state is a way to allow capture state notifications to be routinely sent to providers.</span></span> <span data-ttu-id="6aded-121">啟用此功能時，只會將通知傳送至先前已啟用目前會話的提供者註冊。</span><span class="sxs-lookup"><span data-stu-id="6aded-121">When this is enabled, notifications will only be sent to provider registrations that have been previously enabled to the current session.</span></span> <span data-ttu-id="6aded-122">如果通知有任何) ，每個提供者都可以定義自己的回應 (。</span><span class="sxs-lookup"><span data-stu-id="6aded-122">Each provider can define its own response (if any) to a notification.</span></span> <span data-ttu-id="6aded-123">如需執行的詳細資料，請參閱 [**追蹤 \_ 定期 \_ 捕捉 \_ 狀態 \_ 資訊**](/windows/win32/api/evntrace/ns-evntrace-trace_periodic_capture_state_info)。</span><span class="sxs-lookup"><span data-stu-id="6aded-123">For implementation details, see [**TRACE\_PERIODIC\_CAPTURE\_STATE\_INFO**](/windows/win32/api/evntrace/ns-evntrace-trace_periodic_capture_state_info).</span></span>

## <a name="windows-81-and-windows-server-2012-r2"></a><span data-ttu-id="6aded-124">Windows 8.1 與 Windows Server 2012 R2</span><span class="sxs-lookup"><span data-stu-id="6aded-124">Windows 8.1 and Windows Server 2012 R2</span></span>

<span data-ttu-id="6aded-125">下列功能已新增至 Windows 8.1 和 Windows Server 2012 R2 上的事件追蹤。</span><span class="sxs-lookup"><span data-stu-id="6aded-125">The following features have been added to Event Tracing on Windows 8.1 and Windows Server 2012 R2.</span></span>

<span data-ttu-id="6aded-126">支援使用 [**EnableTraceEx2**](/windows/win32/api/evntrace/nf-evntrace-enabletraceex2) 函式所使用之事件承載、範圍和堆疊逐步篩選的函式，以及 [**啟用 \_ 追蹤 \_ 參數**](/windows/win32/api/evntrace/ns-evntrace-enable_trace_parameters) 和 [**事件 \_ 篩選 \_ 描述**](/windows/desktop/api/Evntprov/ns-evntprov-event_filter_descriptor) 項結構，以篩選記錄器會話中的特定條件。</span><span class="sxs-lookup"><span data-stu-id="6aded-126">Functions that support using event payload, scope, and stack walk filters used by the [**EnableTraceEx2**](/windows/win32/api/evntrace/nf-evntrace-enabletraceex2) function and the [**ENABLE\_TRACE\_PARAMETERS**](/windows/win32/api/evntrace/ns-evntrace-enable_trace_parameters) and [**EVENT\_FILTER\_DESCRIPTOR**](/windows/desktop/api/Evntprov/ns-evntprov-event_filter_descriptor) structures to filter on specific conditions in a logger session.</span></span> <span data-ttu-id="6aded-127">如需詳細資訊，請參閱</span><span class="sxs-lookup"><span data-stu-id="6aded-127">For more information, see:</span></span>

-   [<span data-ttu-id="6aded-128">**TdhAggregatePayloadFilters**</span><span class="sxs-lookup"><span data-stu-id="6aded-128">**TdhAggregatePayloadFilters**</span></span>](/windows/desktop/api/Tdh/nf-tdh-tdhaggregatepayloadfilters)
-   [<span data-ttu-id="6aded-129">**TdhCleanupPayloadEventFilterDescriptor**</span><span class="sxs-lookup"><span data-stu-id="6aded-129">**TdhCleanupPayloadEventFilterDescriptor**</span></span>](/windows/desktop/api/Tdh/nf-tdh-tdhcleanuppayloadeventfilterdescriptor)
-   [<span data-ttu-id="6aded-130">**TdhCreatePayloadFilter**</span><span class="sxs-lookup"><span data-stu-id="6aded-130">**TdhCreatePayloadFilter**</span></span>](/windows/desktop/api/Tdh/nf-tdh-tdhcreatepayloadfilter)
-   [<span data-ttu-id="6aded-131">**TdhDeletePayloadFilter**</span><span class="sxs-lookup"><span data-stu-id="6aded-131">**TdhDeletePayloadFilter**</span></span>](/windows/desktop/api/Tdh/nf-tdh-tdhdeletepayloadfilter)

<span data-ttu-id="6aded-132">此外，請參閱 [**EnableTraceEx2**](/windows/win32/api/evntrace/nf-evntrace-enabletraceex2) 函數的詳盡修訂檔，以及這些功能所使用的 [ [**啟用 \_ 追蹤 \_ 參數**](/windows/win32/api/evntrace/ns-evntrace-enable_trace_parameters) ] 和 [ [**事件 \_ 篩選器 \_ 描述**](/windows/desktop/api/Evntprov/ns-evntprov-event_filter_descriptor) 元結構]。</span><span class="sxs-lookup"><span data-stu-id="6aded-132">In addition, see the extensively revised documentation for the [**EnableTraceEx2**](/windows/win32/api/evntrace/nf-evntrace-enabletraceex2) function and the [**ENABLE\_TRACE\_PARAMETERS**](/windows/win32/api/evntrace/ns-evntrace-enable_trace_parameters) and [**EVENT\_FILTER\_DESCRIPTOR**](/windows/desktop/api/Evntprov/ns-evntprov-event_filter_descriptor) structures that are used by these features.</span></span>

<span data-ttu-id="6aded-133">定義事件裝載篩選述詞的結構，描述如何篩選新 [**TdhCreatePayloadFilter**](/windows/desktop/api/Tdh/nf-tdh-tdhcreatepayloadfilter) 函式所使用之追蹤會話中的單一欄位，以及事件識別碼和堆疊逐步篩選所使用的新結構。</span><span class="sxs-lookup"><span data-stu-id="6aded-133">A structure that defines an event payload filter predicate that describes how to filter on a single field in a trace session used by the new [**TdhCreatePayloadFilter**](/windows/desktop/api/Tdh/nf-tdh-tdhcreatepayloadfilter) function and a new structure used by event ID and stack walk filters.</span></span> <span data-ttu-id="6aded-134">如需詳細資訊，請參閱</span><span class="sxs-lookup"><span data-stu-id="6aded-134">For more information, see:</span></span>

-   [<span data-ttu-id="6aded-135">**事件 \_ 篩選器 \_ 事件 \_ 識別碼**</span><span class="sxs-lookup"><span data-stu-id="6aded-135">**EVENT\_FILTER\_EVENT\_ID**</span></span>](/windows/desktop/api/Evntprov/ns-evntprov-event_filter_event_id)
-   [<span data-ttu-id="6aded-136">**裝載 \_ 篩選述詞 \_**</span><span class="sxs-lookup"><span data-stu-id="6aded-136">**PAYLOAD\_FILTER\_PREDICATE**</span></span>](/windows/desktop/api/Tdh/ns-tdh-payload_filter_predicate)

<span data-ttu-id="6aded-137">取得提供者資訊清單中的事件資訊的函式。</span><span class="sxs-lookup"><span data-stu-id="6aded-137">Functions that retrieve information on events present in the provider manifest.</span></span> <span data-ttu-id="6aded-138">如需詳細資訊，請參閱</span><span class="sxs-lookup"><span data-stu-id="6aded-138">For more information, see:</span></span>

-   [<span data-ttu-id="6aded-139">**TdhEnumerateManifestProviderEvents**</span><span class="sxs-lookup"><span data-stu-id="6aded-139">**TdhEnumerateManifestProviderEvents**</span></span>](/windows/desktop/api/Tdh/nf-tdh-tdhenumeratemanifestproviderevents)
-   [<span data-ttu-id="6aded-140">**TdhGetManifestEventInformation**</span><span class="sxs-lookup"><span data-stu-id="6aded-140">**TdhGetManifestEventInformation**</span></span>](/windows/desktop/api/Tdh/nf-tdh-tdhgetmanifesteventinformation)

<span data-ttu-id="6aded-141">結構，定義新 [**TdhEnumerateManifestProviderEvents**](/windows/desktop/api/Tdh/nf-tdh-tdhenumeratemanifestproviderevents) 函式所使用之提供者資訊清單中的事件陣列。</span><span class="sxs-lookup"><span data-stu-id="6aded-141">A structure that defines an array of events in a provider manifest used by the new [**TdhEnumerateManifestProviderEvents**](/windows/desktop/api/Tdh/nf-tdh-tdhenumeratemanifestproviderevents) function.</span></span> <span data-ttu-id="6aded-142">如需詳細資訊，請參閱</span><span class="sxs-lookup"><span data-stu-id="6aded-142">For more information, see:</span></span>

-   [<span data-ttu-id="6aded-143">**提供者 \_ 事件 \_ 資訊**</span><span class="sxs-lookup"><span data-stu-id="6aded-143">**PROVIDER\_EVENT\_INFO**</span></span>](/windows/desktop/api/Tdh/ns-tdh-provider_event_info)

## <a name="windows-8-and-windows-server-2012"></a><span data-ttu-id="6aded-144">Windows 8 與 Windows Server 2012</span><span class="sxs-lookup"><span data-stu-id="6aded-144">Windows 8 and Windows Server 2012</span></span>

<span data-ttu-id="6aded-145">下列功能已新增至 Windows 8 和 Windows Server 2012 上的事件追蹤。</span><span class="sxs-lookup"><span data-stu-id="6aded-145">The following features have been added to the Event Tracing on Windows 8 and Windows Server 2012.</span></span>

<span data-ttu-id="6aded-146">在註冊物件上執行作業、提供事件承載剖析、提供追蹤提供者流覽、查詢事件追蹤會話設定，以及處理 relogged 追蹤檔案的函式。</span><span class="sxs-lookup"><span data-stu-id="6aded-146">Functions that performs operations on a registration object, provide event payload parsing, provide trace provider browsing, query event tracing session settings, and process a relogged trace file.</span></span> <span data-ttu-id="6aded-147">如需詳細資訊，請參閱</span><span class="sxs-lookup"><span data-stu-id="6aded-147">For more information, see:</span></span>

-   [<span data-ttu-id="6aded-148">**EventSetInformation**</span><span class="sxs-lookup"><span data-stu-id="6aded-148">**EventSetInformation**</span></span>](/windows/desktop/api/Evntprov/nf-evntprov-eventsetinformation)
-   [<span data-ttu-id="6aded-149">**TdhCloseDecodingHandle**</span><span class="sxs-lookup"><span data-stu-id="6aded-149">**TdhCloseDecodingHandle**</span></span>](/windows/desktop/api/Tdh/nf-tdh-tdhclosedecodinghandle)
-   [<span data-ttu-id="6aded-150">**TdhGetDecodingParameter**</span><span class="sxs-lookup"><span data-stu-id="6aded-150">**TdhGetDecodingParameter**</span></span>](/windows/desktop/api/Tdh/nf-tdh-tdhgetdecodingparameter)
-   [<span data-ttu-id="6aded-151">**TdhGetWppProperty**</span><span class="sxs-lookup"><span data-stu-id="6aded-151">**TdhGetWppProperty**</span></span>](/windows/desktop/api/Tdh/nf-tdh-tdhgetwppproperty)
-   [<span data-ttu-id="6aded-152">**TdhGetWppMessage**</span><span class="sxs-lookup"><span data-stu-id="6aded-152">**TdhGetWppMessage**</span></span>](/windows/desktop/api/Tdh/nf-tdh-tdhgetwppmessage)
-   [<span data-ttu-id="6aded-153">**TdhLoadManifestFromBinary**</span><span class="sxs-lookup"><span data-stu-id="6aded-153">**TdhLoadManifestFromBinary**</span></span>](/windows/desktop/api/Tdh/nf-tdh-tdhloadmanifestfrombinary)
-   [<span data-ttu-id="6aded-154">**TdhOpenDecodingHandle**</span><span class="sxs-lookup"><span data-stu-id="6aded-154">**TdhOpenDecodingHandle**</span></span>](/windows/desktop/api/Tdh/nf-tdh-tdhopendecodinghandle)
-   [<span data-ttu-id="6aded-155">**TdhSetDecodingParameter**</span><span class="sxs-lookup"><span data-stu-id="6aded-155">**TdhSetDecodingParameter**</span></span>](/windows/desktop/api/Tdh/nf-tdh-tdhsetdecodingparameter)
-   [<span data-ttu-id="6aded-156">**TraceQueryInformation**</span><span class="sxs-lookup"><span data-stu-id="6aded-156">**TraceQueryInformation**</span></span>](/windows/win32/api/evntrace/nf-evntrace-tracequeryinformation)

<span data-ttu-id="6aded-157">介面，可提供追蹤程式的 relogger 資訊，以及記錄事件的時間、存取特定事件的資料，以及存取可讓事件追蹤記錄檔 (ETL) 檔的 relogger 功能。</span><span class="sxs-lookup"><span data-stu-id="6aded-157">Interfaces that provide information to the relogger on the tracing process and when events are logged, access to data for a specific event, and access to relogger features that allow the manipulation of Event Trace Log (ETL) files.</span></span> <span data-ttu-id="6aded-158">如需詳細資訊，請參閱</span><span class="sxs-lookup"><span data-stu-id="6aded-158">For more information, see:</span></span>

-   [<span data-ttu-id="6aded-159">**ITraceEvent**</span><span class="sxs-lookup"><span data-stu-id="6aded-159">**ITraceEvent**</span></span>](/windows/desktop/api/Relogger/nn-relogger-itraceevent)
-   [<span data-ttu-id="6aded-160">**ITraceEventCallback**</span><span class="sxs-lookup"><span data-stu-id="6aded-160">**ITraceEventCallback**</span></span>](/windows/desktop/api/Relogger/nn-relogger-itraceeventcallback)
-   [<span data-ttu-id="6aded-161">**ITraceRelogger**</span><span class="sxs-lookup"><span data-stu-id="6aded-161">**ITraceRelogger**</span></span>](/windows/desktop/api/Relogger/nn-relogger-itracerelogger)

<span data-ttu-id="6aded-162">新函數和介面所使用的其他列舉。</span><span class="sxs-lookup"><span data-stu-id="6aded-162">Additional enumerations used by the new functions and interfaces.</span></span> <span data-ttu-id="6aded-163">如需詳細資訊，請參閱</span><span class="sxs-lookup"><span data-stu-id="6aded-163">For more information, see:</span></span>

-   [<span data-ttu-id="6aded-164">**事件 \_ 資訊 \_ 類別**</span><span class="sxs-lookup"><span data-stu-id="6aded-164">**EVENT\_INFO\_CLASS**</span></span>](/windows/desktop/api/Evntprov/ne-evntprov-event_info_class)
-   [<span data-ttu-id="6aded-165">**追蹤 \_ 查詢 \_ 資訊 \_ 類別**</span><span class="sxs-lookup"><span data-stu-id="6aded-165">**TRACE\_QUERY\_INFO\_CLASS**</span></span>](/windows/win32/api/evntrace/ne-evntrace-trace_query_info_class)

## <a name="windows-7-and-windows-server-2008-r2"></a><span data-ttu-id="6aded-166">Windows 7 與 Windows Server 2008 R2</span><span class="sxs-lookup"><span data-stu-id="6aded-166">Windows 7 and Windows Server 2008 R2</span></span>

<span data-ttu-id="6aded-167">此版本已新增下列功能：</span><span class="sxs-lookup"><span data-stu-id="6aded-167">The following features were added in this release:</span></span>

-   <span data-ttu-id="6aded-168">提供者在資訊清單中定義篩選的能力。</span><span class="sxs-lookup"><span data-stu-id="6aded-168">The ability for providers to define filters in the manifest.</span></span> <span data-ttu-id="6aded-169">在 Windows Vista 中，控制器可以將篩選資料傳遞給提供者。</span><span class="sxs-lookup"><span data-stu-id="6aded-169">In Windows Vista, controllers could pass filter data to the provider.</span></span> <span data-ttu-id="6aded-170">但是，資訊清單中未定義篩選資料的配置，因此提供者必須使用其他方法將篩選定義提供給控制器。</span><span class="sxs-lookup"><span data-stu-id="6aded-170">However, the layout of the filter data was not defined in the manifest, so the provider would have to use other means to provide the filter definition to controllers.</span></span> <span data-ttu-id="6aded-171">在此版本中，提供者可以在資訊清單中定義篩選定義， (查看 [**ProviderType**](../wes/eventmanifestschema-providertype-complextype.md)複雜類型) 的 [**篩選**] 屬性。</span><span class="sxs-lookup"><span data-stu-id="6aded-171">With this release, providers can define the filter definition in the manifest (see the **filters** attribute of the [**ProviderType**](../wes/eventmanifestschema-providertype-complextype.md) complex type).</span></span> <span data-ttu-id="6aded-172">然後，控制器可以使用 [**TdhEnumerateProviderFilters**](/windows/desktop/api/Tdh/nf-tdh-tdhenumerateproviderfilters) 函數來判斷篩選定義。</span><span class="sxs-lookup"><span data-stu-id="6aded-172">Controllers can then use the [**TdhEnumerateProviderFilters**](/windows/desktop/api/Tdh/nf-tdh-tdhenumerateproviderfilters) function to determine the filter definition.</span></span> <span data-ttu-id="6aded-173">使用篩選準則的提供者應該使用 [**EventWriteEx**](/windows/desktop/api/Evntprov/nf-evntprov-eventwriteex) 函式來寫入事件。</span><span class="sxs-lookup"><span data-stu-id="6aded-173">Providers that use filters should use the [**EventWriteEx**](/windows/desktop/api/Evntprov/nf-evntprov-eventwriteex) function to write the event.</span></span>
-   <span data-ttu-id="6aded-174">能夠使用單一緩衝區來收集多個處理器上所產生的事件。</span><span class="sxs-lookup"><span data-stu-id="6aded-174">The ability to use a single buffer to gather events generated on multiple processors.</span></span> <span data-ttu-id="6aded-175">使用單一緩衝區可避免在多處理器電腦上出現順序不會出現的事件。</span><span class="sxs-lookup"><span data-stu-id="6aded-175">Using a single buffer eliminates events from appearing out of order on multi-processors computers.</span></span> <span data-ttu-id="6aded-176">如需詳細資訊，請參閱 [**事件 \_ 追蹤 \_ \_ 每個 \_ 處理器的 \_ 緩衝**](logging-mode-constants.md) 記錄模式。</span><span class="sxs-lookup"><span data-stu-id="6aded-176">For details, see the [**EVENT\_TRACE\_NO\_PER\_PROCESSOR\_BUFFERING**](logging-mode-constants.md) logging mode.</span></span> <span data-ttu-id="6aded-177">根據預設，ETW 會使用每個處理器的緩衝區。</span><span class="sxs-lookup"><span data-stu-id="6aded-177">By default, ETW uses per-processor buffers.</span></span>
-   <span data-ttu-id="6aded-178">捕獲事件堆疊追蹤的能力。</span><span class="sxs-lookup"><span data-stu-id="6aded-178">The ability to capture a stack trace for events.</span></span> <span data-ttu-id="6aded-179">若要啟用核心事件的堆疊追蹤，請參閱 [**TraceSetInformation**](/windows/win32/api/evntrace/nf-evntrace-tracesetinformation) 函數。</span><span class="sxs-lookup"><span data-stu-id="6aded-179">To enable stack tracing for kernel events, see the [**TraceSetInformation**](/windows/win32/api/evntrace/nf-evntrace-tracesetinformation) function.</span></span> <span data-ttu-id="6aded-180">若要啟用使用者事件的堆疊追蹤，請參閱 [**啟用 \_ 追蹤 \_ 參數**](/windows/win32/api/evntrace/ns-evntrace-enable_trace_parameters)之 **EnableProperty** 成員的 **事件 \_ 啟用 \_ 屬性 \_ 堆疊 \_ 追蹤** 旗標。</span><span class="sxs-lookup"><span data-stu-id="6aded-180">To enable stack tracing for user events, see the **EVENT\_ENABLE\_PROPERTY\_STACK\_TRACE** flag for the **EnableProperty** member of [**ENABLE\_TRACE\_PARAMETERS**](/windows/win32/api/evntrace/ns-evntrace-enable_trace_parameters).</span></span>
-   <span data-ttu-id="6aded-181">使用 **事件 \_ 追蹤 \_ 私用 \_ 記錄器 \_ 模式** 記錄模式來指定 **事件 \_ 追蹤 \_ 緩衝 \_ 模式** 或 **事件追蹤檔案模式的 [ \_ \_ \_ \_ NEWFILE** 記錄] 模式 (查看 [記錄模式常數](logging-mode-constants.md)) 。</span><span class="sxs-lookup"><span data-stu-id="6aded-181">The ability to specify the **EVENT\_TRACE\_BUFFERING\_MODE** or **EVENT\_TRACE\_FILE\_MODE\_NEWFILE** logging mode with the **EVENT\_TRACE\_PRIVATE\_LOGGER\_MODE** logging mode (see [Logging Mode Constants](logging-mode-constants.md)).</span></span>
-   <span data-ttu-id="6aded-182">能夠同步啟用提供者。</span><span class="sxs-lookup"><span data-stu-id="6aded-182">The ability to enable a provider synchronously.</span></span> <span data-ttu-id="6aded-183">預設會以非同步方式啟用提供者。</span><span class="sxs-lookup"><span data-stu-id="6aded-183">By default, providers are enabled asynchronously.</span></span> <span data-ttu-id="6aded-184">若要同步啟用提供者，請設定 [**EnableTraceEx2**](/windows/win32/api/evntrace/nf-evntrace-enabletraceex2)的 *Timeout* 參數。</span><span class="sxs-lookup"><span data-stu-id="6aded-184">To enable a provider synchronously, set the *Timeout* parameter of [**EnableTraceEx2**](/windows/win32/api/evntrace/nf-evntrace-enabletraceex2).</span></span>
-   <span data-ttu-id="6aded-185">控制器要求提供者記錄其狀態的能力。</span><span class="sxs-lookup"><span data-stu-id="6aded-185">The ability for the controller to request that the provider log its state.</span></span> <span data-ttu-id="6aded-186">如需詳細資訊，請參閱 [**EnableTraceEx2**](/windows/win32/api/evntrace/nf-evntrace-enabletraceex2)之 *ControlCode* 參數的 **事件 \_ 控制項程式 \_ 代碼 \_ 捕捉 \_ 狀態** 旗標。</span><span class="sxs-lookup"><span data-stu-id="6aded-186">For details, see the **EVENT\_CONTROL\_CODE\_CAPTURE\_STATE** flag for the *ControlCode* parameter of [**EnableTraceEx2**](/windows/win32/api/evntrace/nf-evntrace-enabletraceex2).</span></span>
-   <span data-ttu-id="6aded-187">取用者使用 [**TdhFormatProperty**](/windows/desktop/api/Tdh/nf-tdh-tdhformatproperty) 函數來格式化事件資料的能力。</span><span class="sxs-lookup"><span data-stu-id="6aded-187">The ability for consumers to format event data using the [**TdhFormatProperty**](/windows/desktop/api/Tdh/nf-tdh-tdhformatproperty) function.</span></span>
-   <span data-ttu-id="6aded-188">在不包含提供者的電腦上，將事件資訊清單事件解碼的能力。</span><span class="sxs-lookup"><span data-stu-id="6aded-188">The ability to decode manifested events on computers that do not contain the provider.</span></span> <span data-ttu-id="6aded-189">如需詳細資訊，請參閱 [**TdhLoadManifest**](/windows/desktop/api/Tdh/nf-tdh-tdhloadmanifest) 函數。</span><span class="sxs-lookup"><span data-stu-id="6aded-189">For details, see the [**TdhLoadManifest**](/windows/desktop/api/Tdh/nf-tdh-tdhloadmanifest) function.</span></span>

<span data-ttu-id="6aded-190">此版本已新增下列函式：</span><span class="sxs-lookup"><span data-stu-id="6aded-190">The following functions were added in this release:</span></span>

-   [<span data-ttu-id="6aded-191">**EnableTraceEx2**</span><span class="sxs-lookup"><span data-stu-id="6aded-191">**EnableTraceEx2**</span></span>](/windows/win32/api/evntrace/nf-evntrace-enabletraceex2)
-   [<span data-ttu-id="6aded-192">**EventWriteEx**</span><span class="sxs-lookup"><span data-stu-id="6aded-192">**EventWriteEx**</span></span>](/windows/desktop/api/Evntprov/nf-evntprov-eventwriteex)
-   [<span data-ttu-id="6aded-193">**TdhEnumerateProviderFilters**</span><span class="sxs-lookup"><span data-stu-id="6aded-193">**TdhEnumerateProviderFilters**</span></span>](/windows/desktop/api/Tdh/nf-tdh-tdhenumerateproviderfilters)
-   [<span data-ttu-id="6aded-194">**TdhFormatProperty**</span><span class="sxs-lookup"><span data-stu-id="6aded-194">**TdhFormatProperty**</span></span>](/windows/desktop/api/Tdh/nf-tdh-tdhformatproperty)
-   [<span data-ttu-id="6aded-195">**TdhLoadManifest**</span><span class="sxs-lookup"><span data-stu-id="6aded-195">**TdhLoadManifest**</span></span>](/windows/desktop/api/Tdh/nf-tdh-tdhloadmanifest)
-   [<span data-ttu-id="6aded-196">**TdhUnloadManifest**</span><span class="sxs-lookup"><span data-stu-id="6aded-196">**TdhUnloadManifest**</span></span>](/windows/desktop/api/Tdh/nf-tdh-tdhunloadmanifest)
-   [<span data-ttu-id="6aded-197">**TraceSetInformation**</span><span class="sxs-lookup"><span data-stu-id="6aded-197">**TraceSetInformation**</span></span>](/windows/win32/api/evntrace/nf-evntrace-tracesetinformation)

<span data-ttu-id="6aded-198">此版本已新增下列結構：</span><span class="sxs-lookup"><span data-stu-id="6aded-198">The following structures were added in this release:</span></span>

-   [<span data-ttu-id="6aded-199">**傳統 \_ 事件 \_ 識別碼**</span><span class="sxs-lookup"><span data-stu-id="6aded-199">**CLASSIC\_EVENT\_ID**</span></span>](/windows/win32/api/evntrace/ns-evntrace-classic_event_id)
-   [<span data-ttu-id="6aded-200">**啟用 \_ 追蹤 \_ 參數**</span><span class="sxs-lookup"><span data-stu-id="6aded-200">**ENABLE\_TRACE\_PARAMETERS**</span></span>](/windows/win32/api/evntrace/ns-evntrace-enable_trace_parameters)
-   [<span data-ttu-id="6aded-201">**事件 \_ 擴充 \_ 專案 \_ 堆疊 \_ TRACE32**</span><span class="sxs-lookup"><span data-stu-id="6aded-201">**EVENT\_EXTENDED\_ITEM\_STACK\_TRACE32**</span></span>](/windows/desktop/api/Evntcons/ns-evntcons-event_extended_item_stack_trace32)
-   [<span data-ttu-id="6aded-202">**事件 \_ 擴充 \_ 專案 \_ 堆疊 \_ TRACE64**</span><span class="sxs-lookup"><span data-stu-id="6aded-202">**EVENT\_EXTENDED\_ITEM\_STACK\_TRACE64**</span></span>](/windows/desktop/api/Evntcons/ns-evntcons-event_extended_item_stack_trace64)
-   [<span data-ttu-id="6aded-203">**事件 \_ 篩選 \_ 標頭**</span><span class="sxs-lookup"><span data-stu-id="6aded-203">**EVENT\_FILTER\_HEADER**</span></span>](/windows/desktop/api/Evntprov/ns-evntprov-event_filter_header)
-   [<span data-ttu-id="6aded-204">**提供者 \_ 篩選 \_ 資訊**</span><span class="sxs-lookup"><span data-stu-id="6aded-204">**PROVIDER\_FILTER\_INFO**</span></span>](/windows/desktop/api/Tdh/ns-tdh-provider_filter_info)

<span data-ttu-id="6aded-205">此版本中加入了下列列舉：</span><span class="sxs-lookup"><span data-stu-id="6aded-205">The following enumerations were added in this release:</span></span>

-   [<span data-ttu-id="6aded-206">**追蹤 \_ 資訊 \_ 類別**</span><span class="sxs-lookup"><span data-stu-id="6aded-206">**TRACE\_INFO\_CLASS**</span></span>](/windows/win32/api/evntrace/ne-evntrace-trace_query_info_class)

<span data-ttu-id="6aded-207">此版本中新增了下列 MOF 類別：</span><span class="sxs-lookup"><span data-stu-id="6aded-207">The following MOF classes were added in this release:</span></span>

-   [<span data-ttu-id="6aded-208">**StackWalk**</span><span class="sxs-lookup"><span data-stu-id="6aded-208">**StackWalk**</span></span>](stackwalk.md)
-   [<span data-ttu-id="6aded-209">**StackWalk \_ 事件**</span><span class="sxs-lookup"><span data-stu-id="6aded-209">**StackWalk\_Event**</span></span>](stackwalk-event.md)

 

 
