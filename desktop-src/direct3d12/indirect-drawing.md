---
title: 間接繪圖
description: 間接繪圖可讓您將一些場景遍歷和剔除從 CPU 移至 GPU，進而改善效能。 命令緩衝區可以由 CPU 或 GPU 產生。
ms.assetid: F8D6C88A-101E-4F66-999F-43206F6527B6
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7731a662bc6064e635d68942e6b0b222adf1eda8
ms.sourcegitcommit: 56f8e4d5119e5018363fa2dc3472cdff203c6913
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 11/19/2020
ms.locfileid: "104548361"
---
# <a name="indirect-drawing"></a><span data-ttu-id="3c09a-104">間接繪圖</span><span class="sxs-lookup"><span data-stu-id="3c09a-104">Indirect Drawing</span></span>

<span data-ttu-id="3c09a-105">間接繪圖可讓您將一些場景遍歷和剔除從 CPU 移至 GPU，進而改善效能。</span><span class="sxs-lookup"><span data-stu-id="3c09a-105">Indirect drawing enables some scene-traversal and culling to be moved from the CPU to the GPU, which can improve performance.</span></span> <span data-ttu-id="3c09a-106">命令緩衝區可以由 CPU 或 GPU 產生。</span><span class="sxs-lookup"><span data-stu-id="3c09a-106">The command buffer can be generated by the CPU or GPU.</span></span>

-   [<span data-ttu-id="3c09a-107">命令簽章</span><span class="sxs-lookup"><span data-stu-id="3c09a-107">Command Signatures</span></span>](#command-signatures)
-   [<span data-ttu-id="3c09a-108">間接引數緩衝區結構</span><span class="sxs-lookup"><span data-stu-id="3c09a-108">Indirect Argument Buffer Structures</span></span>](#indirect-argument-buffer-structures)
-   [<span data-ttu-id="3c09a-109">建立命令簽名</span><span class="sxs-lookup"><span data-stu-id="3c09a-109">Command Signature Creation</span></span>](#command-signature-creation)
    -   [<span data-ttu-id="3c09a-110">無引數變更</span><span class="sxs-lookup"><span data-stu-id="3c09a-110">No Argument Changes</span></span>](#no-argument-changes)
    -   [<span data-ttu-id="3c09a-111">根常數和頂點緩衝區</span><span class="sxs-lookup"><span data-stu-id="3c09a-111">Root Constants and Vertex Buffers</span></span>](#root-constants-and-vertex-buffers)
-   [<span data-ttu-id="3c09a-112">相關主題</span><span class="sxs-lookup"><span data-stu-id="3c09a-112">Related topics</span></span>](#related-topics)

## <a name="command-signatures"></a><span data-ttu-id="3c09a-113">命令簽章</span><span class="sxs-lookup"><span data-stu-id="3c09a-113">Command Signatures</span></span>

<span data-ttu-id="3c09a-114">命令簽名物件 ([**ID3D12CommandSignature**](/windows/win32/api/d3d12/nn-d3d12-id3d12commandsignature)) 可讓應用程式指定間接繪圖，特別是設定下列各項：</span><span class="sxs-lookup"><span data-stu-id="3c09a-114">The command signature object ([**ID3D12CommandSignature**](/windows/win32/api/d3d12/nn-d3d12-id3d12commandsignature)) enables apps to specify indirect drawing, in particular setting the following:</span></span>

-   <span data-ttu-id="3c09a-115">間接引數緩衝區格式。</span><span class="sxs-lookup"><span data-stu-id="3c09a-115">The indirect argument buffer format.</span></span>
-   <span data-ttu-id="3c09a-116">將從 [**ID3D12GraphicsCommandList**](/windows/desktop/api/d3d12/nn-d3d12-id3d12graphicscommandlist) 方法 [**DrawInstanced**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-drawinstanced)、 [**DrawIndexedInstanced**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-drawindexedinstanced)或 [**分派**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-dispatch))  (使用的命令類型。</span><span class="sxs-lookup"><span data-stu-id="3c09a-116">The command type that will be used (from the [**ID3D12GraphicsCommandList**](/windows/desktop/api/d3d12/nn-d3d12-id3d12graphicscommandlist) methods [**DrawInstanced**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-drawinstanced), [**DrawIndexedInstanced**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-drawindexedinstanced), or [**Dispatch**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-dispatch)).</span></span>
-   <span data-ttu-id="3c09a-117">這組資源系結會變更每個命令的呼叫，以及將繼承的集合。</span><span class="sxs-lookup"><span data-stu-id="3c09a-117">The set of resource bindings which will change per-command call versus the set which will be inherited.</span></span>

<span data-ttu-id="3c09a-118">在啟動時，應用程式會建立一組小型的 **命令** 簽章。</span><span class="sxs-lookup"><span data-stu-id="3c09a-118">At startup, an app creates a small set of **command signatures**.</span></span> <span data-ttu-id="3c09a-119">應用程式會在執行時間使用命令 (，透過應用程式開發人員選擇) 的任何方式來填滿緩衝區。</span><span class="sxs-lookup"><span data-stu-id="3c09a-119">At runtime, the application fills a buffer with commands (via whatever means the app developer chooses).</span></span> <span data-ttu-id="3c09a-120">命令（選擇性）包含要為頂點緩衝區視圖設定的狀態、索引緩衝區查看、根常數和根描述項， (原始或結構化的 SRV/UAV/CBVs) 。</span><span class="sxs-lookup"><span data-stu-id="3c09a-120">The commands optionally containing state to set for vertex buffer views, index buffer views, root constants and root descriptors (raw or structured SRV/UAV/CBVs).</span></span> <span data-ttu-id="3c09a-121">這些引數配置並非硬體專屬，因此應用程式可以直接產生緩衝區。</span><span class="sxs-lookup"><span data-stu-id="3c09a-121">These argument layouts are not hardware specific so apps can generate the buffers directly.</span></span> <span data-ttu-id="3c09a-122">命令簽章會從命令清單繼承剩餘的狀態。</span><span class="sxs-lookup"><span data-stu-id="3c09a-122">The command signature inherits the remaining state from the command list.</span></span> <span data-ttu-id="3c09a-123">然後，應用程式會呼叫 [**ExecuteIndirect**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-executeindirect) 來指示 GPU 根據特定命令簽章所定義的格式來解讀間接引數緩衝區的內容。</span><span class="sxs-lookup"><span data-stu-id="3c09a-123">Then the app calls [**ExecuteIndirect**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-executeindirect) to instruct the GPU to interpret the contents of the indirect argument buffer according to the format defined by a particular command signature.</span></span>

<span data-ttu-id="3c09a-124">如果命令簽章變更任何根引數，則會以根簽章的子集的形式儲存在命令簽章中。</span><span class="sxs-lookup"><span data-stu-id="3c09a-124">If the command signature changes any root arguments, this is stored within the command signature as a subset of a root signature.</span></span>

<span data-ttu-id="3c09a-125">請注意，當執行完成時，命令簽章狀態不會流失回命令清單。</span><span class="sxs-lookup"><span data-stu-id="3c09a-125">Note that no command signature state leaks back to the command list when the execution is complete.</span></span>

<span data-ttu-id="3c09a-126">例如，假設應用程式開發人員想要在間接引數緩衝區中指定每個繪製呼叫的唯一根常數。</span><span class="sxs-lookup"><span data-stu-id="3c09a-126">For example, suppose an app developer wants a unique root constant to be specified per-draw call in the indirect argument buffer.</span></span> <span data-ttu-id="3c09a-127">應用程式會建立命令簽章，讓間接引數緩衝區指定每個繪製呼叫的下列參數：</span><span class="sxs-lookup"><span data-stu-id="3c09a-127">The app would create a command signature that enables the indirect argument buffer to specify the following parameters per draw call:</span></span>

-   <span data-ttu-id="3c09a-128">一個根常數的值。</span><span class="sxs-lookup"><span data-stu-id="3c09a-128">The value of one root constant.</span></span>
-   <span data-ttu-id="3c09a-129">Draw 引數 (頂點計數、實例計數等) 。</span><span class="sxs-lookup"><span data-stu-id="3c09a-129">The draw arguments (vertex count, instance count, etc).</span></span>

<span data-ttu-id="3c09a-130">應用程式所產生的間接引數緩衝區會包含固定大小記錄的陣列。</span><span class="sxs-lookup"><span data-stu-id="3c09a-130">The indirect argument buffer generated by the application would contain an array of fixed-size records.</span></span> <span data-ttu-id="3c09a-131">每個結構都對應至一個繪製呼叫。</span><span class="sxs-lookup"><span data-stu-id="3c09a-131">Each structure corresponds to one draw call.</span></span> <span data-ttu-id="3c09a-132">每個結構都包含繪圖引數，以及根常數的值。</span><span class="sxs-lookup"><span data-stu-id="3c09a-132">Each structure contains the drawing arguments, and the value of the root constant.</span></span> <span data-ttu-id="3c09a-133">繪製呼叫的數目是在個別 GPU 可見的緩衝區中指定。</span><span class="sxs-lookup"><span data-stu-id="3c09a-133">The number of draw calls is specified in a separate GPU-visible buffer.</span></span>

<span data-ttu-id="3c09a-134">應用程式所產生的命令緩衝區範例如下：</span><span class="sxs-lookup"><span data-stu-id="3c09a-134">An example command buffer generated by the app follows:</span></span>

![命令緩衝區格式](images/indirect-drawing-command-buffer.png)

## <a name="indirect-argument-buffer-structures"></a><span data-ttu-id="3c09a-136">間接引數緩衝區結構</span><span class="sxs-lookup"><span data-stu-id="3c09a-136">Indirect Argument Buffer Structures</span></span>

<span data-ttu-id="3c09a-137">下列結構會定義特定引數在間接引數緩衝區中的顯示方式。</span><span class="sxs-lookup"><span data-stu-id="3c09a-137">The following structures define how particular arguments appear in an indirect argument buffer.</span></span> <span data-ttu-id="3c09a-138">這些結構不會出現在任何 D3D12 API 中。</span><span class="sxs-lookup"><span data-stu-id="3c09a-138">These structures do not appear in any D3D12 API.</span></span> <span data-ttu-id="3c09a-139">應用程式會在寫入具有 CPU 或 GPU) 的間接引數緩衝區 (時，使用這些定義：</span><span class="sxs-lookup"><span data-stu-id="3c09a-139">Applications use these definitions when writing to an indirect argument buffer (with the CPU or GPU):</span></span>

-   [<span data-ttu-id="3c09a-140">**D3D12 \_ DRAW \_ 引數**</span><span class="sxs-lookup"><span data-stu-id="3c09a-140">**D3D12\_DRAW\_ARGUMENTS**</span></span>](/windows/desktop/api/d3d12/ns-d3d12-d3d12_draw_arguments)
-   [<span data-ttu-id="3c09a-141">**D3D12 \_ 繪製 \_ 索引 \_ 引數**</span><span class="sxs-lookup"><span data-stu-id="3c09a-141">**D3D12\_DRAW\_INDEXED\_ARGUMENTS**</span></span>](/windows/desktop/api/d3d12/ns-d3d12-d3d12_draw_indexed_arguments)
-   [<span data-ttu-id="3c09a-142">**D3D12 \_ 分派 \_ 引數**</span><span class="sxs-lookup"><span data-stu-id="3c09a-142">**D3D12\_DISPATCH\_ARGUMENTS**</span></span>](/windows/desktop/api/d3d12/ns-d3d12-d3d12_dispatch_arguments)
-   [<span data-ttu-id="3c09a-143">**D3D12 \_ 頂點 \_ 緩衝區 \_ 查看**</span><span class="sxs-lookup"><span data-stu-id="3c09a-143">**D3D12\_VERTEX\_BUFFER\_VIEW**</span></span>](/windows/desktop/api/d3d12/ns-d3d12-d3d12_vertex_buffer_view)
-   [<span data-ttu-id="3c09a-144">**D3D12 \_ 索引 \_ 緩衝區 \_ 查看**</span><span class="sxs-lookup"><span data-stu-id="3c09a-144">**D3D12\_INDEX\_BUFFER\_VIEW**</span></span>](/windows/desktop/api/d3d12/ns-d3d12-d3d12_index_buffer_view)
-   <span data-ttu-id="3c09a-145">D3D12 \_ GPU \_ 虛擬 \_ 位址 (typedef) 的同義字。</span><span class="sxs-lookup"><span data-stu-id="3c09a-145">D3D12\_GPU\_VIRTUAL\_ADDRESS (a typedef'd synonym of UINT64).</span></span>
-   [<span data-ttu-id="3c09a-146">**D3D12 \_ 常數 \_ 緩衝區 \_ 查看**</span><span class="sxs-lookup"><span data-stu-id="3c09a-146">**D3D12\_CONSTANT\_BUFFER\_VIEW**</span></span>](/windows/desktop/api/d3d12/ns-d3d12-d3d12_constant_buffer_view_desc)

## <a name="command-signature-creation"></a><span data-ttu-id="3c09a-147">建立命令簽名</span><span class="sxs-lookup"><span data-stu-id="3c09a-147">Command Signature Creation</span></span>

<span data-ttu-id="3c09a-148">若要建立命令簽名，請使用下列 API 專案：</span><span class="sxs-lookup"><span data-stu-id="3c09a-148">To create a command signature, use the following API items:</span></span>

-   <span data-ttu-id="3c09a-149">[**ID3D12Device：： CreateCommandSignature**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-createcommandsignature) (輸出 [**ID3D12CommandSignature**](/windows/win32/api/d3d12/nn-d3d12-id3d12commandsignature)) </span><span class="sxs-lookup"><span data-stu-id="3c09a-149">[**ID3D12Device::CreateCommandSignature**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-createcommandsignature) (outputs an [**ID3D12CommandSignature**](/windows/win32/api/d3d12/nn-d3d12-id3d12commandsignature))</span></span>
-   [<span data-ttu-id="3c09a-150">**D3D12 \_ 間接 \_ 引數 \_ 類型**</span><span class="sxs-lookup"><span data-stu-id="3c09a-150">**D3D12\_INDIRECT\_ARGUMENT\_TYPE**</span></span>](/windows/desktop/api/d3d12/ne-d3d12-d3d12_indirect_argument_type)
-   [<span data-ttu-id="3c09a-151">**D3D12 \_ 間接 \_ 引數 \_ DESC**</span><span class="sxs-lookup"><span data-stu-id="3c09a-151">**D3D12\_INDIRECT\_ARGUMENT\_DESC**</span></span>](/windows/desktop/api/d3d12/ns-d3d12-d3d12_indirect_argument_desc)
-   [<span data-ttu-id="3c09a-152">**D3D12 \_ 命令 \_ 簽名 \_ DESC**</span><span class="sxs-lookup"><span data-stu-id="3c09a-152">**D3D12\_COMMAND\_SIGNATURE\_DESC**</span></span>](/windows/desktop/api/d3d12/ns-d3d12-d3d12_command_signature_desc)

<span data-ttu-id="3c09a-153">間接引數緩衝區內引數的順序定義為完全符合 [**D3D12 \_ 命令 \_ 簽名 \_ DESC**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_command_signature_desc)的 *pArguments* 參數中指定的引數順序。</span><span class="sxs-lookup"><span data-stu-id="3c09a-153">The ordering of arguments within an indirect argument buffer is defined to exactly match the order of arguments specified in the *pArguments* parameter of [**D3D12\_COMMAND\_SIGNATURE\_DESC**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_command_signature_desc).</span></span> <span data-ttu-id="3c09a-154">在間接引數緩衝區內，一個繪製 (圖形) /dispatch (計算) 呼叫的所有引數都會緊密地封裝。</span><span class="sxs-lookup"><span data-stu-id="3c09a-154">All of the arguments for one draw (graphics)/dispatch (compute) call within an indirect argument buffer are tightly packed.</span></span> <span data-ttu-id="3c09a-155">但是，應用程式可以指定間接引數緩衝區中繪製/分派命令之間的任意位元組跨距。</span><span class="sxs-lookup"><span data-stu-id="3c09a-155">However, applications are allowed to specify an arbitrary byte stride between draw/dispatch commands in an indirect argument buffer.</span></span>

<span data-ttu-id="3c09a-156">只有當命令簽名變更其中一個根引數時，才必須指定根簽章。</span><span class="sxs-lookup"><span data-stu-id="3c09a-156">The root signature must be specified if and only if the command signature changes one of the root arguments.</span></span>

<span data-ttu-id="3c09a-157">對於根目錄 SRV/UAV/CBV，應用程式指定的大小是以位元組為單位。</span><span class="sxs-lookup"><span data-stu-id="3c09a-157">For root SRV/UAV/CBV, the application specified size is in bytes.</span></span> <span data-ttu-id="3c09a-158">Debug 層會驗證位址的下列限制：</span><span class="sxs-lookup"><span data-stu-id="3c09a-158">The debug layer will validate the following restrictions on the address:</span></span>

-   <span data-ttu-id="3c09a-159">CBV – address 必須是256個位元組的倍數。</span><span class="sxs-lookup"><span data-stu-id="3c09a-159">CBV – address must be a multiple of 256 bytes.</span></span>
-   <span data-ttu-id="3c09a-160">原始 SRV/UAV – address 必須是4個位元組的倍數。</span><span class="sxs-lookup"><span data-stu-id="3c09a-160">Raw SRV/UAV – address must be a multiple of 4 bytes.</span></span>
-   <span data-ttu-id="3c09a-161">結構化 SRV/UAV – address 必須是在著色器) 中宣告 (結構位元組跨距的倍數。</span><span class="sxs-lookup"><span data-stu-id="3c09a-161">Structured SRV/UAV – address must be a multiple of the structure byte stride (declared in the shader).</span></span>

<span data-ttu-id="3c09a-162">給定的命令簽章可以是 draw 或 compute 命令簽章。</span><span class="sxs-lookup"><span data-stu-id="3c09a-162">A given command signature is either a draw or a compute command signature.</span></span> <span data-ttu-id="3c09a-163">如果命令簽章包含繪圖作業，則它是圖形命令簽章。</span><span class="sxs-lookup"><span data-stu-id="3c09a-163">If a command signature contains a drawing operation, then it is a graphics command signature.</span></span> <span data-ttu-id="3c09a-164">否則，命令簽章必須包含分派作業，而且它是計算命令簽章。</span><span class="sxs-lookup"><span data-stu-id="3c09a-164">Otherwise, the command signature must contain a dispatch operation, and it is a compute command signature.</span></span>

<span data-ttu-id="3c09a-165">下列各節顯示一些範例命令簽章。</span><span class="sxs-lookup"><span data-stu-id="3c09a-165">The following sections show some example command signatures.</span></span>

### <a name="no-argument-changes"></a><span data-ttu-id="3c09a-166">無引數變更</span><span class="sxs-lookup"><span data-stu-id="3c09a-166">No Argument Changes</span></span>

<span data-ttu-id="3c09a-167">在此範例中，應用程式所產生的間接引數緩衝區會保存36位元組結構的陣列。</span><span class="sxs-lookup"><span data-stu-id="3c09a-167">In this example, the indirect argument buffer generated by the application holds an array of 36-byte structures.</span></span> <span data-ttu-id="3c09a-168">每個結構只包含傳遞給 [**DrawIndexedInstanced**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-drawindexedinstanced) (加上填補) 的五個參數。</span><span class="sxs-lookup"><span data-stu-id="3c09a-168">Each structure only contains the five parameters passed to [**DrawIndexedInstanced**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-drawindexedinstanced) (plus padding).</span></span>

<span data-ttu-id="3c09a-169">建立命令簽名描述的程式碼如下：</span><span class="sxs-lookup"><span data-stu-id="3c09a-169">The code to create the command signature description follows:</span></span>

``` syntax
D3D12_INDIRECT_ARGUMENT_DESC Args[1];
Args[0].Type = D3D12_INDIRECT_ARGUMENT_TYPE_DRAW_INDEXED;

D3D12_COMMAND_SIGNATURE_DESC ProgramDesc;
ProgramDesc.ByteStride = 36;
ProgramDesc.NumArgumentDescs = 1;
ProgramDesc.pArguments = Args;
```

<span data-ttu-id="3c09a-170">間接引數緩衝區內單一結構的版面配置如下：</span><span class="sxs-lookup"><span data-stu-id="3c09a-170">The layout of a single structure within an indirect argument buffer is:</span></span>



| <span data-ttu-id="3c09a-171">位元組</span><span class="sxs-lookup"><span data-stu-id="3c09a-171">Bytes</span></span> | <span data-ttu-id="3c09a-172">Description</span><span class="sxs-lookup"><span data-stu-id="3c09a-172">Description</span></span>           |
|-------|-----------------------|
| <span data-ttu-id="3c09a-173">0:3</span><span class="sxs-lookup"><span data-stu-id="3c09a-173">0:3</span></span>   | <span data-ttu-id="3c09a-174">IndexCountPerInstance</span><span class="sxs-lookup"><span data-stu-id="3c09a-174">IndexCountPerInstance</span></span> |
| <span data-ttu-id="3c09a-175">4:7</span><span class="sxs-lookup"><span data-stu-id="3c09a-175">4:7</span></span>   | <span data-ttu-id="3c09a-176">InstanceCount</span><span class="sxs-lookup"><span data-stu-id="3c09a-176">InstanceCount</span></span>         |
| <span data-ttu-id="3c09a-177">8:11</span><span class="sxs-lookup"><span data-stu-id="3c09a-177">8:11</span></span>  | <span data-ttu-id="3c09a-178">StartIndexLocation</span><span class="sxs-lookup"><span data-stu-id="3c09a-178">StartIndexLocation</span></span>    |
| <span data-ttu-id="3c09a-179">12:15</span><span class="sxs-lookup"><span data-stu-id="3c09a-179">12:15</span></span> | <span data-ttu-id="3c09a-180">BaseVertexLocation</span><span class="sxs-lookup"><span data-stu-id="3c09a-180">BaseVertexLocation</span></span>    |
| <span data-ttu-id="3c09a-181">16:19</span><span class="sxs-lookup"><span data-stu-id="3c09a-181">16:19</span></span> | <span data-ttu-id="3c09a-182">StartInstanceLocation</span><span class="sxs-lookup"><span data-stu-id="3c09a-182">StartInstanceLocation</span></span> |
| <span data-ttu-id="3c09a-183">20:35</span><span class="sxs-lookup"><span data-stu-id="3c09a-183">20:35</span></span> | <span data-ttu-id="3c09a-184">填補</span><span class="sxs-lookup"><span data-stu-id="3c09a-184">Padding</span></span>               |



 

### <a name="root-constants-and-vertex-buffers"></a><span data-ttu-id="3c09a-185">根常數和頂點緩衝區</span><span class="sxs-lookup"><span data-stu-id="3c09a-185">Root Constants and Vertex Buffers</span></span>

<span data-ttu-id="3c09a-186">在此範例中，間接引數緩衝區中的每個結構都會變更兩個根常數、變更一個頂點緩衝區系結，以及執行一個繪圖非索引作業。</span><span class="sxs-lookup"><span data-stu-id="3c09a-186">In this example, each structure in an indirect argument buffer changes two root constants, changes one vertex buffer binding, and performs one drawing non-indexed operation.</span></span> <span data-ttu-id="3c09a-187">結構之間沒有任何填補。</span><span class="sxs-lookup"><span data-stu-id="3c09a-187">There is no padding between structures.</span></span>

<span data-ttu-id="3c09a-188">建立命令簽名描述的程式碼為：</span><span class="sxs-lookup"><span data-stu-id="3c09a-188">The code to create the command signature description is:</span></span>

``` syntax
D3D12_INDIRECT_ARGUMENT_DESC Args[4];
Args[0].Type = D3D12_INDIRECT_ARGUMENT_TYPE_CONSTANT;
Args[0].Constant.RootParameterIndex = 2;

Args[1].Type = D3D12_INDIRECT_ARGUMENT_TYPE_CONSTANT;
Args[1].Constant.RootParameterIndex = 6;

Args[2].Type = D3D12_INDIRECT_ARGUMENT_TYPE_VERTEX_BUFFER_VIEW;
Args[2].VertexBuffer.VBSlot = 3;

Args[3].Type = D3D12_INDIRECT_ARGUMENT_TYPE_DRAW_INSTANCED;

D3D12_COMMAND_SIGNATURE_DESC ProgramDesc;
ProgramDesc.ByteStride = 40;
ProgramDesc.NumArgumentDescs = 4;
ProgramDesc.pArguments = Args;
```

<span data-ttu-id="3c09a-189">間接引數緩衝區內的單一結構版面配置如下所示：</span><span class="sxs-lookup"><span data-stu-id="3c09a-189">The layout of a single structure within the indirect argument buffer is the following:</span></span>



| <span data-ttu-id="3c09a-190">位元組</span><span class="sxs-lookup"><span data-stu-id="3c09a-190">Bytes</span></span> | <span data-ttu-id="3c09a-191">Description</span><span class="sxs-lookup"><span data-stu-id="3c09a-191">Description</span></span>                     |
|-------|---------------------------------|
| <span data-ttu-id="3c09a-192">0:3</span><span class="sxs-lookup"><span data-stu-id="3c09a-192">0:3</span></span>   | <span data-ttu-id="3c09a-193">根參數索引2的資料</span><span class="sxs-lookup"><span data-stu-id="3c09a-193">Data for root parameter index 2</span></span> |
| <span data-ttu-id="3c09a-194">4:7</span><span class="sxs-lookup"><span data-stu-id="3c09a-194">4:7</span></span>   | <span data-ttu-id="3c09a-195">根參數索引6的資料</span><span class="sxs-lookup"><span data-stu-id="3c09a-195">Data for root parameter index 6</span></span> |
| <span data-ttu-id="3c09a-196">8:15</span><span class="sxs-lookup"><span data-stu-id="3c09a-196">8:15</span></span>  | <span data-ttu-id="3c09a-197">VB 的虛擬位址 (64 位) </span><span class="sxs-lookup"><span data-stu-id="3c09a-197">Virtual address of VB (64-bit)</span></span>  |
| <span data-ttu-id="3c09a-198">16:19</span><span class="sxs-lookup"><span data-stu-id="3c09a-198">16:19</span></span> | <span data-ttu-id="3c09a-199">VB 大小</span><span class="sxs-lookup"><span data-stu-id="3c09a-199">VB size</span></span>                         |
| <span data-ttu-id="3c09a-200">20:23</span><span class="sxs-lookup"><span data-stu-id="3c09a-200">20:23</span></span> | <span data-ttu-id="3c09a-201">VB stride</span><span class="sxs-lookup"><span data-stu-id="3c09a-201">VB stride</span></span>                       |
| <span data-ttu-id="3c09a-202">24:27</span><span class="sxs-lookup"><span data-stu-id="3c09a-202">24:27</span></span> | <span data-ttu-id="3c09a-203">VertexCountPerInstance</span><span class="sxs-lookup"><span data-stu-id="3c09a-203">VertexCountPerInstance</span></span>          |
| <span data-ttu-id="3c09a-204">28:31</span><span class="sxs-lookup"><span data-stu-id="3c09a-204">28:31</span></span> | <span data-ttu-id="3c09a-205">InstanceCount</span><span class="sxs-lookup"><span data-stu-id="3c09a-205">InstanceCount</span></span>                   |
| <span data-ttu-id="3c09a-206">32:35</span><span class="sxs-lookup"><span data-stu-id="3c09a-206">32:35</span></span> | <span data-ttu-id="3c09a-207">StartVertexLocation</span><span class="sxs-lookup"><span data-stu-id="3c09a-207">StartVertexLocation</span></span>             |
| <span data-ttu-id="3c09a-208">36:39</span><span class="sxs-lookup"><span data-stu-id="3c09a-208">36:39</span></span> | <span data-ttu-id="3c09a-209">StartInstanceLocation</span><span class="sxs-lookup"><span data-stu-id="3c09a-209">StartInstanceLocation</span></span>           |



 

## <a name="related-topics"></a><span data-ttu-id="3c09a-210">相關主題</span><span class="sxs-lookup"><span data-stu-id="3c09a-210">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="3c09a-211">DirectX advanced learning 影片教學課程：執行間接和非同步 GPU 剔除</span><span class="sxs-lookup"><span data-stu-id="3c09a-211">DirectX advanced learning video tutorials : Execute Indirect and Async GPU culling</span></span>](https://www.youtube.com/watch?v=fKD-VKJeeds)
</dt> <dt>

[<span data-ttu-id="3c09a-212">間接繪圖和 GPU 剔除：程式碼逐步解說</span><span class="sxs-lookup"><span data-stu-id="3c09a-212">Indirect drawing and GPU culling : code walk-through</span></span>](indirect-drawing-and-gpu-culling-.md)
</dt> <dt>

[<span data-ttu-id="3c09a-213">轉譯</span><span class="sxs-lookup"><span data-stu-id="3c09a-213">Rendering</span></span>](rendering.md)
</dt> </dl>

 

 