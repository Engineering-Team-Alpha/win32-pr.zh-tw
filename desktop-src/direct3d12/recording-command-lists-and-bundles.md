---
title: 建立和記錄命令清單和組合
description: 本主題說明如何在 Direct3D 12 應用程式中錄製命令清單和組合。 命令清單和套件組合都可讓應用程式記錄繪圖或狀態變更呼叫，以供稍後在圖形處理單元上執行 (GPU) 。
ms.assetid: 0074B796-33A4-4AA1-A4E7-48A2A63F25B7
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d5ef2b54138cf3a08b85e3e8cc31f97cbe66abf6
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/20/2020
ms.locfileid: "104548427"
---
# <a name="creating-and-recording-command-lists-and-bundles"></a><span data-ttu-id="85203-104">建立和記錄命令清單和組合</span><span class="sxs-lookup"><span data-stu-id="85203-104">Creating and recording command lists and bundles</span></span>

<span data-ttu-id="85203-105">本主題說明如何在 Direct3D 12 應用程式中錄製命令清單和組合。</span><span class="sxs-lookup"><span data-stu-id="85203-105">This topic describes recording command lists and bundles in Direct3D 12 apps.</span></span> <span data-ttu-id="85203-106">命令清單和套件組合都可讓應用程式記錄繪圖或狀態變更呼叫，以供稍後在圖形處理單元上執行 (GPU) 。</span><span class="sxs-lookup"><span data-stu-id="85203-106">Command lists and bundles both allow apps to record drawing or state-changing calls for later execution on the graphics processing unit (GPU).</span></span>

<span data-ttu-id="85203-107">除了命令清單之外，GPU 硬體中的 API 惡意探索功能會藉由新增第二個層級的命令清單（稱為 *配套）來提供。*</span><span class="sxs-lookup"><span data-stu-id="85203-107">Beyond command lists, the API exploits functionality present in GPU hardware by adding a second level of command lists, which are referred to as *bundles*.</span></span> <span data-ttu-id="85203-108">套件組合的目的是要讓應用程式將少量的 API 命令群組在一起，以供稍後執行。</span><span class="sxs-lookup"><span data-stu-id="85203-108">The purpose of bundles is to allow apps to group a small number of API commands together for later execution.</span></span> <span data-ttu-id="85203-109">在建立套件組合時，驅動程式將會盡可能地執行最多預先處理，以使這些成本在稍後執行。</span><span class="sxs-lookup"><span data-stu-id="85203-109">At bundle creation time, the driver will perform as much pre-processing as is possible to make these cheap to execute later.</span></span> <span data-ttu-id="85203-110">組合是設計來使用並重複使用任何次數。</span><span class="sxs-lookup"><span data-stu-id="85203-110">Bundles are designed to be used and re-used any number of times.</span></span> <span data-ttu-id="85203-111">另一方面，命令清單通常只會執行一次。</span><span class="sxs-lookup"><span data-stu-id="85203-111">Command lists, on the other hand, are typically executed only a single time.</span></span> <span data-ttu-id="85203-112">不過，只要應用程式先確認先前的執行已完成，然後再) 提交新的執行，命令清單 *就可以* (執行多次。</span><span class="sxs-lookup"><span data-stu-id="85203-112">However, a command list *can* be executed multiple times (as long as the application ensures that the previous executions have completed before submitting new executions).</span></span>

<span data-ttu-id="85203-113">一般情況下，下圖顯示在套件組合中進行 API 呼叫，以及將 API 呼叫和套件組合到單一畫面格的組建，如下圖所示，在 **命令清單 1** 和 **命令清單 2** 中，請注意組合 **1** 的重複使用，而且圖表中的 api 方法名稱就像範例一樣，可以使用許多不同的 api 呼叫。</span><span class="sxs-lookup"><span data-stu-id="85203-113">Typically though, the build up of API calls into bundles, and API calls and bundles into command lists, and command lists into a single frame, is shown in the following diagram, noting the reuse of **Bundle 1** in **Command list 1** and **Command list 2**, and that the API method names in the diagram are just as examples, many different API calls can be used.</span></span>

![在框架中建立命令、組合和命令清單](images/gpu-workitems.png)

<span data-ttu-id="85203-115">建立和執行組合和直接命令清單有不同的限制，而這些差異會在本主題中注明。</span><span class="sxs-lookup"><span data-stu-id="85203-115">There are different restrictions for creating and executing bundles and direct command lists, and these differences are noted throughout this topic.</span></span>

## <a name="creating-command-lists"></a><span data-ttu-id="85203-116">建立命令清單</span><span class="sxs-lookup"><span data-stu-id="85203-116">Creating command lists</span></span>

<span data-ttu-id="85203-117">直接命令清單和組合是藉由呼叫 [**ID3D12Device：： CreateCommandList**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-createcommandlist) 或 [**ID3D12Device4：： CreateCommandList1**](/windows/win32/api/d3d12/nf-d3d12-id3d12device4-createcommandlist1)所建立。</span><span class="sxs-lookup"><span data-stu-id="85203-117">Direct command lists and bundles are created by calling [**ID3D12Device::CreateCommandList**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-createcommandlist) or [**ID3D12Device4::CreateCommandList1**](/windows/win32/api/d3d12/nf-d3d12-id3d12device4-createcommandlist1).</span></span>

<span data-ttu-id="85203-118">使用 [**ID3D12Device4：： CreateCommandList1**](/windows/win32/api/d3d12/nf-d3d12-id3d12device4-createcommandlist1) 建立已關閉的命令清單，而不是建立新的清單並立即將其關閉。</span><span class="sxs-lookup"><span data-stu-id="85203-118">Use [**ID3D12Device4::CreateCommandList1**](/windows/win32/api/d3d12/nf-d3d12-id3d12device4-createcommandlist1) to create a closed command list, rather than creating a new list and immediately closing it.</span></span> <span data-ttu-id="85203-119">這可避免建立具有配置器和 PSO 的清單，而不是使用它們的效率。</span><span class="sxs-lookup"><span data-stu-id="85203-119">This avoids the inefficiency of creating a list with an allocator and PSO but not using them.</span></span>

<span data-ttu-id="85203-120">[**ID3D12Device：： CreateCommandList**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-createcommandlist) 接受下列參數作為輸入：</span><span class="sxs-lookup"><span data-stu-id="85203-120">[**ID3D12Device::CreateCommandList**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-createcommandlist) takes the following parameters as input:</span></span>

### <a name="d3d12_command_list_type"></a><span data-ttu-id="85203-121">D3D12 \_ 命令 \_ 清單 \_ 類型</span><span class="sxs-lookup"><span data-stu-id="85203-121">D3D12\_COMMAND\_LIST\_TYPE</span></span>

<span data-ttu-id="85203-122">[**D3D12 \_ 命令 \_ 清單 \_ 類型**](/windows/win32/api/d3d12/ne-d3d12-d3d12_command_list_type)列舉指出正在建立的命令清單類型。</span><span class="sxs-lookup"><span data-stu-id="85203-122">The [**D3D12\_COMMAND\_LIST\_TYPE**](/windows/win32/api/d3d12/ne-d3d12-d3d12_command_list_type) enumeration indicates the type of command list that is being created.</span></span> <span data-ttu-id="85203-123">它可以是直接命令清單、配套、計算命令清單或複製命令清單。</span><span class="sxs-lookup"><span data-stu-id="85203-123">It can be a direct command list, a bundle, a compute command list, or a copy command list.</span></span>

### <a name="id3d12commandallocator"></a><span data-ttu-id="85203-124">ID3D12CommandAllocator</span><span class="sxs-lookup"><span data-stu-id="85203-124">ID3D12CommandAllocator</span></span>

<span data-ttu-id="85203-125">命令配置器可讓應用程式管理配置給命令清單的記憶體。</span><span class="sxs-lookup"><span data-stu-id="85203-125">A command allocator allows the app to manage the memory that is allocated for command lists.</span></span> <span data-ttu-id="85203-126">命令配置器會藉由呼叫 [**CreateCommandAllocator**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-createcommandallocator)來建立。</span><span class="sxs-lookup"><span data-stu-id="85203-126">The command allocator is created by calling [**CreateCommandAllocator**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-createcommandallocator).</span></span> <span data-ttu-id="85203-127">建立命令清單時，配置器的命令清單類型（由 [**D3D12 \_ 命令 \_ 清單 \_ 類型**](/windows/win32/api/d3d12/ne-d3d12-d3d12_command_list_type)指定）必須符合所建立的命令清單類型。</span><span class="sxs-lookup"><span data-stu-id="85203-127">When creating a command list, the command list type of the allocator, specified by [**D3D12\_COMMAND\_LIST\_TYPE**](/windows/win32/api/d3d12/ne-d3d12-d3d12_command_list_type), must match the type of command list being created.</span></span> <span data-ttu-id="85203-128">指定的配置器一次只能與一個以上的 *目前記錄* 命令清單相關聯，不過一個命令配置器可以用來建立任意數目的 [**GraphicsCommandList**](/windows/win32/api/d3d12/nn-d3d12-id3d12graphicscommandlist) 物件。</span><span class="sxs-lookup"><span data-stu-id="85203-128">A given allocator can be associated with no more than one *currently recording* command list at a time, though one command allocator can be used to create any number of [**GraphicsCommandList**](/windows/win32/api/d3d12/nn-d3d12-id3d12graphicscommandlist) objects.</span></span>

<span data-ttu-id="85203-129">為了回收命令配置器所配置的記憶體，應用程式會呼叫 [**ID3D12CommandAllocator：： Reset**](/windows/win32/api/d3d12/nf-d3d12-id3d12commandallocator-reset)。</span><span class="sxs-lookup"><span data-stu-id="85203-129">To reclaim the memory allocated by a command allocator, an app calls [**ID3D12CommandAllocator::Reset**](/windows/win32/api/d3d12/nf-d3d12-id3d12commandallocator-reset).</span></span> <span data-ttu-id="85203-130">這可讓配置器針對新的命令重複使用，但不會減少其基礎大小。</span><span class="sxs-lookup"><span data-stu-id="85203-130">This allows the allocator to be reused for new commmands, but won't reduce its underlying size.</span></span> <span data-ttu-id="85203-131">但在這樣做之前，應用程式必須確定 GPU 不再執行與配置器相關聯的任何命令清單;否則，呼叫會失敗。</span><span class="sxs-lookup"><span data-stu-id="85203-131">But before doing so, the app must make sure that the GPU is no longer executing any command lists which are associated with the allocator; otherwise, the call will fail.</span></span> <span data-ttu-id="85203-132">另請注意，此 API 不是無限制執行緒，因此無法同時從多個執行緒呼叫相同的配置器。</span><span class="sxs-lookup"><span data-stu-id="85203-132">Also, note that this API is not free-threaded and therefore can't be called on the same allocator at the same time from multiple threads.</span></span>

### <a name="id3d12pipelinestate"></a><span data-ttu-id="85203-133">ID3D12PipelineState</span><span class="sxs-lookup"><span data-stu-id="85203-133">ID3D12PipelineState</span></span>

<span data-ttu-id="85203-134">命令清單的初始管線狀態。</span><span class="sxs-lookup"><span data-stu-id="85203-134">The initial pipeline state for the command list.</span></span> <span data-ttu-id="85203-135">在 Microsoft Direct3D 12 中，大部分圖形管線狀態都是使用 [**ID3D12PipelineState**](/windows/win32/api/d3d12/nn-d3d12-id3d12pipelinestate) 物件在命令清單中設定。</span><span class="sxs-lookup"><span data-stu-id="85203-135">In Microsoft Direct3D 12, most graphics pipeline state is set within a command list using the [**ID3D12PipelineState**](/windows/win32/api/d3d12/nn-d3d12-id3d12pipelinestate) object.</span></span> <span data-ttu-id="85203-136">應用程式會在應用程式初始化期間建立大量的應用程式，然後藉由使用 [**ID3D12GraphicsCommandList：： SetPipelineState**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-setpipelinestate)變更目前系結的狀態物件來更新狀態。</span><span class="sxs-lookup"><span data-stu-id="85203-136">An app will create a large number of these, typically during app initialization, and then the state is updated by changing the currently bound state object using [**ID3D12GraphicsCommandList::SetPipelineState**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-setpipelinestate).</span></span> <span data-ttu-id="85203-137">如需有關管線狀態物件的詳細資訊，請參閱 [在 Direct3D 12 中管理圖形管線狀態](managing-graphics-pipeline-state-in-direct3d-12.md)。</span><span class="sxs-lookup"><span data-stu-id="85203-137">For more information about pipeline state objects, see [Managing graphics pipeline state in Direct3D 12](managing-graphics-pipeline-state-in-direct3d-12.md).</span></span>

<span data-ttu-id="85203-138">請注意，套件組合不會繼承其父代直接命令清單中先前呼叫所設定的管線狀態。</span><span class="sxs-lookup"><span data-stu-id="85203-138">Note that bundles don't inherit the pipeline state set by previous calls in direct command lists that are their parents.</span></span>

<span data-ttu-id="85203-139">如果此參數為 Null，則會使用預設狀態。</span><span class="sxs-lookup"><span data-stu-id="85203-139">If this parameter is NULL, a default state is used.</span></span>

## <a name="recording-command-lists"></a><span data-ttu-id="85203-140">錄製命令清單</span><span class="sxs-lookup"><span data-stu-id="85203-140">Recording command lists</span></span>

<span data-ttu-id="85203-141">建立之後，命令清單會立即處於錄製狀態。</span><span class="sxs-lookup"><span data-stu-id="85203-141">Immediately after being created, command lists are in the recording state.</span></span> <span data-ttu-id="85203-142">您也可以呼叫 I [**D3D12GraphicsCommandList：： Reset**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-reset)來重複使用現有的命令清單，這也會讓命令清單處於 [錄製中] 狀態。</span><span class="sxs-lookup"><span data-stu-id="85203-142">You can also re-use an existing command list by calling I [**D3D12GraphicsCommandList::Reset**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-reset), which also leaves the command list in the recording state.</span></span> <span data-ttu-id="85203-143">不同于 [**ID3D12CommandAllocator：： Reset**](/windows/win32/api/d3d12/nf-d3d12-id3d12commandallocator-reset)，當命令清單仍在執行時，您可以呼叫 **Reset** 。</span><span class="sxs-lookup"><span data-stu-id="85203-143">Unlike [**ID3D12CommandAllocator::Reset**](/windows/win32/api/d3d12/nf-d3d12-id3d12commandallocator-reset), you can call **Reset** while the command list is still being executed.</span></span> <span data-ttu-id="85203-144">一般模式是提交命令清單，然後立即將其重設為針對另一個命令清單重複使用配置的記憶體。</span><span class="sxs-lookup"><span data-stu-id="85203-144">A typical pattern is to submit a command list and then immediately reset it to reuse the allocated memory for another command list.</span></span> <span data-ttu-id="85203-145">請注意，每個命令配置器只會有一個相關聯的命令清單，且一次只能處於錄製狀態。</span><span class="sxs-lookup"><span data-stu-id="85203-145">Note that only one command list associated with each command allocator may be in a recording state at one time.</span></span>

<span data-ttu-id="85203-146">當命令清單處於錄製狀態之後，您只要呼叫 [**ID3D12GraphicsCommandList**](/windows/win32/api/d3d12/nn-d3d12-id3d12graphicscommandlist) 介面的方法，即可將命令新增至清單。</span><span class="sxs-lookup"><span data-stu-id="85203-146">Once a command list is in the recording state, you simply call methods of the [**ID3D12GraphicsCommandList**](/windows/win32/api/d3d12/nn-d3d12-id3d12graphicscommandlist) interface to add commands to the list.</span></span> <span data-ttu-id="85203-147">其中許多方法都能提供 Microsoft Direct3D 11 開發人員熟悉的常用 Direct3D 功能;其他 Api 是 Direct3D 12 的新 Api。</span><span class="sxs-lookup"><span data-stu-id="85203-147">Many of these methods enable common Direct3D functionality that will be familiar to Microsoft Direct3D 11 developers; other APIs are new for Direct3D 12.</span></span>

<span data-ttu-id="85203-148">將命令加入至命令清單之後，您可以藉由呼叫 [**Close**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-close)，將命令清單從錄製狀態轉換。</span><span class="sxs-lookup"><span data-stu-id="85203-148">After adding commands to the command list, you transition the command list out of the recording state by calling [**Close**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-close).</span></span>

<span data-ttu-id="85203-149">命令配置器可以成長，但不會壓縮和重複使用配置器，因此應考慮將應用程式的效率發揮到最大。</span><span class="sxs-lookup"><span data-stu-id="85203-149">Command allocators can grow but don't shrink - pooling and reusing allocators should be considered to maximise your app's efficiency.</span></span> <span data-ttu-id="85203-150">在重設之前，您可以將多個清單記錄到相同的配置器中，前提是一次只有一個清單會記錄到指定的配置器。</span><span class="sxs-lookup"><span data-stu-id="85203-150">You can record multiple lists to the same allocator before it is reset, provided only one list is recording to a given allocator at one time.</span></span> <span data-ttu-id="85203-151">您可以將每個清單 visualise 為擁有配置器的一部分，以指出將執行的 [**ID3D12CommandQueue：： ExecuteCommandLists**](/windows/win32/api/d3d12/nf-d3d12-id3d12commandqueue-executecommandlists) 。</span><span class="sxs-lookup"><span data-stu-id="85203-151">You can visualise each list as owning a portion of the allocator which indicates what [**ID3D12CommandQueue::ExecuteCommandLists**](/windows/win32/api/d3d12/nf-d3d12-id3d12commandqueue-executecommandlists) will execute.</span></span>

<span data-ttu-id="85203-152">簡單的配置器共用策略應以大約 `numCommandLists * MaxFrameLatency` 配置器為目標。</span><span class="sxs-lookup"><span data-stu-id="85203-152">A simple allocator pooling strategy should aim for approximately `numCommandLists * MaxFrameLatency` allocators.</span></span> <span data-ttu-id="85203-153">例如，如果您記錄6個清單並允許最多3個潛在的框架，您可以合理地預期18-20 配置器。</span><span class="sxs-lookup"><span data-stu-id="85203-153">For example, if you record 6 lists and allow up to 3 latent frames, you could reasonably expect 18-20 allocators.</span></span> <span data-ttu-id="85203-154">更先進的共用策略，這會在相同的執行緒上重複使用多個清單的配置器，可能會以配置器為目標 `numRecordingThreads * MaxFrameLatency` 。</span><span class="sxs-lookup"><span data-stu-id="85203-154">A more advanced pooling strategy, which reuses allocators for multiple lists on the same thread, could aim for `numRecordingThreads * MaxFrameLatency` allocators.</span></span> <span data-ttu-id="85203-155">使用先前的範例，如果2個清單記錄線上程 A 上，2個線上程 B 上，1個線上程 C 上，1線上程 D 上，您實際上可以針對12-14 配置器。</span><span class="sxs-lookup"><span data-stu-id="85203-155">Using the prior example, if 2 lists were recorded on thread A, 2 on thread B, 1 on thread C, and 1 on thread D, you could realistically aim for 12-14 allocators.</span></span>

<span data-ttu-id="85203-156">使用隔離來決定何時可以重複使用指定的配置器。</span><span class="sxs-lookup"><span data-stu-id="85203-156">Use a fence to determine when a given allocator is able to be reused.</span></span>

<span data-ttu-id="85203-157">因為命令清單可以在執行後立即重設，所以可以完整集區，並在每次呼叫 [**ID3D12CommandQueue：： ExecuteCommandLists**](/windows/win32/api/d3d12/nf-d3d12-id3d12commandqueue-executecommandlists)之後，將它們加回集區。</span><span class="sxs-lookup"><span data-stu-id="85203-157">As command lists can immediately be reset after execution, they can be trivially pooled, adding them back to the pool after each call to [**ID3D12CommandQueue::ExecuteCommandLists**](/windows/win32/api/d3d12/nf-d3d12-id3d12commandqueue-executecommandlists).</span></span>

## <a name="example"></a><span data-ttu-id="85203-158">範例</span><span class="sxs-lookup"><span data-stu-id="85203-158">Example</span></span>

<span data-ttu-id="85203-159">下列程式碼片段說明如何建立和錄製命令清單。</span><span class="sxs-lookup"><span data-stu-id="85203-159">The following code snippets illustrate the creation and recording of a command list.</span></span> <span data-ttu-id="85203-160">請注意，此範例包含下列 Direct3D 12 功能：</span><span class="sxs-lookup"><span data-stu-id="85203-160">Note that this example includes the following Direct3D 12 features:</span></span>

-   <span data-ttu-id="85203-161">管線狀態物件-這些物件是用來從命令清單內設定轉譯管線的大部分狀態參數。</span><span class="sxs-lookup"><span data-stu-id="85203-161">Pipeline state objects - These are used to set most of the state parameters of the render pipeline from within a command list.</span></span> <span data-ttu-id="85203-162">如需詳細資訊，請參閱 [管理 Direct3D 12 中的圖形管線狀態](managing-graphics-pipeline-state-in-direct3d-12.md)。</span><span class="sxs-lookup"><span data-stu-id="85203-162">For more information, see [Managing graphics pipeline state in Direct3D 12](managing-graphics-pipeline-state-in-direct3d-12.md).</span></span>
-   <span data-ttu-id="85203-163">描述元堆積-應用程式會使用描述元堆積來管理記憶體資源的管線系結。</span><span class="sxs-lookup"><span data-stu-id="85203-163">Descriptor heap - Apps use descriptor heaps to manage pipeline binding to memory resources.</span></span>
-   <span data-ttu-id="85203-164">資源屏障-這可用來管理從某個狀態到另一個狀態的資源轉換，例如從轉譯目標視圖到著色器資源檢視。</span><span class="sxs-lookup"><span data-stu-id="85203-164">Resource barrier - This is used to manage the transition of resources from one state to another, such as from a render target view to a shader resource view.</span></span> <span data-ttu-id="85203-165">如需詳細資訊，請參閱 [使用資源阻礙來同步處理資源狀態](using-resource-barriers-to-synchronize-resource-states-in-direct3d-12.md)。</span><span class="sxs-lookup"><span data-stu-id="85203-165">For more information, see [Using resource barriers to synchronize resource states](using-resource-barriers-to-synchronize-resource-states-in-direct3d-12.md).</span></span>

<span data-ttu-id="85203-166">例如，</span><span class="sxs-lookup"><span data-stu-id="85203-166">For example,</span></span>


```C++
void D3D12HelloTriangle::LoadAssets()
{
    // Create an empty root signature.
    {
        CD3DX12_ROOT_SIGNATURE_DESC rootSignatureDesc;
        rootSignatureDesc.Init(0, nullptr, 0, nullptr, D3D12_ROOT_SIGNATURE_FLAG_ALLOW_INPUT_ASSEMBLER_INPUT_LAYOUT);

        ComPtr<ID3DBlob> signature;
        ComPtr<ID3DBlob> error;
        ThrowIfFailed(D3D12SerializeRootSignature(&rootSignatureDesc, D3D_ROOT_SIGNATURE_VERSION_1, &signature, &error));
        ThrowIfFailed(m_device->CreateRootSignature(0, signature->GetBufferPointer(), signature->GetBufferSize(), IID_PPV_ARGS(&m_rootSignature)));
    }

    // Create the pipeline state, which includes compiling and loading shaders.
    {
        ComPtr<ID3DBlob> vertexShader;
        ComPtr<ID3DBlob> pixelShader;

#if defined(_DEBUG)
        // Enable better shader debugging with the graphics debugging tools.
        UINT compileFlags = D3DCOMPILE_DEBUG | D3DCOMPILE_SKIP_OPTIMIZATION;
#else
        UINT compileFlags = 0;
#endif

        ThrowIfFailed(D3DCompileFromFile(GetAssetFullPath(L"shaders.hlsl").c_str(), nullptr, nullptr, "VSMain", "vs_5_0", compileFlags, 0, &vertexShader, nullptr));
        ThrowIfFailed(D3DCompileFromFile(GetAssetFullPath(L"shaders.hlsl").c_str(), nullptr, nullptr, "PSMain", "ps_5_0", compileFlags, 0, &pixelShader, nullptr));

        // Define the vertex input layout.
        D3D12_INPUT_ELEMENT_DESC inputElementDescs[] =
        {
            { "POSITION", 0, DXGI_FORMAT_R32G32B32_FLOAT, 0, 0, D3D12_INPUT_CLASSIFICATION_PER_VERTEX_DATA, 0 },
            { "COLOR", 0, DXGI_FORMAT_R32G32B32A32_FLOAT, 0, 12, D3D12_INPUT_CLASSIFICATION_PER_VERTEX_DATA, 0 }
        };

        // Describe and create the graphics pipeline state object (PSO).
        D3D12_GRAPHICS_PIPELINE_STATE_DESC psoDesc = {};
        psoDesc.InputLayout = { inputElementDescs, _countof(inputElementDescs) };
        psoDesc.pRootSignature = m_rootSignature.Get();
        psoDesc.VS = { reinterpret_cast<UINT8*>(vertexShader->GetBufferPointer()), vertexShader->GetBufferSize() };
        psoDesc.PS = { reinterpret_cast<UINT8*>(pixelShader->GetBufferPointer()), pixelShader->GetBufferSize() };
        psoDesc.RasterizerState = CD3DX12_RASTERIZER_DESC(D3D12_DEFAULT);
        psoDesc.BlendState = CD3DX12_BLEND_DESC(D3D12_DEFAULT);
        psoDesc.DepthStencilState.DepthEnable = FALSE;
        psoDesc.DepthStencilState.StencilEnable = FALSE;
        psoDesc.SampleMask = UINT_MAX;
        psoDesc.PrimitiveTopologyType = D3D12_PRIMITIVE_TOPOLOGY_TYPE_TRIANGLE;
        psoDesc.NumRenderTargets = 1;
        psoDesc.RTVFormats[0] = DXGI_FORMAT_R8G8B8A8_UNORM;
        psoDesc.SampleDesc.Count = 1;
        ThrowIfFailed(m_device->CreateGraphicsPipelineState(&psoDesc, IID_PPV_ARGS(&m_pipelineState)));
    }

    // Create the command list.
    ThrowIfFailed(m_device->CreateCommandList(0, D3D12_COMMAND_LIST_TYPE_DIRECT, m_commandAllocator.Get(), m_pipelineState.Get(), IID_PPV_ARGS(&m_commandList)));

    // Command lists are created in the recording state, but there is nothing
    // to record yet. The main loop expects it to be closed, so close it now.
    ThrowIfFailed(m_commandList->Close());

    // Create the vertex buffer.
    {
        // Define the geometry for a triangle.
        Vertex triangleVertices[] =
        {
            { { 0.0f, 0.25f * m_aspectRatio, 0.0f }, { 1.0f, 0.0f, 0.0f, 1.0f } },
            { { 0.25f, -0.25f * m_aspectRatio, 0.0f }, { 0.0f, 1.0f, 0.0f, 1.0f } },
            { { -0.25f, -0.25f * m_aspectRatio, 0.0f }, { 0.0f, 0.0f, 1.0f, 1.0f } }
        };

        const UINT vertexBufferSize = sizeof(triangleVertices);

        // Note: using upload heaps to transfer static data like vert buffers is not 
        // recommended. Every time the GPU needs it, the upload heap will be marshalled 
        // over. Please read up on Default Heap usage. An upload heap is used here for 
        // code simplicity and because there are very few verts to actually transfer.
        ThrowIfFailed(m_device->CreateCommittedResource(
            &CD3DX12_HEAP_PROPERTIES(D3D12_HEAP_TYPE_UPLOAD),
            D3D12_HEAP_FLAG_NONE,
            &CD3DX12_RESOURCE_DESC::Buffer(vertexBufferSize),
            D3D12_RESOURCE_STATE_GENERIC_READ,
            nullptr,
            IID_PPV_ARGS(&m_vertexBuffer)));

        // Copy the triangle data to the vertex buffer.
        UINT8* pVertexDataBegin;
        CD3DX12_RANGE readRange(0, 0);        // We do not intend to read from this resource on the CPU.
        ThrowIfFailed(m_vertexBuffer->Map(0, &readRange, reinterpret_cast<void**>(&pVertexDataBegin)));
        memcpy(pVertexDataBegin, triangleVertices, sizeof(triangleVertices));
        m_vertexBuffer->Unmap(0, nullptr);

        // Initialize the vertex buffer view.
        m_vertexBufferView.BufferLocation = m_vertexBuffer->GetGPUVirtualAddress();
        m_vertexBufferView.StrideInBytes = sizeof(Vertex);
        m_vertexBufferView.SizeInBytes = vertexBufferSize;
    }

    // Create synchronization objects and wait until assets have been uploaded to the GPU.
    {
        ThrowIfFailed(m_device->CreateFence(0, D3D12_FENCE_FLAG_NONE, IID_PPV_ARGS(&m_fence)));
        m_fenceValue = 1;

        // Create an event handle to use for frame synchronization.
        m_fenceEvent = CreateEvent(nullptr, FALSE, FALSE, nullptr);
        if (m_fenceEvent == nullptr)
        {
            ThrowIfFailed(HRESULT_FROM_WIN32(GetLastError()));
        }

        // Wait for the command list to execute; we are reusing the same command 
        // list in our main loop but for now, we just want to wait for setup to 
        // complete before continuing.
        WaitForPreviousFrame();
    }
}
```



<span data-ttu-id="85203-167">建立並記錄命令清單之後，就可以使用命令佇列來執行它。</span><span class="sxs-lookup"><span data-stu-id="85203-167">After a command list has been created and recorded, it can be executed using a command queue.</span></span> <span data-ttu-id="85203-168">如需詳細資訊，請參閱 [執行和同步處理命令清單](executing-and-synchronizing-command-lists.md)。</span><span class="sxs-lookup"><span data-stu-id="85203-168">For more information, see [Executing and synchronizing command lists](executing-and-synchronizing-command-lists.md).</span></span>

## <a name="reference-counting"></a><span data-ttu-id="85203-169">參考計數</span><span class="sxs-lookup"><span data-stu-id="85203-169">Reference counting</span></span>

<span data-ttu-id="85203-170">大部分 D3D12 Api 都會繼續使用參考計數（遵循 COM 慣例）。</span><span class="sxs-lookup"><span data-stu-id="85203-170">Most D3D12 APIs continue to use reference counting following COM conventions.</span></span> <span data-ttu-id="85203-171">有個值得注意的例外狀況是 D3D12 graphics 命令清單 Api。</span><span class="sxs-lookup"><span data-stu-id="85203-171">A notable exception to this is the D3D12 graphics command list APIs.</span></span> <span data-ttu-id="85203-172">[**ID3D12GraphicsCommandList**](/windows/win32/api/d3d12/nn-d3d12-id3d12graphicscommandlist)上的所有 api 都不會保留傳遞至這些 api 之物件的參考。</span><span class="sxs-lookup"><span data-stu-id="85203-172">All APIs on [**ID3D12GraphicsCommandList**](/windows/win32/api/d3d12/nn-d3d12-id3d12graphicscommandlist) do not hold references to the objects passed into those APIs.</span></span> <span data-ttu-id="85203-173">這表示應用程式會負責確保永遠不會提交命令清單來執行參考損毀資源的執行。</span><span class="sxs-lookup"><span data-stu-id="85203-173">This means applications are responsible for ensuring that a command list is never submitted for execution that references a destroyed resource.</span></span>

## <a name="command-list-errors"></a><span data-ttu-id="85203-174">命令清單錯誤</span><span class="sxs-lookup"><span data-stu-id="85203-174">Command list errors</span></span>

<span data-ttu-id="85203-175">[**ID3D12GraphicsCommandList**](/windows/win32/api/d3d12/nn-d3d12-id3d12graphicscommandlist)上大部分的 api 不會傳回錯誤。</span><span class="sxs-lookup"><span data-stu-id="85203-175">Most APIs on [**ID3D12GraphicsCommandList**](/windows/win32/api/d3d12/nn-d3d12-id3d12graphicscommandlist) do not return errors.</span></span> <span data-ttu-id="85203-176">命令清單建立期間發生的錯誤會延後，直到 [**ID3D12GraphicsCommandList：： Close**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-close)。</span><span class="sxs-lookup"><span data-stu-id="85203-176">Errors encountered during command list creation are deferred until [**ID3D12GraphicsCommandList::Close**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-close).</span></span> <span data-ttu-id="85203-177">其中一個例外狀況是 \_ \_ 已移除 DXGI 錯誤裝置 \_ ，並會更進一步地延後。</span><span class="sxs-lookup"><span data-stu-id="85203-177">The one exception is DXGI\_ERROR\_DEVICE\_REMOVED, which is deferred even further.</span></span> <span data-ttu-id="85203-178">請注意，這不同于 D3D11，其中許多參數驗證錯誤會以無訊息方式卸載，而且永遠不會傳回給呼叫端。</span><span class="sxs-lookup"><span data-stu-id="85203-178">Note that this is different from D3D11, where many parameter validation errors are silently dropped and never returned to the caller.</span></span>

<span data-ttu-id="85203-179">應用程式可能預期會 \_ \_ 在下列 API 呼叫中看到 DXGI 裝置已移除錯誤：</span><span class="sxs-lookup"><span data-stu-id="85203-179">Applications can expect to see DXGI\_DEVICE\_REMOVED errors in the following API calls:</span></span>

-   <span data-ttu-id="85203-180">任何資源建立方法</span><span class="sxs-lookup"><span data-stu-id="85203-180">Any resource creation method</span></span>
-   [<span data-ttu-id="85203-181">**ID3D12Resource：： Map**</span><span class="sxs-lookup"><span data-stu-id="85203-181">**ID3D12Resource::Map**</span></span>](/windows/win32/api/d3d12/nf-d3d12-id3d12resource-map)
-   [<span data-ttu-id="85203-182">**IDXGISwapChain1::Present1**</span><span class="sxs-lookup"><span data-stu-id="85203-182">**IDXGISwapChain1::Present1**</span></span>](/windows/win32/api/dxgi1_2/nf-dxgi1_2-idxgiswapchain1-present1)
-   [<span data-ttu-id="85203-183">**GetDeviceRemovedReason**</span><span class="sxs-lookup"><span data-stu-id="85203-183">**GetDeviceRemovedReason**</span></span>](/windows/win32/api/d3d12/nf-d3d12-id3d12device-getdeviceremovedreason)

## <a name="command-list-api-restrictions"></a><span data-ttu-id="85203-184">命令清單 API 限制</span><span class="sxs-lookup"><span data-stu-id="85203-184">Command list API Restrictions</span></span>

<span data-ttu-id="85203-185">某些命令清單 Api 只能針對特定類型的命令清單來呼叫。</span><span class="sxs-lookup"><span data-stu-id="85203-185">Some command list APIs can only be called on certain types of command lists.</span></span> <span data-ttu-id="85203-186">下表顯示哪些命令清單 Api 適用于每種類型的命令清單。</span><span class="sxs-lookup"><span data-stu-id="85203-186">The table below shows which command list APIs are valid to call on each type of command list.</span></span> <span data-ttu-id="85203-187">它也會顯示哪些 Api 在 [**D3D12 轉譯階段**](./direct3d-12-render-passes.md)中為有效的呼叫。</span><span class="sxs-lookup"><span data-stu-id="85203-187">It also shows which APIs are valid to call in a [**D3D12 render pass**](./direct3d-12-render-passes.md).</span></span> 

| <span data-ttu-id="85203-188">API 名稱</span><span class="sxs-lookup"><span data-stu-id="85203-188">API Name</span></span>                                         | <span data-ttu-id="85203-189">圖形</span><span class="sxs-lookup"><span data-stu-id="85203-189">Graphics</span></span> | <span data-ttu-id="85203-190">計算</span><span class="sxs-lookup"><span data-stu-id="85203-190">Compute</span></span> | <span data-ttu-id="85203-191">複製</span><span class="sxs-lookup"><span data-stu-id="85203-191">Copy</span></span> | <span data-ttu-id="85203-192">套件組合</span><span class="sxs-lookup"><span data-stu-id="85203-192">Bundle</span></span> | <span data-ttu-id="85203-193">在轉譯階段中</span><span class="sxs-lookup"><span data-stu-id="85203-193">In Render Pass</span></span> |
|--------------------------------------------------|:--------:|:-------:|:----:|:------:|:--------------:|
| <span data-ttu-id="85203-194">AtomicCopyBufferUINT</span><span class="sxs-lookup"><span data-stu-id="85203-194">AtomicCopyBufferUINT</span></span>                             | <span data-ttu-id="85203-195">✓</span><span class="sxs-lookup"><span data-stu-id="85203-195">✓</span></span>        | <span data-ttu-id="85203-196">✓</span><span class="sxs-lookup"><span data-stu-id="85203-196">✓</span></span>       | <span data-ttu-id="85203-197">✓</span><span class="sxs-lookup"><span data-stu-id="85203-197">✓</span></span>    |        |                |
| <span data-ttu-id="85203-198">AtomicCopyBufferUINT64</span><span class="sxs-lookup"><span data-stu-id="85203-198">AtomicCopyBufferUINT64</span></span>                           | <span data-ttu-id="85203-199">✓</span><span class="sxs-lookup"><span data-stu-id="85203-199">✓</span></span>        | <span data-ttu-id="85203-200">✓</span><span class="sxs-lookup"><span data-stu-id="85203-200">✓</span></span>       | <span data-ttu-id="85203-201">✓</span><span class="sxs-lookup"><span data-stu-id="85203-201">✓</span></span>    |        |                |
| <span data-ttu-id="85203-202">BeginQuery</span><span class="sxs-lookup"><span data-stu-id="85203-202">BeginQuery</span></span>                                       | <span data-ttu-id="85203-203">✓</span><span class="sxs-lookup"><span data-stu-id="85203-203">✓</span></span>        |         |      |        | <span data-ttu-id="85203-204">✓</span><span class="sxs-lookup"><span data-stu-id="85203-204">✓</span></span>              |
| <span data-ttu-id="85203-205">BeginRenderPass</span><span class="sxs-lookup"><span data-stu-id="85203-205">BeginRenderPass</span></span>                                  | <span data-ttu-id="85203-206">✓</span><span class="sxs-lookup"><span data-stu-id="85203-206">✓</span></span>        |         |      |        |                |
| <span data-ttu-id="85203-207">BuildRaytracingAccelerationStructure</span><span class="sxs-lookup"><span data-stu-id="85203-207">BuildRaytracingAccelerationStructure</span></span>             | <span data-ttu-id="85203-208">✓</span><span class="sxs-lookup"><span data-stu-id="85203-208">✓</span></span>        | <span data-ttu-id="85203-209">✓</span><span class="sxs-lookup"><span data-stu-id="85203-209">✓</span></span>       |      |        |                |
| <span data-ttu-id="85203-210">ClearDepthStencilView</span><span class="sxs-lookup"><span data-stu-id="85203-210">ClearDepthStencilView</span></span>                            | <span data-ttu-id="85203-211">✓</span><span class="sxs-lookup"><span data-stu-id="85203-211">✓</span></span>        |         |      |        |                |
| <span data-ttu-id="85203-212">ClearRenderTargetView</span><span class="sxs-lookup"><span data-stu-id="85203-212">ClearRenderTargetView</span></span>                            | <span data-ttu-id="85203-213">✓</span><span class="sxs-lookup"><span data-stu-id="85203-213">✓</span></span>        |         |      |        |                |
| <span data-ttu-id="85203-214">ClearState</span><span class="sxs-lookup"><span data-stu-id="85203-214">ClearState</span></span>                                       | <span data-ttu-id="85203-215">✓</span><span class="sxs-lookup"><span data-stu-id="85203-215">✓</span></span>        | <span data-ttu-id="85203-216">✓</span><span class="sxs-lookup"><span data-stu-id="85203-216">✓</span></span>       |      |        |                |
| <span data-ttu-id="85203-217">ClearUnorderedAccessViewFloat</span><span class="sxs-lookup"><span data-stu-id="85203-217">ClearUnorderedAccessViewFloat</span></span>                    | <span data-ttu-id="85203-218">✓</span><span class="sxs-lookup"><span data-stu-id="85203-218">✓</span></span>        | <span data-ttu-id="85203-219">✓</span><span class="sxs-lookup"><span data-stu-id="85203-219">✓</span></span>       |      |        |                |
| <span data-ttu-id="85203-220">ClearUnorderedAccessViewUint</span><span class="sxs-lookup"><span data-stu-id="85203-220">ClearUnorderedAccessViewUint</span></span>                     | <span data-ttu-id="85203-221">✓</span><span class="sxs-lookup"><span data-stu-id="85203-221">✓</span></span>        | <span data-ttu-id="85203-222">✓</span><span class="sxs-lookup"><span data-stu-id="85203-222">✓</span></span>       |      |        |                |
| <span data-ttu-id="85203-223">CopyBufferRegion</span><span class="sxs-lookup"><span data-stu-id="85203-223">CopyBufferRegion</span></span>                                 | <span data-ttu-id="85203-224">✓</span><span class="sxs-lookup"><span data-stu-id="85203-224">✓</span></span>        | <span data-ttu-id="85203-225">✓</span><span class="sxs-lookup"><span data-stu-id="85203-225">✓</span></span>       | <span data-ttu-id="85203-226">✓</span><span class="sxs-lookup"><span data-stu-id="85203-226">✓</span></span>    |        |                |
| <span data-ttu-id="85203-227">CopyRaytracingAccelerationStructure</span><span class="sxs-lookup"><span data-stu-id="85203-227">CopyRaytracingAccelerationStructure</span></span>              | <span data-ttu-id="85203-228">✓</span><span class="sxs-lookup"><span data-stu-id="85203-228">✓</span></span>        | <span data-ttu-id="85203-229">✓</span><span class="sxs-lookup"><span data-stu-id="85203-229">✓</span></span>       |      |        |                |
| <span data-ttu-id="85203-230">CopyResource</span><span class="sxs-lookup"><span data-stu-id="85203-230">CopyResource</span></span>                                     | <span data-ttu-id="85203-231">✓</span><span class="sxs-lookup"><span data-stu-id="85203-231">✓</span></span>        | <span data-ttu-id="85203-232">✓</span><span class="sxs-lookup"><span data-stu-id="85203-232">✓</span></span>       | <span data-ttu-id="85203-233">✓</span><span class="sxs-lookup"><span data-stu-id="85203-233">✓</span></span>    |        |                |
| <span data-ttu-id="85203-234">CopyTextureRegion</span><span class="sxs-lookup"><span data-stu-id="85203-234">CopyTextureRegion</span></span>                                | <span data-ttu-id="85203-235">✓</span><span class="sxs-lookup"><span data-stu-id="85203-235">✓</span></span>        | <span data-ttu-id="85203-236">✓</span><span class="sxs-lookup"><span data-stu-id="85203-236">✓</span></span>       | <span data-ttu-id="85203-237">✓</span><span class="sxs-lookup"><span data-stu-id="85203-237">✓</span></span>    |        |                |
| <span data-ttu-id="85203-238">CopyTiles</span><span class="sxs-lookup"><span data-stu-id="85203-238">CopyTiles</span></span>                                        | <span data-ttu-id="85203-239">✓</span><span class="sxs-lookup"><span data-stu-id="85203-239">✓</span></span>        | <span data-ttu-id="85203-240">✓</span><span class="sxs-lookup"><span data-stu-id="85203-240">✓</span></span>       | <span data-ttu-id="85203-241">✓</span><span class="sxs-lookup"><span data-stu-id="85203-241">✓</span></span>    |        |                |
| <span data-ttu-id="85203-242">DiscardResource</span><span class="sxs-lookup"><span data-stu-id="85203-242">DiscardResource</span></span>                                  | <span data-ttu-id="85203-243">✓</span><span class="sxs-lookup"><span data-stu-id="85203-243">✓</span></span>        | <span data-ttu-id="85203-244">✓</span><span class="sxs-lookup"><span data-stu-id="85203-244">✓</span></span>       |      |        |                |
| <span data-ttu-id="85203-245">分派</span><span class="sxs-lookup"><span data-stu-id="85203-245">Dispatch</span></span>                                         | <span data-ttu-id="85203-246">✓</span><span class="sxs-lookup"><span data-stu-id="85203-246">✓</span></span>        | <span data-ttu-id="85203-247">✓</span><span class="sxs-lookup"><span data-stu-id="85203-247">✓</span></span>       |      | <span data-ttu-id="85203-248">✓</span><span class="sxs-lookup"><span data-stu-id="85203-248">✓</span></span>      |                |
| <span data-ttu-id="85203-249">DispatchRays</span><span class="sxs-lookup"><span data-stu-id="85203-249">DispatchRays</span></span>                                     | <span data-ttu-id="85203-250">✓</span><span class="sxs-lookup"><span data-stu-id="85203-250">✓</span></span>        | <span data-ttu-id="85203-251">✓</span><span class="sxs-lookup"><span data-stu-id="85203-251">✓</span></span>       |      | <span data-ttu-id="85203-252">✓</span><span class="sxs-lookup"><span data-stu-id="85203-252">✓</span></span>      |                |
| <span data-ttu-id="85203-253">DrawIndexedInstanced</span><span class="sxs-lookup"><span data-stu-id="85203-253">DrawIndexedInstanced</span></span>                             | <span data-ttu-id="85203-254">✓</span><span class="sxs-lookup"><span data-stu-id="85203-254">✓</span></span>        |         |      | <span data-ttu-id="85203-255">✓</span><span class="sxs-lookup"><span data-stu-id="85203-255">✓</span></span>      | <span data-ttu-id="85203-256">✓</span><span class="sxs-lookup"><span data-stu-id="85203-256">✓</span></span>              |
| <span data-ttu-id="85203-257">DrawInstanced</span><span class="sxs-lookup"><span data-stu-id="85203-257">DrawInstanced</span></span>                                    | <span data-ttu-id="85203-258">✓</span><span class="sxs-lookup"><span data-stu-id="85203-258">✓</span></span>        |         |      | <span data-ttu-id="85203-259">✓</span><span class="sxs-lookup"><span data-stu-id="85203-259">✓</span></span>      | <span data-ttu-id="85203-260">✓</span><span class="sxs-lookup"><span data-stu-id="85203-260">✓</span></span>              |
| <span data-ttu-id="85203-261">EmitRaytracingAccelerationStructurePostbuildInfo</span><span class="sxs-lookup"><span data-stu-id="85203-261">EmitRaytracingAccelerationStructurePostbuildInfo</span></span> | <span data-ttu-id="85203-262">✓</span><span class="sxs-lookup"><span data-stu-id="85203-262">✓</span></span>        | <span data-ttu-id="85203-263">✓</span><span class="sxs-lookup"><span data-stu-id="85203-263">✓</span></span>       |      |        |                |
| <span data-ttu-id="85203-264">EndQuery</span><span class="sxs-lookup"><span data-stu-id="85203-264">EndQuery</span></span>                                         | <span data-ttu-id="85203-265">✓</span><span class="sxs-lookup"><span data-stu-id="85203-265">✓</span></span>        | <span data-ttu-id="85203-266">✓</span><span class="sxs-lookup"><span data-stu-id="85203-266">✓</span></span>       | <span data-ttu-id="85203-267">✓</span><span class="sxs-lookup"><span data-stu-id="85203-267">✓</span></span>    |        | <span data-ttu-id="85203-268">✓</span><span class="sxs-lookup"><span data-stu-id="85203-268">✓</span></span>              |
| <span data-ttu-id="85203-269">EndRenderPass</span><span class="sxs-lookup"><span data-stu-id="85203-269">EndRenderPass</span></span>                                    | <span data-ttu-id="85203-270">✓</span><span class="sxs-lookup"><span data-stu-id="85203-270">✓</span></span>        |         |      |        | <span data-ttu-id="85203-271">✓</span><span class="sxs-lookup"><span data-stu-id="85203-271">✓</span></span>              |
| <span data-ttu-id="85203-272">ExecuteBundle</span><span class="sxs-lookup"><span data-stu-id="85203-272">ExecuteBundle</span></span>                                    | <span data-ttu-id="85203-273">✓</span><span class="sxs-lookup"><span data-stu-id="85203-273">✓</span></span>        |         |      |        | <span data-ttu-id="85203-274">✓</span><span class="sxs-lookup"><span data-stu-id="85203-274">✓</span></span>              |
| <span data-ttu-id="85203-275">ExecuteIndirect</span><span class="sxs-lookup"><span data-stu-id="85203-275">ExecuteIndirect</span></span>                                  | <span data-ttu-id="85203-276">✓</span><span class="sxs-lookup"><span data-stu-id="85203-276">✓</span></span>        | <span data-ttu-id="85203-277">✓</span><span class="sxs-lookup"><span data-stu-id="85203-277">✓</span></span>       |      | <span data-ttu-id="85203-278">✓</span><span class="sxs-lookup"><span data-stu-id="85203-278">✓</span></span>      | <span data-ttu-id="85203-279">✓</span><span class="sxs-lookup"><span data-stu-id="85203-279">✓</span></span>              |
| <span data-ttu-id="85203-280">ExecuteMetaCommand</span><span class="sxs-lookup"><span data-stu-id="85203-280">ExecuteMetaCommand</span></span>                               | <span data-ttu-id="85203-281">✓</span><span class="sxs-lookup"><span data-stu-id="85203-281">✓</span></span>        | <span data-ttu-id="85203-282">✓</span><span class="sxs-lookup"><span data-stu-id="85203-282">✓</span></span>       |      |        |                |
| <span data-ttu-id="85203-283">IASetIndexBuffer</span><span class="sxs-lookup"><span data-stu-id="85203-283">IASetIndexBuffer</span></span>                                 | <span data-ttu-id="85203-284">✓</span><span class="sxs-lookup"><span data-stu-id="85203-284">✓</span></span>        |         |      | <span data-ttu-id="85203-285">✓</span><span class="sxs-lookup"><span data-stu-id="85203-285">✓</span></span>      | <span data-ttu-id="85203-286">✓</span><span class="sxs-lookup"><span data-stu-id="85203-286">✓</span></span>              |
| <span data-ttu-id="85203-287">IASetPrimitiveTopology</span><span class="sxs-lookup"><span data-stu-id="85203-287">IASetPrimitiveTopology</span></span>                           | <span data-ttu-id="85203-288">✓</span><span class="sxs-lookup"><span data-stu-id="85203-288">✓</span></span>        |         |      | <span data-ttu-id="85203-289">✓</span><span class="sxs-lookup"><span data-stu-id="85203-289">✓</span></span>      | <span data-ttu-id="85203-290">✓</span><span class="sxs-lookup"><span data-stu-id="85203-290">✓</span></span>              |
| <span data-ttu-id="85203-291">IASetVertexBuffers</span><span class="sxs-lookup"><span data-stu-id="85203-291">IASetVertexBuffers</span></span>                               | <span data-ttu-id="85203-292">✓</span><span class="sxs-lookup"><span data-stu-id="85203-292">✓</span></span>        |         |      | <span data-ttu-id="85203-293">✓</span><span class="sxs-lookup"><span data-stu-id="85203-293">✓</span></span>      | <span data-ttu-id="85203-294">✓</span><span class="sxs-lookup"><span data-stu-id="85203-294">✓</span></span>              |
| <span data-ttu-id="85203-295">InitializeMetaCommand</span><span class="sxs-lookup"><span data-stu-id="85203-295">InitializeMetaCommand</span></span>                            | <span data-ttu-id="85203-296">✓</span><span class="sxs-lookup"><span data-stu-id="85203-296">✓</span></span>        | <span data-ttu-id="85203-297">✓</span><span class="sxs-lookup"><span data-stu-id="85203-297">✓</span></span>       |      |        |                |
| <span data-ttu-id="85203-298">OMSetBlendFactor</span><span class="sxs-lookup"><span data-stu-id="85203-298">OMSetBlendFactor</span></span>                                 | <span data-ttu-id="85203-299">✓</span><span class="sxs-lookup"><span data-stu-id="85203-299">✓</span></span>        |         |      | <span data-ttu-id="85203-300">✓</span><span class="sxs-lookup"><span data-stu-id="85203-300">✓</span></span>      | <span data-ttu-id="85203-301">✓</span><span class="sxs-lookup"><span data-stu-id="85203-301">✓</span></span>              |
| <span data-ttu-id="85203-302">OMSetDepthBounds</span><span class="sxs-lookup"><span data-stu-id="85203-302">OMSetDepthBounds</span></span>                                 | <span data-ttu-id="85203-303">✓</span><span class="sxs-lookup"><span data-stu-id="85203-303">✓</span></span>        |         |      | <span data-ttu-id="85203-304">✓</span><span class="sxs-lookup"><span data-stu-id="85203-304">✓</span></span>      | <span data-ttu-id="85203-305">✓</span><span class="sxs-lookup"><span data-stu-id="85203-305">✓</span></span>              |
| <span data-ttu-id="85203-306">OMSetRenderTargets</span><span class="sxs-lookup"><span data-stu-id="85203-306">OMSetRenderTargets</span></span>                               | <span data-ttu-id="85203-307">✓</span><span class="sxs-lookup"><span data-stu-id="85203-307">✓</span></span>        |         |      |        |                |
| <span data-ttu-id="85203-308">OMSetStencilRef</span><span class="sxs-lookup"><span data-stu-id="85203-308">OMSetStencilRef</span></span>                                  | <span data-ttu-id="85203-309">✓</span><span class="sxs-lookup"><span data-stu-id="85203-309">✓</span></span>        |         |      | <span data-ttu-id="85203-310">✓</span><span class="sxs-lookup"><span data-stu-id="85203-310">✓</span></span>      | <span data-ttu-id="85203-311">✓</span><span class="sxs-lookup"><span data-stu-id="85203-311">✓</span></span>              |
| <span data-ttu-id="85203-312">ResolveQueryData</span><span class="sxs-lookup"><span data-stu-id="85203-312">ResolveQueryData</span></span>                                 | <span data-ttu-id="85203-313">✓</span><span class="sxs-lookup"><span data-stu-id="85203-313">✓</span></span>        | <span data-ttu-id="85203-314">✓</span><span class="sxs-lookup"><span data-stu-id="85203-314">✓</span></span>       | <span data-ttu-id="85203-315">✓</span><span class="sxs-lookup"><span data-stu-id="85203-315">✓</span></span>    |        |                |
| <span data-ttu-id="85203-316">ResolveSubresource</span><span class="sxs-lookup"><span data-stu-id="85203-316">ResolveSubresource</span></span>                               | <span data-ttu-id="85203-317">✓</span><span class="sxs-lookup"><span data-stu-id="85203-317">✓</span></span>        |         |      |        |                |
| <span data-ttu-id="85203-318">ResolveSubresourceRegion</span><span class="sxs-lookup"><span data-stu-id="85203-318">ResolveSubresourceRegion</span></span>                         | <span data-ttu-id="85203-319">✓</span><span class="sxs-lookup"><span data-stu-id="85203-319">✓</span></span>        |         |      |        |                |
| <span data-ttu-id="85203-320">ResourceBarrier</span><span class="sxs-lookup"><span data-stu-id="85203-320">ResourceBarrier</span></span>                                  | <span data-ttu-id="85203-321">✓</span><span class="sxs-lookup"><span data-stu-id="85203-321">✓</span></span>        | <span data-ttu-id="85203-322">✓</span><span class="sxs-lookup"><span data-stu-id="85203-322">✓</span></span>       | <span data-ttu-id="85203-323">✓</span><span class="sxs-lookup"><span data-stu-id="85203-323">✓</span></span>    |        | <span data-ttu-id="85203-324">✓</span><span class="sxs-lookup"><span data-stu-id="85203-324">✓</span></span>              |
| <span data-ttu-id="85203-325">RSSetScissorRects</span><span class="sxs-lookup"><span data-stu-id="85203-325">RSSetScissorRects</span></span>                                | <span data-ttu-id="85203-326">✓</span><span class="sxs-lookup"><span data-stu-id="85203-326">✓</span></span>        |         |      |        | <span data-ttu-id="85203-327">✓</span><span class="sxs-lookup"><span data-stu-id="85203-327">✓</span></span>              |
| <span data-ttu-id="85203-328">RSSetShadingRate</span><span class="sxs-lookup"><span data-stu-id="85203-328">RSSetShadingRate</span></span>                                 | <span data-ttu-id="85203-329">✓</span><span class="sxs-lookup"><span data-stu-id="85203-329">✓</span></span>        |         |      | <span data-ttu-id="85203-330">✓</span><span class="sxs-lookup"><span data-stu-id="85203-330">✓</span></span>      | <span data-ttu-id="85203-331">✓</span><span class="sxs-lookup"><span data-stu-id="85203-331">✓</span></span>              |
| <span data-ttu-id="85203-332">RSSetShadingRateImage</span><span class="sxs-lookup"><span data-stu-id="85203-332">RSSetShadingRateImage</span></span>                            | <span data-ttu-id="85203-333">✓</span><span class="sxs-lookup"><span data-stu-id="85203-333">✓</span></span>        |         |      | <span data-ttu-id="85203-334">✓</span><span class="sxs-lookup"><span data-stu-id="85203-334">✓</span></span>      | <span data-ttu-id="85203-335">✓</span><span class="sxs-lookup"><span data-stu-id="85203-335">✓</span></span>              |
| <span data-ttu-id="85203-336">RSSetViewports</span><span class="sxs-lookup"><span data-stu-id="85203-336">RSSetViewports</span></span>                                   | <span data-ttu-id="85203-337">✓</span><span class="sxs-lookup"><span data-stu-id="85203-337">✓</span></span>        |         |      |        | <span data-ttu-id="85203-338">✓</span><span class="sxs-lookup"><span data-stu-id="85203-338">✓</span></span>              |
| <span data-ttu-id="85203-339">SetComputeRoot32BitConstant</span><span class="sxs-lookup"><span data-stu-id="85203-339">SetComputeRoot32BitConstant</span></span>                      | <span data-ttu-id="85203-340">✓</span><span class="sxs-lookup"><span data-stu-id="85203-340">✓</span></span>        | <span data-ttu-id="85203-341">✓</span><span class="sxs-lookup"><span data-stu-id="85203-341">✓</span></span>       |      | <span data-ttu-id="85203-342">✓</span><span class="sxs-lookup"><span data-stu-id="85203-342">✓</span></span>      | <span data-ttu-id="85203-343">✓</span><span class="sxs-lookup"><span data-stu-id="85203-343">✓</span></span>              |
| <span data-ttu-id="85203-344">SetComputeRoot32BitConstants</span><span class="sxs-lookup"><span data-stu-id="85203-344">SetComputeRoot32BitConstants</span></span>                     | <span data-ttu-id="85203-345">✓</span><span class="sxs-lookup"><span data-stu-id="85203-345">✓</span></span>        | <span data-ttu-id="85203-346">✓</span><span class="sxs-lookup"><span data-stu-id="85203-346">✓</span></span>       |      | <span data-ttu-id="85203-347">✓</span><span class="sxs-lookup"><span data-stu-id="85203-347">✓</span></span>      | <span data-ttu-id="85203-348">✓</span><span class="sxs-lookup"><span data-stu-id="85203-348">✓</span></span>              |
| <span data-ttu-id="85203-349">SetComputeRootConstantBufferView</span><span class="sxs-lookup"><span data-stu-id="85203-349">SetComputeRootConstantBufferView</span></span>                 | <span data-ttu-id="85203-350">✓</span><span class="sxs-lookup"><span data-stu-id="85203-350">✓</span></span>        | <span data-ttu-id="85203-351">✓</span><span class="sxs-lookup"><span data-stu-id="85203-351">✓</span></span>       |      | <span data-ttu-id="85203-352">✓</span><span class="sxs-lookup"><span data-stu-id="85203-352">✓</span></span>      | <span data-ttu-id="85203-353">✓</span><span class="sxs-lookup"><span data-stu-id="85203-353">✓</span></span>              |
| <span data-ttu-id="85203-354">SetComputeRootDescriptorTable</span><span class="sxs-lookup"><span data-stu-id="85203-354">SetComputeRootDescriptorTable</span></span>                    | <span data-ttu-id="85203-355">✓</span><span class="sxs-lookup"><span data-stu-id="85203-355">✓</span></span>        | <span data-ttu-id="85203-356">✓</span><span class="sxs-lookup"><span data-stu-id="85203-356">✓</span></span>       |      | <span data-ttu-id="85203-357">✓</span><span class="sxs-lookup"><span data-stu-id="85203-357">✓</span></span>      | <span data-ttu-id="85203-358">✓</span><span class="sxs-lookup"><span data-stu-id="85203-358">✓</span></span>              |
| <span data-ttu-id="85203-359">SetComputeRootShaderResourceView</span><span class="sxs-lookup"><span data-stu-id="85203-359">SetComputeRootShaderResourceView</span></span>                 | <span data-ttu-id="85203-360">✓</span><span class="sxs-lookup"><span data-stu-id="85203-360">✓</span></span>        | <span data-ttu-id="85203-361">✓</span><span class="sxs-lookup"><span data-stu-id="85203-361">✓</span></span>       |      | <span data-ttu-id="85203-362">✓</span><span class="sxs-lookup"><span data-stu-id="85203-362">✓</span></span>      | <span data-ttu-id="85203-363">✓</span><span class="sxs-lookup"><span data-stu-id="85203-363">✓</span></span>              |
| <span data-ttu-id="85203-364">SetComputeRootSignature</span><span class="sxs-lookup"><span data-stu-id="85203-364">SetComputeRootSignature</span></span>                          | <span data-ttu-id="85203-365">✓</span><span class="sxs-lookup"><span data-stu-id="85203-365">✓</span></span>        | <span data-ttu-id="85203-366">✓</span><span class="sxs-lookup"><span data-stu-id="85203-366">✓</span></span>       |      | <span data-ttu-id="85203-367">✓</span><span class="sxs-lookup"><span data-stu-id="85203-367">✓</span></span>      | <span data-ttu-id="85203-368">✓</span><span class="sxs-lookup"><span data-stu-id="85203-368">✓</span></span>              |
| <span data-ttu-id="85203-369">SetComputeRootUnorderedAccessView</span><span class="sxs-lookup"><span data-stu-id="85203-369">SetComputeRootUnorderedAccessView</span></span>                | <span data-ttu-id="85203-370">✓</span><span class="sxs-lookup"><span data-stu-id="85203-370">✓</span></span>        | <span data-ttu-id="85203-371">✓</span><span class="sxs-lookup"><span data-stu-id="85203-371">✓</span></span>       |      | <span data-ttu-id="85203-372">✓</span><span class="sxs-lookup"><span data-stu-id="85203-372">✓</span></span>      | <span data-ttu-id="85203-373">✓</span><span class="sxs-lookup"><span data-stu-id="85203-373">✓</span></span>              |
| <span data-ttu-id="85203-374">SetDescriptorHeaps</span><span class="sxs-lookup"><span data-stu-id="85203-374">SetDescriptorHeaps</span></span>                               | <span data-ttu-id="85203-375">✓</span><span class="sxs-lookup"><span data-stu-id="85203-375">✓</span></span>        | <span data-ttu-id="85203-376">✓</span><span class="sxs-lookup"><span data-stu-id="85203-376">✓</span></span>       |      | <span data-ttu-id="85203-377">✓</span><span class="sxs-lookup"><span data-stu-id="85203-377">✓</span></span>      | <span data-ttu-id="85203-378">✓</span><span class="sxs-lookup"><span data-stu-id="85203-378">✓</span></span>              |
| <span data-ttu-id="85203-379">SetGraphicsRoot32BitConstant</span><span class="sxs-lookup"><span data-stu-id="85203-379">SetGraphicsRoot32BitConstant</span></span>                     | <span data-ttu-id="85203-380">✓</span><span class="sxs-lookup"><span data-stu-id="85203-380">✓</span></span>        |         |      | <span data-ttu-id="85203-381">✓</span><span class="sxs-lookup"><span data-stu-id="85203-381">✓</span></span>      | <span data-ttu-id="85203-382">✓</span><span class="sxs-lookup"><span data-stu-id="85203-382">✓</span></span>              |
| <span data-ttu-id="85203-383">SetGraphicsRoot32BitConstants</span><span class="sxs-lookup"><span data-stu-id="85203-383">SetGraphicsRoot32BitConstants</span></span>                    | <span data-ttu-id="85203-384">✓</span><span class="sxs-lookup"><span data-stu-id="85203-384">✓</span></span>        |         |      | <span data-ttu-id="85203-385">✓</span><span class="sxs-lookup"><span data-stu-id="85203-385">✓</span></span>      | <span data-ttu-id="85203-386">✓</span><span class="sxs-lookup"><span data-stu-id="85203-386">✓</span></span>              |
| <span data-ttu-id="85203-387">SetGraphicsRootConstantBufferView</span><span class="sxs-lookup"><span data-stu-id="85203-387">SetGraphicsRootConstantBufferView</span></span>                | <span data-ttu-id="85203-388">✓</span><span class="sxs-lookup"><span data-stu-id="85203-388">✓</span></span>        |         |      | <span data-ttu-id="85203-389">✓</span><span class="sxs-lookup"><span data-stu-id="85203-389">✓</span></span>      | <span data-ttu-id="85203-390">✓</span><span class="sxs-lookup"><span data-stu-id="85203-390">✓</span></span>              |
| <span data-ttu-id="85203-391">SetGraphicsRootDescriptorTable</span><span class="sxs-lookup"><span data-stu-id="85203-391">SetGraphicsRootDescriptorTable</span></span>                   | <span data-ttu-id="85203-392">✓</span><span class="sxs-lookup"><span data-stu-id="85203-392">✓</span></span>        |         |      | <span data-ttu-id="85203-393">✓</span><span class="sxs-lookup"><span data-stu-id="85203-393">✓</span></span>      | <span data-ttu-id="85203-394">✓</span><span class="sxs-lookup"><span data-stu-id="85203-394">✓</span></span>              |
| <span data-ttu-id="85203-395">SetGraphicsRootShaderResourceView</span><span class="sxs-lookup"><span data-stu-id="85203-395">SetGraphicsRootShaderResourceView</span></span>                | <span data-ttu-id="85203-396">✓</span><span class="sxs-lookup"><span data-stu-id="85203-396">✓</span></span>        |         |      | <span data-ttu-id="85203-397">✓</span><span class="sxs-lookup"><span data-stu-id="85203-397">✓</span></span>      | <span data-ttu-id="85203-398">✓</span><span class="sxs-lookup"><span data-stu-id="85203-398">✓</span></span>              |
| <span data-ttu-id="85203-399">SetGraphicsRootSignature</span><span class="sxs-lookup"><span data-stu-id="85203-399">SetGraphicsRootSignature</span></span>                         | <span data-ttu-id="85203-400">✓</span><span class="sxs-lookup"><span data-stu-id="85203-400">✓</span></span>        |         |      | <span data-ttu-id="85203-401">✓</span><span class="sxs-lookup"><span data-stu-id="85203-401">✓</span></span>      | <span data-ttu-id="85203-402">✓</span><span class="sxs-lookup"><span data-stu-id="85203-402">✓</span></span>              |
| <span data-ttu-id="85203-403">SetGraphicsRootUnorderedAccessView</span><span class="sxs-lookup"><span data-stu-id="85203-403">SetGraphicsRootUnorderedAccessView</span></span>               | <span data-ttu-id="85203-404">✓</span><span class="sxs-lookup"><span data-stu-id="85203-404">✓</span></span>        |         |      | <span data-ttu-id="85203-405">✓</span><span class="sxs-lookup"><span data-stu-id="85203-405">✓</span></span>      | <span data-ttu-id="85203-406">✓</span><span class="sxs-lookup"><span data-stu-id="85203-406">✓</span></span>              |
| <span data-ttu-id="85203-407">SetPipelineState</span><span class="sxs-lookup"><span data-stu-id="85203-407">SetPipelineState</span></span>                                 | <span data-ttu-id="85203-408">✓</span><span class="sxs-lookup"><span data-stu-id="85203-408">✓</span></span>        | <span data-ttu-id="85203-409">✓</span><span class="sxs-lookup"><span data-stu-id="85203-409">✓</span></span>       |      | <span data-ttu-id="85203-410">✓</span><span class="sxs-lookup"><span data-stu-id="85203-410">✓</span></span>      | <span data-ttu-id="85203-411">✓</span><span class="sxs-lookup"><span data-stu-id="85203-411">✓</span></span>              |
| <span data-ttu-id="85203-412">SetPipelineState1</span><span class="sxs-lookup"><span data-stu-id="85203-412">SetPipelineState1</span></span>                                | <span data-ttu-id="85203-413">✓</span><span class="sxs-lookup"><span data-stu-id="85203-413">✓</span></span>        | <span data-ttu-id="85203-414">✓</span><span class="sxs-lookup"><span data-stu-id="85203-414">✓</span></span>       |      | <span data-ttu-id="85203-415">✓</span><span class="sxs-lookup"><span data-stu-id="85203-415">✓</span></span>      |                |
| <span data-ttu-id="85203-416">SetPredication</span><span class="sxs-lookup"><span data-stu-id="85203-416">SetPredication</span></span>                                   | <span data-ttu-id="85203-417">✓</span><span class="sxs-lookup"><span data-stu-id="85203-417">✓</span></span>        | <span data-ttu-id="85203-418">✓</span><span class="sxs-lookup"><span data-stu-id="85203-418">✓</span></span>       |      |        | <span data-ttu-id="85203-419">✓</span><span class="sxs-lookup"><span data-stu-id="85203-419">✓</span></span>              |
| <span data-ttu-id="85203-420">SetProtectedResourceSession</span><span class="sxs-lookup"><span data-stu-id="85203-420">SetProtectedResourceSession</span></span>                      | <span data-ttu-id="85203-421">✓</span><span class="sxs-lookup"><span data-stu-id="85203-421">✓</span></span>        | <span data-ttu-id="85203-422">✓</span><span class="sxs-lookup"><span data-stu-id="85203-422">✓</span></span>       | <span data-ttu-id="85203-423">✓</span><span class="sxs-lookup"><span data-stu-id="85203-423">✓</span></span>    |        |                |
| <span data-ttu-id="85203-424">SetSamplePositions</span><span class="sxs-lookup"><span data-stu-id="85203-424">SetSamplePositions</span></span>                               | <span data-ttu-id="85203-425">✓</span><span class="sxs-lookup"><span data-stu-id="85203-425">✓</span></span>        |         |      | <span data-ttu-id="85203-426">✓</span><span class="sxs-lookup"><span data-stu-id="85203-426">✓</span></span>      | <span data-ttu-id="85203-427">✓</span><span class="sxs-lookup"><span data-stu-id="85203-427">✓</span></span>              |
| <span data-ttu-id="85203-428">SetViewInstanceMask</span><span class="sxs-lookup"><span data-stu-id="85203-428">SetViewInstanceMask</span></span>                              | <span data-ttu-id="85203-429">✓</span><span class="sxs-lookup"><span data-stu-id="85203-429">✓</span></span>        |         |      | <span data-ttu-id="85203-430">✓</span><span class="sxs-lookup"><span data-stu-id="85203-430">✓</span></span>      | <span data-ttu-id="85203-431">✓</span><span class="sxs-lookup"><span data-stu-id="85203-431">✓</span></span>              |
| <span data-ttu-id="85203-432">SOSetTargets</span><span class="sxs-lookup"><span data-stu-id="85203-432">SOSetTargets</span></span>                                     | <span data-ttu-id="85203-433">✓</span><span class="sxs-lookup"><span data-stu-id="85203-433">✓</span></span>        |         |      |        | <span data-ttu-id="85203-434">✓</span><span class="sxs-lookup"><span data-stu-id="85203-434">✓</span></span>              |
| <span data-ttu-id="85203-435">WriteBufferImmediate</span><span class="sxs-lookup"><span data-stu-id="85203-435">WriteBufferImmediate</span></span>                             | <span data-ttu-id="85203-436">✓</span><span class="sxs-lookup"><span data-stu-id="85203-436">✓</span></span>        | <span data-ttu-id="85203-437">✓</span><span class="sxs-lookup"><span data-stu-id="85203-437">✓</span></span>       | <span data-ttu-id="85203-438">✓</span><span class="sxs-lookup"><span data-stu-id="85203-438">✓</span></span>    | <span data-ttu-id="85203-439">✓</span><span class="sxs-lookup"><span data-stu-id="85203-439">✓</span></span>      | <span data-ttu-id="85203-440">✓</span><span class="sxs-lookup"><span data-stu-id="85203-440">✓</span></span>              |

## <a name="bundle-restrictions"></a><span data-ttu-id="85203-441">組合限制</span><span class="sxs-lookup"><span data-stu-id="85203-441">Bundle restrictions</span></span>

<span data-ttu-id="85203-442">限制可讓 Direct3D 12 驅動程式在記錄時執行與組合相關聯的大部分工作，進而讓 [**ExecuteBundle**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-executebundle) API 以低額外負荷執行。</span><span class="sxs-lookup"><span data-stu-id="85203-442">Restrictions enable Direct3D 12 drivers to do most of the work associated with bundles at record time, thus enabling the [**ExecuteBundle**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-executebundle) API to be run with low overhead.</span></span> <span data-ttu-id="85203-443">組合所參考的所有管線狀態物件都必須具有相同的轉譯目標格式、深度緩衝區格式和範例描述。</span><span class="sxs-lookup"><span data-stu-id="85203-443">All pipeline state objects referenced by a bundle must have the same render target formats, depth buffer format, and sample descriptions.</span></span>

<span data-ttu-id="85203-444">使用類型： D3D12 \_ 命令清單類型套件組合建立的命令清單上，不允許下列命令清單 API 呼叫 \_ \_ \_ ：</span><span class="sxs-lookup"><span data-stu-id="85203-444">The following command list API calls are not allowed on command lists created with type: D3D12\_COMMAND\_LIST\_TYPE\_BUNDLE:</span></span>

-   <span data-ttu-id="85203-445">任何明確的方法</span><span class="sxs-lookup"><span data-stu-id="85203-445">Any Clear method</span></span>
-   <span data-ttu-id="85203-446">任何複製方法</span><span class="sxs-lookup"><span data-stu-id="85203-446">Any Copy method</span></span>
-   [<span data-ttu-id="85203-447">**DiscardResource**</span><span class="sxs-lookup"><span data-stu-id="85203-447">**DiscardResource**</span></span>](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-discardresource)
-   [<span data-ttu-id="85203-448">**ExecuteBundle**</span><span class="sxs-lookup"><span data-stu-id="85203-448">**ExecuteBundle**</span></span>](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-executebundle)
-   [<span data-ttu-id="85203-449">**ResourceBarrier**</span><span class="sxs-lookup"><span data-stu-id="85203-449">**ResourceBarrier**</span></span>](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-resourcebarrier)
-   [<span data-ttu-id="85203-450">**ResolveSubresource**</span><span class="sxs-lookup"><span data-stu-id="85203-450">**ResolveSubresource**</span></span>](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-resolvesubresource)
-   [<span data-ttu-id="85203-451">**SetPredication**</span><span class="sxs-lookup"><span data-stu-id="85203-451">**SetPredication**</span></span>](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-setpredication)
-   [<span data-ttu-id="85203-452">**BeginQuery**</span><span class="sxs-lookup"><span data-stu-id="85203-452">**BeginQuery**</span></span>](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-beginquery)
-   [<span data-ttu-id="85203-453">**EndQuery**</span><span class="sxs-lookup"><span data-stu-id="85203-453">**EndQuery**</span></span>](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-endquery)
-   [<span data-ttu-id="85203-454">**SOSetTargets**</span><span class="sxs-lookup"><span data-stu-id="85203-454">**SOSetTargets**</span></span>](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-sosettargets)
-   [<span data-ttu-id="85203-455">**OMSetRenderTargets**</span><span class="sxs-lookup"><span data-stu-id="85203-455">**OMSetRenderTargets**</span></span>](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-omsetrendertargets)
-   [<span data-ttu-id="85203-456">**RSSetViewports**</span><span class="sxs-lookup"><span data-stu-id="85203-456">**RSSetViewports**</span></span>](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-rssetviewports)
-   [<span data-ttu-id="85203-457">**RSSetScissorRects**</span><span class="sxs-lookup"><span data-stu-id="85203-457">**RSSetScissorRects**</span></span>](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-rssetscissorrects)

<span data-ttu-id="85203-458">您可以針對組合呼叫 [**SetDescriptorHeaps**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-setdescriptorheaps) ，但套件組合描述元堆積必須符合呼叫的命令清單描述元堆積。</span><span class="sxs-lookup"><span data-stu-id="85203-458">[**SetDescriptorHeaps**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-setdescriptorheaps) can be called on a bundle, but the bundle descriptor heaps must match the calling command list descriptor heap.</span></span>

<span data-ttu-id="85203-459">如果在組合上呼叫這些 Api 的任何一個，則執行時間會捨棄呼叫。</span><span class="sxs-lookup"><span data-stu-id="85203-459">If any of these APIs are called on a bundle, the runtime will drop the call.</span></span> <span data-ttu-id="85203-460">每次發生這種情況時，debug 層都會發出錯誤。</span><span class="sxs-lookup"><span data-stu-id="85203-460">The debug layer will issue an error whenever this occurs.</span></span>

## <a name="related-topics"></a><span data-ttu-id="85203-461">相關主題</span><span class="sxs-lookup"><span data-stu-id="85203-461">Related topics</span></span>

[<span data-ttu-id="85203-462">在 Direct3D 12 中提交工作</span><span class="sxs-lookup"><span data-stu-id="85203-462">Work Submission in Direct3D 12</span></span>](command-queues-and-command-lists.md)