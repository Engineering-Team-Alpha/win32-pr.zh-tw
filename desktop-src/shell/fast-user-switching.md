---
description: 在較舊的作業系統中，使用者必須先登出，其他使用者才能登入。 從 Windows XP 開始，使用者不需要登出以允許其他使用者登入。
ms.assetid: 72f99d32-184f-4f0b-bec1-6068c6e32f88
title: 快速使用者切換
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4d79f16ef8a1ea8c97bfb61d34dfa727f3d0cef8
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "104991606"
---
# <a name="fast-user-switching"></a><span data-ttu-id="857cd-104">快速使用者切換</span><span class="sxs-lookup"><span data-stu-id="857cd-104">Fast User Switching</span></span>

<span data-ttu-id="857cd-105">當使用者登入電腦時，系統會載入其設定檔。</span><span class="sxs-lookup"><span data-stu-id="857cd-105">When a user logs onto a computer, the system loads their profile.</span></span> <span data-ttu-id="857cd-106">因為每個使用者都有唯一的使用者帳戶，所以這可讓多個使用者共用一部電腦。</span><span class="sxs-lookup"><span data-stu-id="857cd-106">Because each user has a unique user account, this allows multiple users to share a computer.</span></span> <span data-ttu-id="857cd-107">當使用者登入時，他們所看到的桌面設定、檔案、我的最愛和歷程記錄會是：其他使用者無法存取它們。</span><span class="sxs-lookup"><span data-stu-id="857cd-107">When a user logs on, the desktop settings, files, favorites, and history they see are theirs; they cannot be accessed by other users.</span></span> <span data-ttu-id="857cd-108">當該使用者登出時，就會在下次登入時保留其設定檔。</span><span class="sxs-lookup"><span data-stu-id="857cd-108">When that user logs off, their profile is preserved for the next time that they log on.</span></span> <span data-ttu-id="857cd-109">在較舊的作業系統中，使用者必須先登出，其他使用者才能登入。</span><span class="sxs-lookup"><span data-stu-id="857cd-109">In older operating systems, a user was required to log off before another user could log on.</span></span> <span data-ttu-id="857cd-110">從 Windows XP 開始，使用者不需要登出以允許其他使用者登入。</span><span class="sxs-lookup"><span data-stu-id="857cd-110">As of Windows XP, a user does not have to log off to allow another user to log on.</span></span> <span data-ttu-id="857cd-111">相反地，多位使用者可以在其開啟的帳戶之間快速登入和切換。</span><span class="sxs-lookup"><span data-stu-id="857cd-111">Instead, it is possible for multiple users to log on and switch quickly between their open accounts.</span></span> <span data-ttu-id="857cd-112">這項功能稱為「 *快速切換使用者*」。</span><span class="sxs-lookup"><span data-stu-id="857cd-112">This feature is referred to as *fast user switching*.</span></span> <span data-ttu-id="857cd-113">切換到另一個帳戶並不會變更使用者目前正在執行之應用程式的狀態。</span><span class="sxs-lookup"><span data-stu-id="857cd-113">Switching to another account does not change the state of the applications that a user is currently running.</span></span> <span data-ttu-id="857cd-114">比方說，假設一位使用者允許另一位使用者在第一位使用者登入時切換到其帳戶。</span><span class="sxs-lookup"><span data-stu-id="857cd-114">Suppose, for instance, that one user allows another user to switch to their account while the first user is logged on.</span></span> <span data-ttu-id="857cd-115">當第一位使用者 switchs 回到其帳戶時，他們的應用程式就會執行，並保留其網路連接。</span><span class="sxs-lookup"><span data-stu-id="857cd-115">When the first user switchs back to their account, their applications are running and their network connections are preserved.</span></span> <span data-ttu-id="857cd-116">因此，這兩個使用者會同時使用電腦。</span><span class="sxs-lookup"><span data-stu-id="857cd-116">Therefore, it appears that both users are simultaneously using the computer.</span></span>

<span data-ttu-id="857cd-117">如果您的應用程式符合 Windows 2000 標誌需求，則應該在 Windows XP 及更新版本的作業系統上使用快速切換使用者。</span><span class="sxs-lookup"><span data-stu-id="857cd-117">If your applications comply with the Windows 2000 logo requirements, they should work with fast user switching on Windows XP and later operating systems.</span></span> <span data-ttu-id="857cd-118">不過，在開發應用程式時，請務必記住此案例，讓應用程式如同使用者預期般運作。</span><span class="sxs-lookup"><span data-stu-id="857cd-118">However, it is important to keep this scenario in mind when developing an application so that it behaves as users would expect.</span></span> <span data-ttu-id="857cd-119">撰寫您的應用程式時，請使用下列指導方針：</span><span class="sxs-lookup"><span data-stu-id="857cd-119">Use the following guidelines when writing your applications:</span></span>

-   <span data-ttu-id="857cd-120">執行真正的設定檔分隔。</span><span class="sxs-lookup"><span data-stu-id="857cd-120">Implement true profile separation.</span></span> <span data-ttu-id="857cd-121">系統會提供基礎結構，以支援使用者資料、使用者設定和電腦設定的分隔。</span><span class="sxs-lookup"><span data-stu-id="857cd-121">The system provides an underlying infrastructure that supports separation of user data, user settings, and computer settings.</span></span> <span data-ttu-id="857cd-122">例如，使用使用者的 [ **檔** ] 資料夾來儲存使用者建立的資料。</span><span class="sxs-lookup"><span data-stu-id="857cd-122">For example, use the user's **Documents** folder to store user-created data.</span></span> <span data-ttu-id="857cd-123">若要找出應用程式特定資料的目錄，請使用 [已知資料夾](known-folders.md)系統搭配 [**FOLDERID \_ RoamingAppData**](knownfolderid.md)) 或針對較舊的作業系統，使用 [**CSIDL \_ APPDATA**](csidl.md)) 的 [**CSIDL**](csidl.md)系統。</span><span class="sxs-lookup"><span data-stu-id="857cd-123">To locate a directory for application-specific data, use the [known folder](known-folders.md) system with [**FOLDERID\_RoamingAppData**](knownfolderid.md)) or, for older operating systems, the [**CSIDL**](csidl.md) system with [**CSIDL\_APPDATA**](csidl.md)).</span></span> <span data-ttu-id="857cd-124">針對不應在其他電腦上提供給使用者的資料（例如，暫存檔案），請使用 **FOLDERID \_ LocalAppData** 或 **CSIDL \_ 本機 \_ APPDATA** 。</span><span class="sxs-lookup"><span data-stu-id="857cd-124">Use **FOLDERID\_LocalAppData** or **CSIDL\_LOCAL\_APPDATA** for data that should not be available to the user on other computers, such as temporary files.</span></span>
-   <span data-ttu-id="857cd-125">註冊以取得使用者交換器的通知。</span><span class="sxs-lookup"><span data-stu-id="857cd-125">Register for notification of a user switch.</span></span> <span data-ttu-id="857cd-126">一般情況下，應用程式不需要在切換時收到通知。</span><span class="sxs-lookup"><span data-stu-id="857cd-126">Typically, an application does not need to be notified when the switch occurs.</span></span> <span data-ttu-id="857cd-127">但是，如果您的應用程式必須收到會話變更的通知，它可以註冊以接收 [**WM \_ WTSSESSION \_ 變更**](../termserv/wm-wtssession-change.md) 訊息。</span><span class="sxs-lookup"><span data-stu-id="857cd-127">However, if your application must be notified of a session change, it can register to receive a [**WM\_WTSSESSION\_CHANGE**](../termserv/wm-wtssession-change.md) message.</span></span>
-   <span data-ttu-id="857cd-128">請留意應用程式的其他實例。</span><span class="sxs-lookup"><span data-stu-id="857cd-128">Be aware of other instances of your application.</span></span> <span data-ttu-id="857cd-129">例如，應用程式有時必須從網際網路下載更新。</span><span class="sxs-lookup"><span data-stu-id="857cd-129">For example, there are times when an application must download an update from the Internet.</span></span> <span data-ttu-id="857cd-130">如果另一位使用者同時在另一個會話中執行應用程式的實例，更新可能會失敗。</span><span class="sxs-lookup"><span data-stu-id="857cd-130">The update can fail if another user is simultaneously running an instance of the application in another session.</span></span> <span data-ttu-id="857cd-131">即使更新成功，更新仍會導致應用程式的其他執行中實例以無法預期的方式運作。</span><span class="sxs-lookup"><span data-stu-id="857cd-131">Even if the update succeeds, the update can cause other running instances of the application to behave in an unpredictable manner.</span></span> <span data-ttu-id="857cd-132">因此，只有在沒有任何其他應用程式實例正在執行時，才執行動態升級的最佳做法。</span><span class="sxs-lookup"><span data-stu-id="857cd-132">Therefore it is best to perform a dynamic upgrade only if no other instances of the application are running.</span></span> <span data-ttu-id="857cd-133">在下載應用程式更新之前，建議您最好先執行方法，以指示應用程式的所有執行中實例儲存資料並完全結束。</span><span class="sxs-lookup"><span data-stu-id="857cd-133">Before downloading an application update, it might be appropriate to implement a method that signals all running instances of the application to save data and exit cleanly.</span></span>

 

 
