---
description: 一般裝置內容會用於在視窗的工作區中繪製。
ms.assetid: 63c4f775-b1a3-4f7c-808b-81c596f26353
title: 一般顯示裝置內容
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 890b0235784ec1ed11c8ce3a553244629a008d75
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "103943807"
---
# <a name="common-display-device-contexts"></a><span data-ttu-id="45083-103">一般顯示裝置內容</span><span class="sxs-lookup"><span data-stu-id="45083-103">Common Display Device Contexts</span></span>

<span data-ttu-id="45083-104">*一般裝置內容* 會用於在視窗的工作區中繪製。</span><span class="sxs-lookup"><span data-stu-id="45083-104">A *common device context* is used for drawing in the client area of the window.</span></span> <span data-ttu-id="45083-105">系統預設會針對視窗類別未明確指定顯示裝置內容樣式的視窗，提供通用的裝置內容。</span><span class="sxs-lookup"><span data-stu-id="45083-105">The system provides a common device context by default for any window whose window class does not explicitly specify a display device context style.</span></span> <span data-ttu-id="45083-106">一般的裝置內容通常會與 windows 搭配使用，而不會對裝置內容屬性進行廣泛的變更。</span><span class="sxs-lookup"><span data-stu-id="45083-106">Common device contexts are typically used with windows that can be drawn without extensive changes to the device context attributes.</span></span> <span data-ttu-id="45083-107">常見的裝置內容很方便，因為它們不需要額外的記憶體或系統資源，但如果應用程式必須在使用之前先設定許多屬性，就很不方便。</span><span class="sxs-lookup"><span data-stu-id="45083-107">Common device contexts are convenient because they do not require additional memory or system resources, but they can be inconvenient if the application must set up many attributes before using them.</span></span>

<span data-ttu-id="45083-108">系統會從顯示裝置內容快取抓取所有常見的裝置內容。</span><span class="sxs-lookup"><span data-stu-id="45083-108">The system retrieves all common device contexts from the display device context cache.</span></span> <span data-ttu-id="45083-109">應用程式可以在建立視窗後立即取得一般裝置內容。</span><span class="sxs-lookup"><span data-stu-id="45083-109">An application can retrieve a common device context immediately after the window is created.</span></span> <span data-ttu-id="45083-110">由於一般裝置內容是來自快取，因此應用程式必須在繪製之後儘快釋放裝置內容。</span><span class="sxs-lookup"><span data-stu-id="45083-110">Because the common device context is from the cache, the application must always release the device context as soon as possible after drawing.</span></span> <span data-ttu-id="45083-111">一般裝置內容釋出之後，將不再有效，而且應用程式不能嘗試使用它來繪製。</span><span class="sxs-lookup"><span data-stu-id="45083-111">After the common device context is released, it is no longer valid and the application must not attempt to draw with it.</span></span> <span data-ttu-id="45083-112">若要再次繪製，應用程式必須抓取新的一般裝置內容，並在每次在視窗中繪製時，繼續取出並釋放一般裝置內容。</span><span class="sxs-lookup"><span data-stu-id="45083-112">To draw again, the application must retrieve a new common device context, and continue to retrieve and release a common device context each time it draws in the window.</span></span> <span data-ttu-id="45083-113">如果應用程式使用 [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc) 函式來抓取裝置內容控制碼，它必須使用 [**ReleaseDC**](/windows/desktop/api/Winuser/nf-winuser-releasedc) 函式來釋放控制碼。</span><span class="sxs-lookup"><span data-stu-id="45083-113">If the application retrieves the device context handle by using the [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc) function, it must use the [**ReleaseDC**](/windows/desktop/api/Winuser/nf-winuser-releasedc) function to release the handle.</span></span> <span data-ttu-id="45083-114">同樣地，對於每個 [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) 函數，應用程式都必須使用對應的 [**EndPaint**](/windows/desktop/api/Winuser/nf-winuser-endpaint) 函式。</span><span class="sxs-lookup"><span data-stu-id="45083-114">Similarly, for each [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) function, the application must use a corresponding [**EndPaint**](/windows/desktop/api/Winuser/nf-winuser-endpaint) function.</span></span>

<span data-ttu-id="45083-115">當應用程式抓取裝置內容時，系統會調整原點，使其符合工作區的左上角。</span><span class="sxs-lookup"><span data-stu-id="45083-115">When the application retrieves the device context, the system adjusts the origin so that it aligns with the upper left corner of the client area.</span></span> <span data-ttu-id="45083-116">它也會設定裁剪區域，以便將裝置內容的輸出裁剪到工作區。</span><span class="sxs-lookup"><span data-stu-id="45083-116">It also sets the clipping region so that output to the device context is clipped to the client area.</span></span> <span data-ttu-id="45083-117">否則會裁剪任何在用戶端區域以外出現的輸出。</span><span class="sxs-lookup"><span data-stu-id="45083-117">Any output that would otherwise appear outside the client area is clipped.</span></span> <span data-ttu-id="45083-118">如果應用程式使用 [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint)來抓取一般裝置內容，則系統也會在裁剪區域中包含更新區域，以進一步限制輸出。</span><span class="sxs-lookup"><span data-stu-id="45083-118">If the application retrieves the common device context by using [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint), the system also includes the update region in the clipping region to further restrict the output.</span></span>

<span data-ttu-id="45083-119">當應用程式釋放一般裝置內容時，系統會還原裝置內容之屬性的預設值。</span><span class="sxs-lookup"><span data-stu-id="45083-119">When an application releases a common device context, the system restores the default values for the attributes of the device context.</span></span> <span data-ttu-id="45083-120">修改屬性值的應用程式必須在每次抓取通用裝置內容時這麼做。</span><span class="sxs-lookup"><span data-stu-id="45083-120">An application that modifies attribute values must do so each time it retrieves a common device context.</span></span> <span data-ttu-id="45083-121">釋出裝置內容會釋出應用程式可能已選取的繪圖物件，因此應用程式不需要在釋出裝置內容之前釋放這些物件。</span><span class="sxs-lookup"><span data-stu-id="45083-121">Releasing the device context releases any drawing objects the application may have selected into it, so the application need not release these objects before releasing the device context.</span></span> <span data-ttu-id="45083-122">在所有情況下，應用程式絕對不能假設一般裝置內容會在發行後保留非預設的選取專案。</span><span class="sxs-lookup"><span data-stu-id="45083-122">In all cases, an application must never assume that the common device context retains nondefault selections after being released.</span></span>

 

 



