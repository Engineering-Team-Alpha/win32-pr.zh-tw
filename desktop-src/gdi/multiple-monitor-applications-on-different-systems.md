---
description: 若要讓您的多個 monitoraware 應用程式在具有和無多個監視器支援的系統上運作，請使用 Multimon 連結您的應用程式。
ms.assetid: 8667305e-ca76-49cb-878e-07814431e6db
title: 不同系統上的多個監視器應用程式
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ec5d470861136ac9362d986b8647c86abee7021b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "104972636"
---
# <a name="multiple-monitor-applications-on-different-systems"></a><span data-ttu-id="35595-103">不同系統上的多個監視器應用程式</span><span class="sxs-lookup"><span data-stu-id="35595-103">Multiple Monitor Applications on Different Systems</span></span>

<span data-ttu-id="35595-104">若要讓您的多個 monitoraware 應用程式在具有和無多個監視器支援的系統上運作，請使用 Multimon 連結您的應用程式。</span><span class="sxs-lookup"><span data-stu-id="35595-104">To have your multiple monitoraware application work both on systems with and without multiple monitor support, link your application with Multimon.h.</span></span> <span data-ttu-id="35595-105">您也必須 \_ \_ 在剛好一個 C 檔案中定義 COMPILE MULTIMON 存根。</span><span class="sxs-lookup"><span data-stu-id="35595-105">You must also define COMPILE\_MULTIMON\_STUBS in exactly one C file.</span></span> <span data-ttu-id="35595-106">如果系統不支援多個監視器，則會從 [**GetSystemMetrics**](/windows/win32/api/winuser/nf-winuser-getsystemmetrics) 傳回預設值，而多個監視器函式的作用就像只有一個顯示器一樣。</span><span class="sxs-lookup"><span data-stu-id="35595-106">If the system does not support multiple monitors, this returns default values from [**GetSystemMetrics**](/windows/win32/api/winuser/nf-winuser-getsystemmetrics) , and the multiple monitor functions act as if there is only one display.</span></span> <span data-ttu-id="35595-107">在多個監視器系統上，您的應用程式會正常運作。</span><span class="sxs-lookup"><span data-stu-id="35595-107">On multiple monitor systems, your application will work normally.</span></span>

<span data-ttu-id="35595-108">因為負座標可以在 multimonitor 系統中輕鬆進行，所以您應該使用 **get \_ X \_ lParam** 和 **get \_ Y \_ lParam** 宏來取得封裝在 lParam 中的座標。</span><span class="sxs-lookup"><span data-stu-id="35595-108">Because negative coordinates can happen easily in a multimonitor system, you should retrieve coordinates that are packed in the lParam by using the **GET\_X\_LPARAM** and **GET\_Y\_LPARAM** macros.</span></span>

<span data-ttu-id="35595-109">請勿使用大於 SM \_ CXSCREEN 和 sm CYSCREEN 的負座標或座標 \_ 來隱藏視窗。</span><span class="sxs-lookup"><span data-stu-id="35595-109">Do not use negative coordinates or coordinates larger than SM\_CXSCREEN and SM\_CYSCREEN to hide a window.</span></span> <span data-ttu-id="35595-110">使用這些限制來隱藏的 Windows 可能會顯示在另一個監視器上。</span><span class="sxs-lookup"><span data-stu-id="35595-110">Windows that use these limits to hide may appear on another monitor.</span></span> <span data-ttu-id="35595-111">同樣地，請勿使用這些限制讓視窗保持可見，因為這可能會導致視窗貼齊至主要監視器。</span><span class="sxs-lookup"><span data-stu-id="35595-111">Likewise, do not use these limits to keep a window visible because this can cause a window to snap to the primary monitor.</span></span> <span data-ttu-id="35595-112">最好重新檢查現有的應用程式是否有這些問題。</span><span class="sxs-lookup"><span data-stu-id="35595-112">It is best to reexamine existing applications for these problems.</span></span> <span data-ttu-id="35595-113">不過，您可以在主要監視器上執行應用程式，或將主要監視器保留在虛擬螢幕左上角，以將現有應用程式中的問題降至最低。</span><span class="sxs-lookup"><span data-stu-id="35595-113">However, you can minimize problems in existing applications by running the application on the primary monitor or by keeping the primary monitor in the upper-left corner of the virtual screen.</span></span>

<span data-ttu-id="35595-114">請注意，SM \_ CXMAXTRACK 和 sm \_ CYMAXTRACK 是針對桌面所定義，而不只是一個監視器。</span><span class="sxs-lookup"><span data-stu-id="35595-114">Note that SM\_CXMAXTRACK and SM\_CYMAXTRACK are defined for the desktop, not just one monitor.</span></span> <span data-ttu-id="35595-115">使用這些限制的 Windows 可能需要重新定義。</span><span class="sxs-lookup"><span data-stu-id="35595-115">Windows using these limits may need to be redefined.</span></span>

<span data-ttu-id="35595-116">父或相關視窗可能不在與子視窗相同的監視器上。</span><span class="sxs-lookup"><span data-stu-id="35595-116">A parent or related window might not be on the same monitor as a child window.</span></span> <span data-ttu-id="35595-117">若要找出視窗的監視器，應用程式應該使用 [**MonitorFromWindow**](/windows/desktop/api/Winuser/nf-winuser-monitorfromwindow) 函式。</span><span class="sxs-lookup"><span data-stu-id="35595-117">To locate the monitor of a window, applications should use the [**MonitorFromWindow**](/windows/desktop/api/Winuser/nf-winuser-monitorfromwindow) function.</span></span>

<span data-ttu-id="35595-118">若要在所有監視器上顯示幕幕保護，請與 Scrnsave 的最新版本連結。</span><span class="sxs-lookup"><span data-stu-id="35595-118">To have a screen saver display on all monitors, link with the latest version of Scrnsave.lib.</span></span> <span data-ttu-id="35595-119">否則，螢幕保護裝置可能只會出現在主要監視器上，並讓其他監視器保持不變。</span><span class="sxs-lookup"><span data-stu-id="35595-119">Otherwise, the screen saver may only appear on the primary monitor and leave the other monitors untouched.</span></span> <span data-ttu-id="35595-120">與最新 Scrnsave 連結的螢幕保護裝置可在單一和多個監視器系統上運作。</span><span class="sxs-lookup"><span data-stu-id="35595-120">Screen savers linked with the latest Scrnsave.lib will work on both single and multiple monitor systems.</span></span> <span data-ttu-id="35595-121">若要在每個監視器上擁有不同的螢幕保護裝置，請使用多個監視功能來個別處理每個監視器。</span><span class="sxs-lookup"><span data-stu-id="35595-121">To have a different screen saver on each monitor, use the multiple monitor functions to handle each monitor separately.</span></span>

<span data-ttu-id="35595-122">以絕對座標（例如平板電腦）將座標傳遞給系統的輸入裝置，會將其游標輸入限制為主要監視器。</span><span class="sxs-lookup"><span data-stu-id="35595-122">Input devices that deliver coordinates to the system in absolute coordinates, such as tablets, have their cursor input restricted to the primary monitor.</span></span> <span data-ttu-id="35595-123">若要切換監視器之間的平板電腦輸入，請參閱 OEM 的指示。</span><span class="sxs-lookup"><span data-stu-id="35595-123">To switch tablet input between monitors, see the instructions from the OEM.</span></span>

<span data-ttu-id="35595-124">若要將以絕對座標傳送的滑鼠輸入對應至整個虛擬畫面，請使用[](/windows/win32/api/winuser/ns-winuser-input)具有 MOUSEEVENTF \_ 絕對和 MOUSEEVENTF VIRTUALDESKTOP 的輸入結構 \_ 。</span><span class="sxs-lookup"><span data-stu-id="35595-124">To map mouse input that is sent in absolute coordinates to the entire virtual screen, use the [**INPUT**](/windows/win32/api/winuser/ns-winuser-input) structure with MOUSEEVENTF\_ABSOLUTE and MOUSEEVENTF\_VIRTUALDESKTOP.</span></span>

<span data-ttu-id="35595-125">[**BitBlt**](/windows/desktop/api/Wingdi/nf-wingdi-bitblt)函數適用于多個監視系統。</span><span class="sxs-lookup"><span data-stu-id="35595-125">The [**BitBlt**](/windows/desktop/api/Wingdi/nf-wingdi-bitblt) function works well for multiple monitor systems.</span></span> <span data-ttu-id="35595-126">但是，如果來源和目的地裝置內容不同， [**MaskBlt**](/windows/desktop/api/Wingdi/nf-wingdi-maskblt)、 [**PlgBlt**](/windows/desktop/api/Wingdi/nf-wingdi-plgblt)、 [**StretchBlt**](/windows/desktop/api/Wingdi/nf-wingdi-stretchblt)和 [**TransparentBlt**](/windows/desktop/api/WinGdi/nf-wingdi-transparentblt) 函數將會失敗。</span><span class="sxs-lookup"><span data-stu-id="35595-126">However, the [**MaskBlt**](/windows/desktop/api/Wingdi/nf-wingdi-maskblt), [**PlgBlt**](/windows/desktop/api/Wingdi/nf-wingdi-plgblt), [**StretchBlt**](/windows/desktop/api/Wingdi/nf-wingdi-stretchblt), and [**TransparentBlt**](/windows/desktop/api/WinGdi/nf-wingdi-transparentblt) functions will fail if the source and destination device contexts are different.</span></span>

 

 
