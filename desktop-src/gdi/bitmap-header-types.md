---
description: 點陣圖標頭類型
ms.assetid: 6df4655a-f707-4893-b6e6-f7e4d7f67b4e
title: 點陣圖標頭類型
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5910b0fb5be1166e807db1f3362186a206abc2b7
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "103848576"
---
# <a name="bitmap-header-types"></a><span data-ttu-id="2be6e-103">點陣圖標頭類型</span><span class="sxs-lookup"><span data-stu-id="2be6e-103">Bitmap Header Types</span></span>

<span data-ttu-id="2be6e-104">點陣圖有四個基本的標頭類型：</span><span class="sxs-lookup"><span data-stu-id="2be6e-104">The bitmap has four basic header types:</span></span>

-   [<span data-ttu-id="2be6e-105">**BITMAPCOREHEADER**</span><span class="sxs-lookup"><span data-stu-id="2be6e-105">**BITMAPCOREHEADER**</span></span>](/windows/win32/api/wingdi/ns-wingdi-bitmapcoreheader)
-   <span data-ttu-id="2be6e-106">[**BITMAPINFOHEADER**](/previous-versions//dd183376(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="2be6e-106">[**BITMAPINFOHEADER**](/previous-versions//dd183376(v=vs.85))</span></span>
-   [<span data-ttu-id="2be6e-107">**BITMAPV4HEADER**</span><span class="sxs-lookup"><span data-stu-id="2be6e-107">**BITMAPV4HEADER**</span></span>](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv4header)
-   [<span data-ttu-id="2be6e-108">**BITMAPV5HEADER**</span><span class="sxs-lookup"><span data-stu-id="2be6e-108">**BITMAPV5HEADER**</span></span>](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header)

<span data-ttu-id="2be6e-109">點陣圖標頭的四種類型會以 **大小** 成員來區分，也就是每個結構中的第一個 **DWORD** 。</span><span class="sxs-lookup"><span data-stu-id="2be6e-109">The four types of bitmap headers are differentiated by the **Size** member, which is the first **DWORD** in each of the structures.</span></span>

<span data-ttu-id="2be6e-110">[**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header)結構是延伸的 [**BITMAPV4HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv4header)結構，也就是延伸的 [**BITMAPINFOHEADER**](/previous-versions//dd183376(v=vs.85))結構。</span><span class="sxs-lookup"><span data-stu-id="2be6e-110">The [**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header) structure is an extended [**BITMAPV4HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv4header) structure, which is an extended [**BITMAPINFOHEADER**](/previous-versions//dd183376(v=vs.85)) structure.</span></span> <span data-ttu-id="2be6e-111">不過， **BITMAPINFOHEADER** 和 [**BITMAPCOREHEADER**](/windows/win32/api/wingdi/ns-wingdi-bitmapcoreheader) 只有與其他點陣圖標頭結構共通的 **大小** 成員。</span><span class="sxs-lookup"><span data-stu-id="2be6e-111">However, the **BITMAPINFOHEADER** and [**BITMAPCOREHEADER**](/windows/win32/api/wingdi/ns-wingdi-bitmapcoreheader) have only the **Size** member in common with other bitmap header structures.</span></span>

<span data-ttu-id="2be6e-112">[**BITMAPCOREHEADER**](/windows/win32/api/wingdi/ns-wingdi-bitmapcoreheader)和 [**BITMAPV4HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv4header)格式分別由 [**BITMAPINFOHEADER**](/previous-versions//dd183376(v=vs.85))和 [**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header)格式取代。</span><span class="sxs-lookup"><span data-stu-id="2be6e-112">The [**BITMAPCOREHEADER**](/windows/win32/api/wingdi/ns-wingdi-bitmapcoreheader) and [**BITMAPV4HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv4header) formats have been superseded by [**BITMAPINFOHEADER**](/previous-versions//dd183376(v=vs.85)) and [**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header) formats, respectively.</span></span> <span data-ttu-id="2be6e-113">提供 **BITMAPCOREHEADER** 和 **BITMAPV4HEADER** 格式，以提供完整性和回溯相容性。</span><span class="sxs-lookup"><span data-stu-id="2be6e-113">The **BITMAPCOREHEADER** and **BITMAPV4HEADER** formats are presented for completeness and backward compatibility.</span></span>

<span data-ttu-id="2be6e-114">DIB 的格式如下 (如需詳細資訊，請參閱 [點陣圖儲存體](bitmap-storage.md) ) ：</span><span class="sxs-lookup"><span data-stu-id="2be6e-114">The format for a DIB is the following (for more information, see [Bitmap Storage](bitmap-storage.md) ):</span></span>

-   <span data-ttu-id="2be6e-115">[**BITMAPFILEHEADER**](/windows/win32/api/wingdi/ns-wingdi-bitmapfileheader)結構</span><span class="sxs-lookup"><span data-stu-id="2be6e-115">a [**BITMAPFILEHEADER**](/windows/win32/api/wingdi/ns-wingdi-bitmapfileheader) structure</span></span>
-   <span data-ttu-id="2be6e-116">可能是 [**BITMAPCOREHEADER**](/windows/win32/api/wingdi/ns-wingdi-bitmapcoreheader)、 [**BITMAPINFOHEADER**](/previous-versions//dd183376(v=vs.85))、 [**BITMAPV4HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv4header)或 [**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header) 結構。</span><span class="sxs-lookup"><span data-stu-id="2be6e-116">either a [**BITMAPCOREHEADER**](/windows/win32/api/wingdi/ns-wingdi-bitmapcoreheader), a [**BITMAPINFOHEADER**](/previous-versions//dd183376(v=vs.85)), a [**BITMAPV4HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv4header), or a [**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header) structure.</span></span>
-   <span data-ttu-id="2be6e-117">選擇性的色彩表，也就是一組 [**RGBQUAD**](/windows/win32/api/wingdi/ns-wingdi-rgbquad) 結構或一組 [**RGBTRIPLE**](/windows/win32/api/wingdi/ns-wingdi-rgbtriple) 結構。</span><span class="sxs-lookup"><span data-stu-id="2be6e-117">an optional color table, which is either a set of [**RGBQUAD**](/windows/win32/api/wingdi/ns-wingdi-rgbquad) structures or a set of [**RGBTRIPLE**](/windows/win32/api/wingdi/ns-wingdi-rgbtriple) structures.</span></span>
-   <span data-ttu-id="2be6e-118">點陣圖資料</span><span class="sxs-lookup"><span data-stu-id="2be6e-118">the bitmap data</span></span>
-   <span data-ttu-id="2be6e-119">選用的設定檔資料</span><span class="sxs-lookup"><span data-stu-id="2be6e-119">optional Profile data</span></span>

<span data-ttu-id="2be6e-120">色彩表描述圖元值如何對應至 RGB 色彩值。</span><span class="sxs-lookup"><span data-stu-id="2be6e-120">A color table describes how pixel values correspond to RGB color values.</span></span> <span data-ttu-id="2be6e-121">RGB 是一種模型，用來描述發出光線所產生的色彩。</span><span class="sxs-lookup"><span data-stu-id="2be6e-121">RGB is a model for describing colors that are produced by emitting light.</span></span>

<span data-ttu-id="2be6e-122">*設定檔資料* 指的是設定檔名稱 (連結設定檔) 或實際的設定檔位 (內嵌設定檔) 。</span><span class="sxs-lookup"><span data-stu-id="2be6e-122">*Profile data* refers to either the profile file name (linked profile) or the actual profile bits (embedded profile).</span></span> <span data-ttu-id="2be6e-123">檔案格式會將設定檔資料放在檔案的結尾。</span><span class="sxs-lookup"><span data-stu-id="2be6e-123">The file format places the profile data at the end of the file.</span></span> <span data-ttu-id="2be6e-124">設定檔資料會放在色彩表 (（如果有) 的話）的正上方。</span><span class="sxs-lookup"><span data-stu-id="2be6e-124">The profile data is placed just after the color table (if present).</span></span> <span data-ttu-id="2be6e-125">但是，如果函式收到封裝的 DIB，則設定檔資料會出現在點陣圖位之後，例如檔案格式。</span><span class="sxs-lookup"><span data-stu-id="2be6e-125">However, if the function receives a packed DIB, the profile data comes after the bitmap bits, like in the file format.</span></span>

<span data-ttu-id="2be6e-126">設定檔資料只會存在於 [**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header) 結構，其中 **BV5CSTYPE** 是設定檔 \_ 連結或設定檔 \_ 內嵌。</span><span class="sxs-lookup"><span data-stu-id="2be6e-126">Profile data will only exist for [**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header) structures where **bV5CSType** is PROFILE\_LINKED or PROFILE\_EMBEDDED.</span></span> <span data-ttu-id="2be6e-127">針對接收已封裝 Dib 的函式，設定檔資料會出現在點陣圖資料之後。</span><span class="sxs-lookup"><span data-stu-id="2be6e-127">For functions that receive packed DIBs, the profile data comes after the bitmap data.</span></span>

<span data-ttu-id="2be6e-128">調色盤裝置是使用調色板指派色彩的任何裝置。</span><span class="sxs-lookup"><span data-stu-id="2be6e-128">A palettized device is any device that uses palettes to assign colors.</span></span> <span data-ttu-id="2be6e-129">調色盤裝置的典型範例是以8位色彩深度執行的顯示 (也就是256色彩) 。</span><span class="sxs-lookup"><span data-stu-id="2be6e-129">The classic example of a palettized device is a display running in 8 bit color depth (that is, 256 colors).</span></span> <span data-ttu-id="2be6e-130">此模式中的顯示會使用小型色彩表將色彩指派給點陣圖。</span><span class="sxs-lookup"><span data-stu-id="2be6e-130">The display in this mode uses a small color table to assign colors to a bitmap.</span></span> <span data-ttu-id="2be6e-131">點陣圖中的色彩會指派給裝置所使用之調色板中最接近的色彩。</span><span class="sxs-lookup"><span data-stu-id="2be6e-131">The colors in a bitmap are assigned to the closest color in the palette that the device is using.</span></span> <span data-ttu-id="2be6e-132">調色盤裝置不會建立最佳的調色板來顯示點陣圖;它只會使用目前調色板中的任何內容。</span><span class="sxs-lookup"><span data-stu-id="2be6e-132">The palettized device does not create an optimal palette for displaying the bitmap; it simply uses whatever is in the current palette.</span></span> <span data-ttu-id="2be6e-133">應用程式會負責建立調色板，並將其選取到系統中。</span><span class="sxs-lookup"><span data-stu-id="2be6e-133">Applications are responsible for creating a palette and selecting it into the system.</span></span> <span data-ttu-id="2be6e-134">一般情況下，每圖元 16-、24-和32位 (bpp) 點陣圖不包含色彩表 (也稱為</span><span class="sxs-lookup"><span data-stu-id="2be6e-134">In general, 16-, 24-, and 32-bits-per-pixel (bpp) bitmaps do not contain color tables (a.k.a.</span></span> <span data-ttu-id="2be6e-135">點陣圖) 的最佳調色板;在此情況下，應用程式會負責產生最佳的調色板。</span><span class="sxs-lookup"><span data-stu-id="2be6e-135">optimal palettes for the bitmap); the application is responsible for generating a optimal palette in this case.</span></span> <span data-ttu-id="2be6e-136">不過，16-、24和 32-bpp 點陣圖可以包含這類適合在調色盤裝置上顯示的最佳色彩表;在此情況下，應用程式只需要根據點陣圖檔案中顯示的色彩表來建立調色板。</span><span class="sxs-lookup"><span data-stu-id="2be6e-136">However, 16-, 24-, and 32-bpp bitmaps can contain such optimal color tables for displaying on palettized devices; in this case the application just needs to create a palette based off the color table present in the bitmap file.</span></span>

<span data-ttu-id="2be6e-137">1、4或 8 bpp 的點陣圖必須有色彩表，而且大小上限是以 bpp 為基礎。</span><span class="sxs-lookup"><span data-stu-id="2be6e-137">Bitmaps that are 1, 4, or 8 bpp must have a color table with a maximum size based on the bpp.</span></span> <span data-ttu-id="2be6e-138">1、4和 8 bpp 點陣圖的大小上限為2到 bpp 的威力。</span><span class="sxs-lookup"><span data-stu-id="2be6e-138">The maximum size for 1, 4, and 8 bpp bitmaps is 2 to the power of the bpp.</span></span> <span data-ttu-id="2be6e-139">因此，1 bpp 點陣圖最多有兩個色彩，4 bpp 點陣圖最多16個色彩，而 8 bpp 點陣圖最多為256個色彩。</span><span class="sxs-lookup"><span data-stu-id="2be6e-139">Thus, a 1 bpp bitmap has a maximum of two colors, the 4 bpp bitmap has a maximum of 16 colors, and the 8 bpp bitmap has a maximum of 256 colors.</span></span>

<span data-ttu-id="2be6e-140">16、24或 32-bpp 的點陣圖不需要色彩表，但可能會讓它們指定調色盤裝置的色彩。</span><span class="sxs-lookup"><span data-stu-id="2be6e-140">Bitmaps that are 16-, 24-, or 32-bpp do not require color tables, but may have them to specify colors for palettized devices.</span></span> <span data-ttu-id="2be6e-141">如果有適用于16、24或 32-bpp 點陣圖的色彩表， **biClrUsed** 成員會指定色彩資料表的大小，而色彩資料表在其中必須有許多色彩。</span><span class="sxs-lookup"><span data-stu-id="2be6e-141">If a color table is present for 16-, 24-, or 32-bpp bitmap, the **biClrUsed** member specifies the size of the color table and the color table must have that many colors in it.</span></span> <span data-ttu-id="2be6e-142">如果 **biClrUsed** 為零，則不會有色彩表。</span><span class="sxs-lookup"><span data-stu-id="2be6e-142">If **biClrUsed** is zero, there is no color table.</span></span>

<span data-ttu-id="2be6e-143">BI 位點陣圖的 red、綠和 blue 等位遮罩會 \_ 立即遵循 [**BITMAPINFOHEADER**](/previous-versions//dd183376(v=vs.85))、 [**BITMAPV4HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv4header)和 [**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header) 結構。</span><span class="sxs-lookup"><span data-stu-id="2be6e-143">The red, green, and blue bitfield masks for BI\_BITFIELD bitmaps immediately follow the [**BITMAPINFOHEADER**](/previous-versions//dd183376(v=vs.85)), [**BITMAPV4HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv4header), and [**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header) structures.</span></span> <span data-ttu-id="2be6e-144">**BITMAPV4HEADER** 和 **BITMAPV5HEADER** 結構包含紅色、綠色和藍色遮罩的其他成員，如下所示。</span><span class="sxs-lookup"><span data-stu-id="2be6e-144">The **BITMAPV4HEADER** and **BITMAPV5HEADER** structures contain additional members for red, green, and blue masks as follows.</span></span>



| <span data-ttu-id="2be6e-145">成員</span><span class="sxs-lookup"><span data-stu-id="2be6e-145">Member</span></span>        | <span data-ttu-id="2be6e-146">意義</span><span class="sxs-lookup"><span data-stu-id="2be6e-146">Meaning</span></span>                                                                                                                        |
|---------------|--------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="2be6e-147">**RedMask**</span><span class="sxs-lookup"><span data-stu-id="2be6e-147">**RedMask**</span></span>   | <span data-ttu-id="2be6e-148">指定每個圖元之紅色元件的色彩遮罩，只有當 **壓縮** 成員設為 BI 位欄位時才有效 \_ 。</span><span class="sxs-lookup"><span data-stu-id="2be6e-148">Color mask that specifies the red component of each pixel, valid only if the **Compression** member is set to BI\_BITFIELDS.</span></span>   |
| <span data-ttu-id="2be6e-149">**GreenMask**</span><span class="sxs-lookup"><span data-stu-id="2be6e-149">**GreenMask**</span></span> | <span data-ttu-id="2be6e-150">指定每個圖元綠色元件的色彩遮罩，只有當 **壓縮** 成員設為 BI 位欄位時才有效 \_ 。</span><span class="sxs-lookup"><span data-stu-id="2be6e-150">Color mask that specifies the green component of each pixel, valid only if the **Compression** member is set to BI\_BITFIELDS.</span></span> |
| <span data-ttu-id="2be6e-151">**BlueMask**</span><span class="sxs-lookup"><span data-stu-id="2be6e-151">**BlueMask**</span></span>  | <span data-ttu-id="2be6e-152">指定每個圖元藍色元件的色彩遮罩，只有當 **壓縮** 成員設為 BI 位欄位時才有效 \_ 。</span><span class="sxs-lookup"><span data-stu-id="2be6e-152">Color mask that specifies the blue component of each pixel, valid only if the **Compression** member is set to BI\_BITFIELDS.</span></span>  |



 

<span data-ttu-id="2be6e-153">當 [**BITMAPINFOHEADER**](/previous-versions//dd183376(v=vs.85))的 **biCompression** 成員設定為 BI 位欄位， \_ 且函式收到 **LPBITMAPINFO** 類型的引數時，色彩遮罩會緊接在標頭後面。</span><span class="sxs-lookup"><span data-stu-id="2be6e-153">When the **biCompression** member of [**BITMAPINFOHEADER**](/previous-versions//dd183376(v=vs.85)) is set to BI\_BITFIELDS and the function receives an argument of type **LPBITMAPINFO**, the color masks will immediately follow the header.</span></span> <span data-ttu-id="2be6e-154">色彩表（如果有的話）會遵循色彩遮罩。</span><span class="sxs-lookup"><span data-stu-id="2be6e-154">The color table, if present, will follow the color masks.</span></span> <span data-ttu-id="2be6e-155">[**BITMAPCOREHEADER**](/windows/win32/api/wingdi/ns-wingdi-bitmapcoreheader) 點陣圖不支援色遮罩。</span><span class="sxs-lookup"><span data-stu-id="2be6e-155">[**BITMAPCOREHEADER**](/windows/win32/api/wingdi/ns-wingdi-bitmapcoreheader) bitmaps do not support color masks.</span></span>

<span data-ttu-id="2be6e-156">依預設，點陣圖資料的格式為下而下。</span><span class="sxs-lookup"><span data-stu-id="2be6e-156">By default, bitmap data is bottom-up in its format.</span></span> <span data-ttu-id="2be6e-157">下一步表示點陣圖資料中的第一個掃描行是要顯示的最後一個掃描行。</span><span class="sxs-lookup"><span data-stu-id="2be6e-157">Bottom-up means that the first scan line in the bitmap data is the last scan line to be displayed.</span></span> <span data-ttu-id="2be6e-158">例如，10圖元 x 10 圖元點陣圖之點陣圖資料<sup>第</sup>0 個掃描行的<sup>第0個圖元，</sup>將是顯示或列印影像的<sup>第9個</sup>掃描行的<sup>第</sup>0 個圖元。</span><span class="sxs-lookup"><span data-stu-id="2be6e-158">For example, the 0<sup>th</sup> pixel of the 0<sup>th</sup> scan line of the bitmap data of a 10-pixel by 10-pixel bitmap will be the 0<sup>th</sup> pixel of the 9<sup>th</sup> scan line of the displayed or printed image.</span></span> <span data-ttu-id="2be6e-159">執行長度編碼 (RLE) 格式點陣圖和 [**BITMAPCOREHEADER**](/windows/win32/api/wingdi/ns-wingdi-bitmapcoreheader) 點陣圖不可以是由上而下的點陣圖。</span><span class="sxs-lookup"><span data-stu-id="2be6e-159">Run-length encoded (RLE) format bitmaps and [**BITMAPCOREHEADER**](/windows/win32/api/wingdi/ns-wingdi-bitmapcoreheader) bitmaps cannot be top-down bitmaps.</span></span> <span data-ttu-id="2be6e-160">掃描行是 **DWORD** 對齊的，但以 RLE 壓縮的點陣圖除外。</span><span class="sxs-lookup"><span data-stu-id="2be6e-160">The scan lines are **DWORD** aligned, except for RLE-compressed bitmaps.</span></span> <span data-ttu-id="2be6e-161">它們必須以位元組為單位填補，以位元組為單位，但不能平均整除四個，但不包括 RLE 壓縮點陣圖。</span><span class="sxs-lookup"><span data-stu-id="2be6e-161">They must be padded for scan line widths, in bytes, that are not evenly divisible by four, except for RLE compressed bitmaps.</span></span> <span data-ttu-id="2be6e-162">例如，10 x 10 圖元 24 bpp 點陣圖在每個掃描行的結尾都有兩個填補位元組。</span><span class="sxs-lookup"><span data-stu-id="2be6e-162">For example, a 10- by 10-pixel 24-bpp bitmap will have two padding bytes at the end of each scan line.</span></span>

 

 
