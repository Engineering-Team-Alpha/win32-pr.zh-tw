---
description: 邏輯調色板是應用程式建立並與指定的裝置內容產生關聯的色調色板。
ms.assetid: 7cc86771-237d-4539-8f48-2474edb764a4
title: 邏輯調色板
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 597e049c4320ff3ac30099e767c35a3438237904
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "104972656"
---
# <a name="logical-palette"></a><span data-ttu-id="3db71-103">邏輯調色板</span><span class="sxs-lookup"><span data-stu-id="3db71-103">Logical Palette</span></span>

<span data-ttu-id="3db71-104">*邏輯調色板* 是應用程式建立並與指定的裝置內容產生關聯的色調色板。</span><span class="sxs-lookup"><span data-stu-id="3db71-104">A *logical palette* is a color palette that an application creates and associates with a given device context.</span></span> <span data-ttu-id="3db71-105">邏輯調色板可讓應用程式定義和使用符合其特定需求的色彩。</span><span class="sxs-lookup"><span data-stu-id="3db71-105">Logical palettes let applications define and use colors that meet their specific needs.</span></span> <span data-ttu-id="3db71-106">應用程式可以建立任意數目的邏輯調色板，將它們用於不同的裝置內容，或在它們之間切換以取得單一裝置內容。</span><span class="sxs-lookup"><span data-stu-id="3db71-106">Applications can create any number of logical palettes, using them for separate device contexts or switching between them for a single device context.</span></span> <span data-ttu-id="3db71-107">應用程式可以建立的最大調色板數目取決於系統的資源。</span><span class="sxs-lookup"><span data-stu-id="3db71-107">The maximum number of palettes that an application can create depends on the resources of the system.</span></span>

<span data-ttu-id="3db71-108">應用程式會使用 [**CreatePalette**](/windows/desktop/api/Wingdi/nf-wingdi-createpalette) 函數來建立邏輯調色板。</span><span class="sxs-lookup"><span data-stu-id="3db71-108">An application creates a logical palette by using the [**CreatePalette**](/windows/desktop/api/Wingdi/nf-wingdi-createpalette) function.</span></span> <span data-ttu-id="3db71-109">應用程式會填滿 [**LOGPALETTE**](/windows/win32/api/wingdi/ns-wingdi-logpalette) 結構，此結構會指定專案數和每個專案的色彩值，然後應用程式會將結構傳遞至 **CreatePalette**。</span><span class="sxs-lookup"><span data-stu-id="3db71-109">The application fills a [**LOGPALETTE**](/windows/win32/api/wingdi/ns-wingdi-logpalette) structure, which specifies the number of entries and the color values for each entry, and then the application passes the structure to **CreatePalette**.</span></span> <span data-ttu-id="3db71-110">此函式會傳回應用程式在所有後續作業中用來識別調色板的調色板控制碼。</span><span class="sxs-lookup"><span data-stu-id="3db71-110">The function returns a palette handle that the application uses in all subsequent operations to identify the palette.</span></span> <span data-ttu-id="3db71-111">若要在邏輯調色板中使用色彩，應用程式會使用 [**SelectPalette**](/windows/desktop/api/Wingdi/nf-wingdi-selectpalette) 函式將選擇區選取到裝置內容中，然後使用 [**RealizePalette**](/windows/desktop/api/Wingdi/nf-wingdi-realizepalette) 函式來瞭解該調色板。</span><span class="sxs-lookup"><span data-stu-id="3db71-111">To use colors in the logical palette, the application selects the palette into a device context by using the [**SelectPalette**](/windows/desktop/api/Wingdi/nf-wingdi-selectpalette) function and then realizes the palette by using the [**RealizePalette**](/windows/desktop/api/Wingdi/nf-wingdi-realizepalette) function.</span></span> <span data-ttu-id="3db71-112">當邏輯調色板可供使用時，就可以使用調色板中的色彩。</span><span class="sxs-lookup"><span data-stu-id="3db71-112">The colors in the palette are available as soon as the logical palette is realized.</span></span>

<span data-ttu-id="3db71-113">應用程式應該將其邏輯調色板的大小限制為只有足夠的專案，才能代表所需的色彩。</span><span class="sxs-lookup"><span data-stu-id="3db71-113">An application should limit the size of its logical palettes to just enough entries to represent the colors needed.</span></span> <span data-ttu-id="3db71-114">應用程式無法建立大於最大調色板大小的邏輯調色板，也就是與裝置相關的值。</span><span class="sxs-lookup"><span data-stu-id="3db71-114">Applications cannot create logical palettes larger than the maximum palette size, a device-dependent value.</span></span> <span data-ttu-id="3db71-115">應用程式可以使用 [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) 函數來取得 SIZEPALETTE 值，以取得大小上限。</span><span class="sxs-lookup"><span data-stu-id="3db71-115">Applications can obtain the maximum size by using the [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) function to retrieve the SIZEPALETTE value.</span></span>

<span data-ttu-id="3db71-116">雖然應用程式可以為邏輯調色板中的指定專案指定任何色彩值，但並非所有色彩都能由指定的裝置產生。</span><span class="sxs-lookup"><span data-stu-id="3db71-116">Although an application can specify any color value for a given entry in a logical palette, not all colors can be generated by the given device.</span></span> <span data-ttu-id="3db71-117">系統不會提供方法來找出支援的色彩，但應用程式可以藉由抓取裝置的色彩解析度，來探索這些色彩的總數目。</span><span class="sxs-lookup"><span data-stu-id="3db71-117">The system does not provide a way to discover which colors are supported, but the application can discover the total number of these colors by retrieving the color resolution of the device.</span></span> <span data-ttu-id="3db71-118">色彩解析度（以每圖元的色彩位指定）等於 [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) 函數所傳回的 COLORRES 值。</span><span class="sxs-lookup"><span data-stu-id="3db71-118">The color resolution, specified in color bits per pixel, is equal to the COLORRES value returned by the [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) function.</span></span> <span data-ttu-id="3db71-119">具有18色解析度的裝置具有262144可能的色彩。</span><span class="sxs-lookup"><span data-stu-id="3db71-119">A device that has a color resolution of 18 has 262,144 possible colors.</span></span> <span data-ttu-id="3db71-120">如果應用程式要求不支援的色彩，系統會選擇適當的近似值。</span><span class="sxs-lookup"><span data-stu-id="3db71-120">If an application requests a color that is not supported, the system chooses an appropriate approximation.</span></span>

<span data-ttu-id="3db71-121">建立邏輯調色板之後，應用程式就可以使用 [**SetPaletteEntries**](/windows/desktop/api/Wingdi/nf-wingdi-setpaletteentries) 函式來變更調色板中的色彩。</span><span class="sxs-lookup"><span data-stu-id="3db71-121">Once a logical palette is created, an application can change colors in the palette by using the [**SetPaletteEntries**](/windows/desktop/api/Wingdi/nf-wingdi-setpaletteentries) function.</span></span> <span data-ttu-id="3db71-122">如果已選取並實現邏輯調色板，變更調色板不會立即影響所顯示的色彩。</span><span class="sxs-lookup"><span data-stu-id="3db71-122">If the logical palette has been selected and realized, changing the palette does not immediately affect the colors being displayed.</span></span> <span data-ttu-id="3db71-123">應用程式必須使用 [**UnrealizeObject**](/windows/desktop/api/Wingdi/nf-wingdi-unrealizeobject) 和 [**RealizePalette**](/windows/desktop/api/Wingdi/nf-wingdi-realizepalette) 函數來更新色彩。</span><span class="sxs-lookup"><span data-stu-id="3db71-123">The application must use the [**UnrealizeObject**](/windows/desktop/api/Wingdi/nf-wingdi-unrealizeobject) and [**RealizePalette**](/windows/desktop/api/Wingdi/nf-wingdi-realizepalette) functions to update the colors.</span></span> <span data-ttu-id="3db71-124">在某些情況下，應用程式可能需要取消選取、unrealize、選取並實現邏輯調色板，以確保色彩會依照要求的方式更新。</span><span class="sxs-lookup"><span data-stu-id="3db71-124">In some cases, the application may need to deselect, unrealize, select, and realize the logical palette to ensure that the colors are updated exactly as requested.</span></span> <span data-ttu-id="3db71-125">如果應用程式在一個以上的裝置內容中選取一個邏輯調色板，則對邏輯元件的變更將會影響所選取的所有裝置內容。</span><span class="sxs-lookup"><span data-stu-id="3db71-125">If an application selects a logical palette into more than one device context, changes to the logical palette affect all device contexts for which it is selected.</span></span>

<span data-ttu-id="3db71-126">應用程式可以使用 [**ResizePalette**](/windows/desktop/api/Wingdi/nf-wingdi-resizepalette) 函數來變更邏輯調色板中的專案數。</span><span class="sxs-lookup"><span data-stu-id="3db71-126">An application can change the number of entries in a logical palette by using the [**ResizePalette**](/windows/desktop/api/Wingdi/nf-wingdi-resizepalette) function.</span></span> <span data-ttu-id="3db71-127">如果應用程式縮減大小，其餘的專案就不會變更。</span><span class="sxs-lookup"><span data-stu-id="3db71-127">If the application reduces the size, the remaining entries are unchanged.</span></span> <span data-ttu-id="3db71-128">如果應用程式擴充大小，系統會將每個新專案的色彩設定為黑色 (0、0、0) ，並將旗標設定為零。</span><span class="sxs-lookup"><span data-stu-id="3db71-128">If the application extends the size, the system sets the color for each new entry to black (0, 0, 0) and the flag to zero.</span></span>

<span data-ttu-id="3db71-129">應用程式可以使用 [**GetPaletteEntries**](/windows/desktop/api/Wingdi/nf-wingdi-getpaletteentries) 函式，以取得指定邏輯調色板中專案的色彩和旗標值。</span><span class="sxs-lookup"><span data-stu-id="3db71-129">An application can retrieve the color and flag values for entries in a given logical palette by using the [**GetPaletteEntries**](/windows/desktop/api/Wingdi/nf-wingdi-getpaletteentries) function.</span></span> <span data-ttu-id="3db71-130">應用程式可以使用 [**GetNearestPaletteIndex**](/windows/desktop/api/Wingdi/nf-wingdi-getnearestpaletteindex) 函式，以取得最接近指定之色彩值的指定邏輯調色板中專案的索引。</span><span class="sxs-lookup"><span data-stu-id="3db71-130">An application can retrieve the index for the entry in a given logical palette that most closely matches a specified color value by using the [**GetNearestPaletteIndex**](/windows/desktop/api/Wingdi/nf-wingdi-getnearestpaletteindex) function.</span></span>

<span data-ttu-id="3db71-131">當應用程式不再需要邏輯元件時，可以使用 [**DeleteObject**](/windows/desktop/api/Wingdi/nf-wingdi-deleteobject) 函數將它刪除。</span><span class="sxs-lookup"><span data-stu-id="3db71-131">When an application no longer needs a logical palette, it can delete it by using the [**DeleteObject**](/windows/desktop/api/Wingdi/nf-wingdi-deleteobject) function.</span></span> <span data-ttu-id="3db71-132">在刪除調色板之前，應用程式必須確定邏輯調色板不再被選取到裝置內容中。</span><span class="sxs-lookup"><span data-stu-id="3db71-132">The application must make sure the logical palette is no longer selected into a device context before deleting the palette.</span></span>

 

 



