---
description: 有幾個字型和文字輸出函數具有指定文字輸出字串長度的參數。 典型的範例是 DrawTextEx 的 cchText 參數。
ms.assetid: 695fd0f9-abd4-4666-acad-2c409624ddc6
title: 指定文字輸出字串的長度
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2c120026d1b65170b6fe35bc65400280f6f1ffa5
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/08/2021
ms.locfileid: "103945015"
---
# <a name="specifying-length-of-text-output-string"></a><span data-ttu-id="b5e9d-104">指定文字輸出字串的長度</span><span class="sxs-lookup"><span data-stu-id="b5e9d-104">Specifying length of text-output string</span></span>

<span data-ttu-id="b5e9d-105">有幾個字型和文字輸出函數具有指定文字輸出字串長度的參數。</span><span class="sxs-lookup"><span data-stu-id="b5e9d-105">Several of the font and text-output functions have a parameter that specifies the length of the text-output string.</span></span> <span data-ttu-id="b5e9d-106">典型的範例是 [**DrawTextEx**](/windows/desktop/api/Winuser/nf-winuser-drawtextexa)的 *cchText* 參數。</span><span class="sxs-lookup"><span data-stu-id="b5e9d-106">A typical example is the *cchText* parameter of [**DrawTextEx**](/windows/desktop/api/Winuser/nf-winuser-drawtextexa).</span></span>

<span data-ttu-id="b5e9d-107">這些函式中的每一個都有 "ANSI" 版本和 Unicode 版本 (例如， [**DrawTextExA**](/windows/desktop/api/Winuser/nf-winuser-drawtextexa) 和 **DrawTextExW** 分別) 。</span><span class="sxs-lookup"><span data-stu-id="b5e9d-107">Each of these functions has both an "ANSI" version and a Unicode version (for example, [**DrawTextExA**](/windows/desktop/api/Winuser/nf-winuser-drawtextexa) and **DrawTextExW**, respectively).</span></span> <span data-ttu-id="b5e9d-108">針對每個函式的「ANSI」版本，長度會指定為位元組計數，而 Unicode 函數則會指定為文字計數。</span><span class="sxs-lookup"><span data-stu-id="b5e9d-108">For the "ANSI" version of each function, the length is specified as a BYTE count and for the Unicode function it is specified as a WORD count.</span></span>

<span data-ttu-id="b5e9d-109">傳統的是將此視為「字元計數」。</span><span class="sxs-lookup"><span data-stu-id="b5e9d-109">It is traditional to think of this as a "character count".</span></span> <span data-ttu-id="b5e9d-110">這對許多語言（包括英文）來說通常是正確的，但一般並不精確。</span><span class="sxs-lookup"><span data-stu-id="b5e9d-110">That is generally accurate for many languages, including English, but it is not accurate in general.</span></span> <span data-ttu-id="b5e9d-111">在 "ANSI" 字串中， [SBCS](../intl/single-byte-character-sets.md) 字碼頁中的字元各採用一個位元組，但 [DBCS](../intl/double-byte-character-sets.md) 字碼頁中的大部分字元都需要兩個位元組。</span><span class="sxs-lookup"><span data-stu-id="b5e9d-111">In "ANSI" strings, characters in [SBCS](../intl/single-byte-character-sets.md) code pages take one byte each, but most characters in [DBCS](../intl/double-byte-character-sets.md) code pages take two bytes.</span></span> <span data-ttu-id="b5e9d-112">同樣地，大部分的目前定義的 Unicode 字元都位於基本多語系平面中 (BMP) 和其 UTF-16 標記法符合一個單字，但增補字元是以 Unicode 表示（需要兩個字組）。</span><span class="sxs-lookup"><span data-stu-id="b5e9d-112">Similarly, most currently defined Unicode characters reside in the Basic Multilingual Plane (BMP) and their UTF-16 representations fit in one WORD, but supplementary characters are represented in Unicode by ''surrogates'', which require two WORDs.</span></span>

<span data-ttu-id="b5e9d-113">這些函式中的每一個都採用長度計數。</span><span class="sxs-lookup"><span data-stu-id="b5e9d-113">Each of these functions takes a length count.</span></span> <span data-ttu-id="b5e9d-114">針對每個函式的 "ANSI" 版本，長度會指定為字串的位元組計數長度，而不包含 **Null** 結束字元。</span><span class="sxs-lookup"><span data-stu-id="b5e9d-114">For the "ANSI" version of each function, the length is specified as a BYTE count length of a string not including the **NULL** terminator.</span></span> <span data-ttu-id="b5e9d-115">針對 Unicode 函式，長度計數是位元組計數除以 sizeof (WCHAR) ，也就是2，不包括 **Null** 結束字元。</span><span class="sxs-lookup"><span data-stu-id="b5e9d-115">For the Unicode function, the length count is the byte count divided by sizeof(WCHAR), which is 2, not including the **NULL** terminator.</span></span> <span data-ttu-id="b5e9d-116">字元計數是字元數的計數，可能不等於字串的長度計數。</span><span class="sxs-lookup"><span data-stu-id="b5e9d-116">The character count is the count of the number of characters, which might not equal the length count of the string.</span></span> <span data-ttu-id="b5e9d-117">在某些情況下，ANSI 的字元會採用一個以上的位元組 (例如， [DBCS](../intl/double-byte-character-sets.md) 字元) 以及 Unicode (一個以上的字組，例如) 的代理字元。</span><span class="sxs-lookup"><span data-stu-id="b5e9d-117">In some instances, characters take more than one BYTE for ANSI (for example, [DBCS](../intl/double-byte-character-sets.md) character) and more than one WORD for Unicode (for example, surrogate characters).</span></span> <span data-ttu-id="b5e9d-118">此外，圖像的數目可能不等於字元數，因為可能會有多個字元組成一個字元。</span><span class="sxs-lookup"><span data-stu-id="b5e9d-118">Further, the number of glyphs might not equal the number of characters because multiple characters might be composited to make one glyph.</span></span> <span data-ttu-id="b5e9d-119">長度計數是資料量。</span><span class="sxs-lookup"><span data-stu-id="b5e9d-119">Length count is the amount of data.</span></span> <span data-ttu-id="b5e9d-120">字元計數是以一個實體處理的單位數目。</span><span class="sxs-lookup"><span data-stu-id="b5e9d-120">Character count is the number of units that are processed as one entity.</span></span> <span data-ttu-id="b5e9d-121">圖像是呈現的內容。</span><span class="sxs-lookup"><span data-stu-id="b5e9d-121">Glyphs are what gets rendered.</span></span> <span data-ttu-id="b5e9d-122">例如，在 Unicode 中，您可以有長度為3的字串，也就是2個字元，而且會轉譯1個圖像。</span><span class="sxs-lookup"><span data-stu-id="b5e9d-122">For example, in Unicode, you can have a string with length of 3, which is 2 characters and which results in 1 glyph being rendered.</span></span> <span data-ttu-id="b5e9d-123">不過，通常大部分的 Unicode 字串長度、字元計數和轉譯的圖像數目都相等。</span><span class="sxs-lookup"><span data-stu-id="b5e9d-123">However, typically, most Unicode strings length, character count, and number of rendered glyphs are equal.</span></span>

<span data-ttu-id="b5e9d-124">您可以使用 \_ tcslen () 取得字串長度。</span><span class="sxs-lookup"><span data-stu-id="b5e9d-124">You can use \_tcslen() to get the string length.</span></span> <span data-ttu-id="b5e9d-125">若是 ANSI， \_ tcslen () 會傳回位元組數目。</span><span class="sxs-lookup"><span data-stu-id="b5e9d-125">For ANSI, \_tcslen() returns the number of bytes.</span></span> <span data-ttu-id="b5e9d-126">若是 Unicode， \_ tcslen () 會傳回 (WCHARs 的數目，也就是) 的單字。</span><span class="sxs-lookup"><span data-stu-id="b5e9d-126">For Unicode, \_tcslen() returns the number of WCHARs (that is, WORDs).</span></span>

<span data-ttu-id="b5e9d-127">不一定會繪製的特殊處理字元（例如定位字元和軟連字號）可能會影響繪製的輸出。</span><span class="sxs-lookup"><span data-stu-id="b5e9d-127">Special processing characters like tabs and soft hyphens that aren't always drawn can affect the drawn output.</span></span> <span data-ttu-id="b5e9d-128">它們會包含在字串長度和字元計數中，但可能不會直接以轉譯的圖像表示。</span><span class="sxs-lookup"><span data-stu-id="b5e9d-128">They get included in the string length and character counts, but might not be directly represented by a rendered glyph.</span></span>

<span data-ttu-id="b5e9d-129">這些函式的部分可讓呼叫者將長度指定為-1，以表示字串以 null 結束;在此情況下，函式會自動計算字元計數。</span><span class="sxs-lookup"><span data-stu-id="b5e9d-129">Some of these functions allow the caller to specify the length as -1 to indicate that the string is null-terminated; in that case the function will compute the character count automatically.</span></span> <span data-ttu-id="b5e9d-130">並非所有函數都提供這項功能。</span><span class="sxs-lookup"><span data-stu-id="b5e9d-130">Not all of the functions offer this capability.</span></span> <span data-ttu-id="b5e9d-131">這是以函式為基礎指定的：請參閱個別的函數檔。</span><span class="sxs-lookup"><span data-stu-id="b5e9d-131">That is specified on a function-by-function basis; see the individual function documentation.</span></span>

 

 
