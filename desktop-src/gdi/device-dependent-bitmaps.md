---
description: 裝置相依點陣圖 (DDBs) 是使用單一結構（點陣圖結構）描述。
ms.assetid: 63ff9cd6-cd07-4085-b166-268e4d9b7aad
title: Device-Dependent 點陣圖
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 92a3de2c59509c71b38f9981df330b3b28effa26
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "104114681"
---
# <a name="device-dependent-bitmaps"></a><span data-ttu-id="5c8ed-103">Device-Dependent 點陣圖</span><span class="sxs-lookup"><span data-stu-id="5c8ed-103">Device-Dependent Bitmaps</span></span>

<span data-ttu-id="5c8ed-104">裝置相依點陣圖 (DDBs) 是使用單一結構（ [**點陣圖**](/windows/win32/api/wingdi/ns-wingdi-bitmap) 結構）描述。</span><span class="sxs-lookup"><span data-stu-id="5c8ed-104">Device-dependent bitmaps (DDBs) are described by using a single structure, the [**BITMAP**](/windows/win32/api/wingdi/ns-wingdi-bitmap) structure.</span></span> <span data-ttu-id="5c8ed-105">此結構的成員會指定矩形區域的寬度和高度（以圖元為單位）。將裝置選擇區中的專案對應到圖元的陣列寬度;和裝置的色彩格式，就色彩平面和每圖元的位數而言。</span><span class="sxs-lookup"><span data-stu-id="5c8ed-105">The members of this structure specify the width and height of a rectangular region, in pixels; the width of the array that maps entries from the device palette to pixels; and the device's color format, in terms of color planes and bits per pixel.</span></span> <span data-ttu-id="5c8ed-106">應用程式可以藉由呼叫 [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) 函式並指定適當的常數，來取得裝置的色彩格式。</span><span class="sxs-lookup"><span data-stu-id="5c8ed-106">An application can retrieve the color format of a device by calling the [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) function and specifying the appropriate constants.</span></span> <span data-ttu-id="5c8ed-107">請注意，DDB 不包含色彩值;相反地，色彩會採用裝置相依的格式。</span><span class="sxs-lookup"><span data-stu-id="5c8ed-107">Note that a DDB does not contain color values; instead, the colors are in a device-dependent format.</span></span> <span data-ttu-id="5c8ed-108">如需詳細資訊，請參閱 [點陣圖中的色彩](color-in-bitmaps.md)。</span><span class="sxs-lookup"><span data-stu-id="5c8ed-108">For more information, see [Color in Bitmaps](color-in-bitmaps.md).</span></span> <span data-ttu-id="5c8ed-109">因為每個裝置都可以有自己的一組色彩，所以針對某個裝置所建立的 DDB 可能無法在不同的裝置上正確顯示。</span><span class="sxs-lookup"><span data-stu-id="5c8ed-109">Because each device can have its own set of colors, a DDB created for one device may not display well on a different device.</span></span>

<span data-ttu-id="5c8ed-110">若要在裝置內容中使用 DDB，它必須具有該裝置內容的色彩組織。</span><span class="sxs-lookup"><span data-stu-id="5c8ed-110">To use a DDB in a device context, it must have the color organization of that device context.</span></span> <span data-ttu-id="5c8ed-111">因此，DDB 通常稱為 *相容的點陣圖* ，它的 GDI 效能通常會比 DIB 更好。</span><span class="sxs-lookup"><span data-stu-id="5c8ed-111">Thus, a DDB is often called a *compatible bitmap* and it usually has better GDI performance than a DIB.</span></span> <span data-ttu-id="5c8ed-112">例如，若要建立視訊記憶體的點陣圖，最好使用具有與主顯示器相同色彩格式的相容點陣圖。</span><span class="sxs-lookup"><span data-stu-id="5c8ed-112">For example, to create a bitmap for video memory, it is best to use a compatible bitmap with the same color format as the primary display.</span></span> <span data-ttu-id="5c8ed-113">在視頻記憶體中，轉譯成點陣圖，並將它顯示在螢幕上，會比從系統記憶體表面或直接從 DIB 更快。</span><span class="sxs-lookup"><span data-stu-id="5c8ed-113">Once in video memory, rendering to the bitmap and displaying it to the screen are significantly faster than from a system memory surface or directly from a DIB.</span></span>

<span data-ttu-id="5c8ed-114">除了啟用更好的 GDI 效能，您也可以使用相容的點陣圖來捕捉影像 (請參閱 ) 抓取 [影像](capturing-an-image.md) ，並在執行時間為功能表建立點陣圖，請參閱 (的 [使用功能表](../menurc/using-menus.md) ) 中的「建立點陣圖」。</span><span class="sxs-lookup"><span data-stu-id="5c8ed-114">In addition to enabling better GDI performance, compatible bitmaps are used to capture images (see [Capturing an Image](capturing-an-image.md) ) and to create bitmaps at run time for menus see "Creating the Bitmap" in (see [Using Menus](../menurc/using-menus.md) ).</span></span>

<span data-ttu-id="5c8ed-115">若要在具有不同色彩組織的裝置之間傳輸點陣圖，請使用 [**GetDIBits**](/windows/desktop/api/Wingdi/nf-wingdi-getdibits) 將相容的點陣圖轉換成 DIB，然後呼叫 [**SetDIBits**](/windows/desktop/api/Wingdi/nf-wingdi-setdibits) 或 [**StretchDIBits**](/windows/desktop/api/Wingdi/nf-wingdi-stretchdibits) ，以將 DIB 顯示到第二個裝置。</span><span class="sxs-lookup"><span data-stu-id="5c8ed-115">To transfer a bitmap between devices with different color organization, use [**GetDIBits**](/windows/desktop/api/Wingdi/nf-wingdi-getdibits) to convert the compatible bitmap to a DIB and call [**SetDIBits**](/windows/desktop/api/Wingdi/nf-wingdi-setdibits) or [**StretchDIBits**](/windows/desktop/api/Wingdi/nf-wingdi-stretchdibits) to display the DIB to the second device.</span></span>

<span data-ttu-id="5c8ed-116">有兩種類型的 DDBs： discardable 和 nondiscardable。</span><span class="sxs-lookup"><span data-stu-id="5c8ed-116">There are two types of DDBs: discardable and nondiscardable.</span></span> <span data-ttu-id="5c8ed-117">Discardable DDB 是一種點陣圖，如果點陣圖未選取到 DC，而且系統記憶體不足，系統就會捨棄該點陣圖。</span><span class="sxs-lookup"><span data-stu-id="5c8ed-117">A discardable DDB is a bitmap that the system discards if the bitmap is not selected into a DC and if system memory is low.</span></span> <span data-ttu-id="5c8ed-118">[**CreateDiscardableBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-creatediscardablebitmap)函式會建立 discardable 點陣圖。</span><span class="sxs-lookup"><span data-stu-id="5c8ed-118">The [**CreateDiscardableBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-creatediscardablebitmap) function creates discardable bitmaps.</span></span> <span data-ttu-id="5c8ed-119">[**CreateBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createbitmap)、 [**CreateCompatibleBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatiblebitmap)和 [**CreateBitmapIndirect**](/windows/desktop/api/Wingdi/nf-wingdi-createbitmapindirect)函數會建立 nondiscardable 點陣圖。</span><span class="sxs-lookup"><span data-stu-id="5c8ed-119">The [**CreateBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createbitmap), [**CreateCompatibleBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatiblebitmap), and [**CreateBitmapIndirect**](/windows/desktop/api/Wingdi/nf-wingdi-createbitmapindirect) functions create nondiscardable bitmaps.</span></span>

<span data-ttu-id="5c8ed-120">應用程式可以藉由初始化所需的結構並呼叫 [**CreateDIBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createdibitmap) 函式，從 DIB 建立 DDB。</span><span class="sxs-lookup"><span data-stu-id="5c8ed-120">An application can create a DDB from a DIB by initializing the required structures and calling the [**CreateDIBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createdibitmap) function.</span></span> <span data-ttu-id="5c8ed-121">在 \_ **CreateDIBitmap** 的呼叫中指定 CBM INIT 相當於呼叫 [**CreateCompatibleBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatiblebitmap) 函式以裝置的格式建立 DDB，然後呼叫 [**SetDIBits**](/windows/desktop/api/Wingdi/nf-wingdi-setdibits) 函式以將 DIB 位轉譯為 DDB。</span><span class="sxs-lookup"><span data-stu-id="5c8ed-121">Specifying CBM\_INIT in the call to **CreateDIBitmap** is equivalent to calling the [**CreateCompatibleBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatiblebitmap) function to create a DDB in the format of the device and then calling the [**SetDIBits**](/windows/desktop/api/Wingdi/nf-wingdi-setdibits) function to translate the DIB bits to the DDB.</span></span> <span data-ttu-id="5c8ed-122">若要判斷裝置是否支援 **SetDIBits** 函式，請呼叫 [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) 函式， \_ 並將 RC DI \_ 點陣圖指定為 RASTERCAPS 旗標。</span><span class="sxs-lookup"><span data-stu-id="5c8ed-122">To determine whether a device supports the **SetDIBits** function, call the [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) function, specifying RC\_DI\_BITMAP as the RASTERCAPS flag.</span></span>

 

 
