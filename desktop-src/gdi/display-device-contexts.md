---
description: 應用程式會藉由呼叫 BeginPaint、GetDC 或 GetDCEx 函式，並識別要顯示對應輸出的視窗，來取得顯示 DC。
ms.assetid: 8f952d68-ee52-4e63-9f09-80a14c755d31
title: 顯示裝置內容
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 41d0eeb3055209ad99a6a50fd129f9f9c064bf52
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "103691900"
---
# <a name="display-device-contexts"></a><span data-ttu-id="88efa-103">顯示裝置內容</span><span class="sxs-lookup"><span data-stu-id="88efa-103">Display Device Contexts</span></span>

<span data-ttu-id="88efa-104">應用程式會藉由呼叫 [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint)、 [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc)或 [**GetDCEx**](/windows/desktop/api/Winuser/nf-winuser-getdcex) 函式，並識別要顯示對應輸出的視窗，來取得顯示 DC。</span><span class="sxs-lookup"><span data-stu-id="88efa-104">An application obtains a display DC by calling the [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint), [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc), or [**GetDCEx**](/windows/desktop/api/Winuser/nf-winuser-getdcex) function and identifying the window in which the corresponding output will appear.</span></span> <span data-ttu-id="88efa-105">一般而言，應用程式必須在工作區中繪製時，才會取得顯示 DC。</span><span class="sxs-lookup"><span data-stu-id="88efa-105">Typically, an application obtains a display DC only when it must draw in the client area.</span></span> <span data-ttu-id="88efa-106">不過，您可以藉由呼叫 [**GetWindowDC**](/windows/desktop/api/Winuser/nf-winuser-getwindowdc)函式來取得 [視窗裝置內容](#window-device-contexts)。</span><span class="sxs-lookup"><span data-stu-id="88efa-106">However, one may obtain a [window device context](#window-device-contexts) by calling the [**GetWindowDC**](/windows/desktop/api/Winuser/nf-winuser-getwindowdc) function.</span></span> <span data-ttu-id="88efa-107">當應用程式完成繪圖時，必須呼叫 [**EndPaint**](/windows/desktop/api/Winuser/nf-winuser-endpaint) 或 [**ReleaseDC**](/windows/desktop/api/Winuser/nf-winuser-releasedc) 函式來釋放 DC。</span><span class="sxs-lookup"><span data-stu-id="88efa-107">When the application is finished drawing, it must release the DC by calling the [**EndPaint**](/windows/desktop/api/Winuser/nf-winuser-endpaint) or [**ReleaseDC**](/windows/desktop/api/Winuser/nf-winuser-releasedc) function.</span></span>

<span data-ttu-id="88efa-108">有五種類型的 Dc 可供影片顯示：</span><span class="sxs-lookup"><span data-stu-id="88efa-108">There are five types of DCs for video displays:</span></span>

-   <span data-ttu-id="88efa-109">類別</span><span class="sxs-lookup"><span data-stu-id="88efa-109">Class</span></span>
-   <span data-ttu-id="88efa-110">通用</span><span class="sxs-lookup"><span data-stu-id="88efa-110">Common</span></span>
-   <span data-ttu-id="88efa-111">私人</span><span class="sxs-lookup"><span data-stu-id="88efa-111">Private</span></span>
-   <span data-ttu-id="88efa-112">時間範圍</span><span class="sxs-lookup"><span data-stu-id="88efa-112">Window</span></span>
-   <span data-ttu-id="88efa-113">父代</span><span class="sxs-lookup"><span data-stu-id="88efa-113">Parent</span></span>

## <a name="class-device-contexts"></a><span data-ttu-id="88efa-114">類別裝置內容</span><span class="sxs-lookup"><span data-stu-id="88efa-114">Class Device Contexts</span></span>

<span data-ttu-id="88efa-115">*類別裝置* 內容受到嚴格的支援，可與16位版本的 Windows 相容。</span><span class="sxs-lookup"><span data-stu-id="88efa-115">*Class device contexts* are supported strictly for compatibility with 16-bit versions of Windows.</span></span> <span data-ttu-id="88efa-116">撰寫您的應用程式時，請避免使用類別裝置內容;請改用私用裝置內容。</span><span class="sxs-lookup"><span data-stu-id="88efa-116">When writing your application, avoid using the class device context; use a private device context instead.</span></span>

## <a name="common-device-contexts"></a><span data-ttu-id="88efa-117">一般裝置內容</span><span class="sxs-lookup"><span data-stu-id="88efa-117">Common Device Contexts</span></span>

<span data-ttu-id="88efa-118">*一般裝置* 內容會顯示系統在特殊快取中維護的 dc。</span><span class="sxs-lookup"><span data-stu-id="88efa-118">*Common device contexts* are display DCs maintained in a special cache by the system.</span></span> <span data-ttu-id="88efa-119">一般裝置內容會用於執行不頻繁繪圖作業的應用程式。</span><span class="sxs-lookup"><span data-stu-id="88efa-119">Common device contexts are used in applications that perform infrequent drawing operations.</span></span> <span data-ttu-id="88efa-120">在系統傳回 DC 控制碼之前，它會使用預設物件、屬性和模式來初始化一般裝置內容。</span><span class="sxs-lookup"><span data-stu-id="88efa-120">Before the system returns the DC handle, it initializes the common device context with default objects, attributes, and modes.</span></span> <span data-ttu-id="88efa-121">應用程式所執行的任何繪圖作業都會使用這些預設值，除非呼叫其中一個 GDI 函數來選取新的物件、變更現有物件的屬性，或選取新的模式。</span><span class="sxs-lookup"><span data-stu-id="88efa-121">Any drawing operations performed by the application use these defaults unless one of the GDI functions is called to select a new object, change the attributes of an existing object, or select a new mode.</span></span>

<span data-ttu-id="88efa-122">因為只有有限數目的常見裝置內容存在，所以應用程式應該在完成繪製之後釋放它們。</span><span class="sxs-lookup"><span data-stu-id="88efa-122">Because only a limited number of common device contexts exist, an application should release them after it has finished drawing.</span></span> <span data-ttu-id="88efa-123">當應用程式釋放一般裝置內容時，對預設資料所做的任何變更都會遺失。</span><span class="sxs-lookup"><span data-stu-id="88efa-123">When the application releases a common device context, any changes to the default data are lost.</span></span>

## <a name="private-device-contexts"></a><span data-ttu-id="88efa-124">私用裝置內容</span><span class="sxs-lookup"><span data-stu-id="88efa-124">Private Device Contexts</span></span>

<span data-ttu-id="88efa-125">*私人裝置* 內容會顯示 dc，與通用裝置內容不同的是，即使在應用程式發行之後，仍會保留對預設資料所做的任何變更。</span><span class="sxs-lookup"><span data-stu-id="88efa-125">*Private device contexts* are display DCs that, unlike common device contexts, retain any changes to the default data even after an application releases them.</span></span> <span data-ttu-id="88efa-126">私用裝置內容會用於執行許多繪圖作業的應用程式，例如電腦輔助設計 (CAD) 應用程式、桌面發佈應用程式、繪圖和繪製應用程式等等。</span><span class="sxs-lookup"><span data-stu-id="88efa-126">Private device contexts are used in applications that perform numerous drawing operations such as computer-aided design (CAD) applications, desktop-publishing applications, drawing and painting applications, and so on.</span></span> <span data-ttu-id="88efa-127">私用裝置內容不是系統快取的一部分，因此不需要在使用後釋出。</span><span class="sxs-lookup"><span data-stu-id="88efa-127">Private device contexts are not part of the system cache and therefore need not be released after use.</span></span> <span data-ttu-id="88efa-128">系統會在該類別的最後一個視窗終結之後，自動移除私用裝置內容。</span><span class="sxs-lookup"><span data-stu-id="88efa-128">The system automatically removes a private device context after the last window of that class has been destroyed.</span></span>

<span data-ttu-id="88efa-129">應用程式 \_ 會在初始化 [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa)結構的 **樣式** 成員並呼叫 [**RegisterClass**](/windows/win32/api/winuser/nf-winuser-registerclassa)函式時，先指定 CS OWNDC 視窗類別的樣式，藉以建立私用裝置內容。</span><span class="sxs-lookup"><span data-stu-id="88efa-129">An application creates a private device context by first specifying the CS\_OWNDC window-class style when it initializes the **style** member of the [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa) structure and calls the [**RegisterClass**](/windows/win32/api/winuser/nf-winuser-registerclassa) function.</span></span> <span data-ttu-id="88efa-130"> (如需視窗類別的詳細資訊，請參閱 [視窗類別](../winmsg/window-classes.md)。 ) </span><span class="sxs-lookup"><span data-stu-id="88efa-130">(For more information about window classes, see [Window Classes](../winmsg/window-classes.md).)</span></span>

<span data-ttu-id="88efa-131">使用 CS OWNDC 樣式建立視窗之後 \_ ，應用程式就可以呼叫 [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc)、 [**GetDCEx**](/windows/desktop/api/Winuser/nf-winuser-getdcex)或 [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) 函式一次，以取得識別私用裝置內容的控制碼。</span><span class="sxs-lookup"><span data-stu-id="88efa-131">After creating a window with the CS\_OWNDC style, an application can call the [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc), [**GetDCEx**](/windows/desktop/api/Winuser/nf-winuser-getdcex), or [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) function once to obtain a handle identifying a private device context.</span></span> <span data-ttu-id="88efa-132">應用程式可以繼續使用這個控制碼 (以及相關聯的 DC) ，直到它刪除以此類別建立的視窗為止。</span><span class="sxs-lookup"><span data-stu-id="88efa-132">The application can continue using this handle (and the associated DC) until it deletes the window created with this class.</span></span> <span data-ttu-id="88efa-133">系統會保留所有繪圖物件及其屬性的變更，或圖形模式，直到刪除視窗為止。</span><span class="sxs-lookup"><span data-stu-id="88efa-133">Any changes to graphic objects and their attributes, or graphic modes are retained by the system until the window is deleted.</span></span>

## <a name="window-device-contexts"></a><span data-ttu-id="88efa-134">視窗裝置內容</span><span class="sxs-lookup"><span data-stu-id="88efa-134">Window Device Contexts</span></span>

<span data-ttu-id="88efa-135">*視窗裝置內容* 可讓應用程式在視窗中的任何位置繪製，包括非工作區。</span><span class="sxs-lookup"><span data-stu-id="88efa-135">A *window device context* enables an application to draw anywhere in a window, including the nonclient area.</span></span> <span data-ttu-id="88efa-136">使用自訂非工作區的應用程式，通常會使用視窗裝置內容來處理適用于 windows 的 [**wm \_ NCPAINT**](wm-ncpaint.md) 和 [**WM \_ NCACTI加值稅E**](../winmsg/wm-ncactivate.md) 訊息。</span><span class="sxs-lookup"><span data-stu-id="88efa-136">Window device contexts are typically used by applications that process the [**WM\_NCPAINT**](wm-ncpaint.md) and [**WM\_NCACTIVATE**](../winmsg/wm-ncactivate.md) messages for windows with custom nonclient areas.</span></span> <span data-ttu-id="88efa-137">不建議針對任何其他用途使用視窗裝置內容。</span><span class="sxs-lookup"><span data-stu-id="88efa-137">Using a window device context is not recommended for any other purpose.</span></span> <span data-ttu-id="88efa-138">如需詳細資訊，請參閱 [**GetWindowDC**](/windows/desktop/api/Winuser/nf-winuser-getwindowdc)。</span><span class="sxs-lookup"><span data-stu-id="88efa-138">For more information; see [**GetWindowDC**](/windows/desktop/api/Winuser/nf-winuser-getwindowdc).</span></span>

## <a name="parent-device-contexts"></a><span data-ttu-id="88efa-139">父裝置內容</span><span class="sxs-lookup"><span data-stu-id="88efa-139">Parent Device Contexts</span></span>

<span data-ttu-id="88efa-140">*父裝置內容* 可讓應用程式將設定視窗裁剪區域所需的時間減至最少。</span><span class="sxs-lookup"><span data-stu-id="88efa-140">A *parent device context* enables an application to minimize the time necessary to set up the clipping region for a window.</span></span> <span data-ttu-id="88efa-141">應用程式通常會使用上層裝置內容來加速控制視窗的繪製，而不需要私人或類別的裝置內容。</span><span class="sxs-lookup"><span data-stu-id="88efa-141">An application typically uses parent device contexts to speed up drawing for control windows without requiring a private or class device context.</span></span> <span data-ttu-id="88efa-142">例如，系統會使用推播按鈕和編輯控制項的父裝置內容。</span><span class="sxs-lookup"><span data-stu-id="88efa-142">For example, the system uses parent device contexts for push button and edit controls.</span></span> <span data-ttu-id="88efa-143">父裝置內容僅適用于子視窗，絕不會使用最上層或快顯視窗。</span><span class="sxs-lookup"><span data-stu-id="88efa-143">Parent device contexts are intended for use with child windows only, never with top-level or pop-up windows.</span></span> <span data-ttu-id="88efa-144">如需詳細資訊，請參閱 [父代顯示裝置](parent-display-device-contexts.md)內容。</span><span class="sxs-lookup"><span data-stu-id="88efa-144">For more information; see [Parent Display Device Contexts](parent-display-device-contexts.md).</span></span>

 

 
